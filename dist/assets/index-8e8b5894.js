import{r as Te,R as Ro,a as bf,g as Oc,c as At,b as Ac}from"./vendor-5c2c506d.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Cc={exports:{}},_i={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wf=Te,_f=Symbol.for("react.element"),Ef=Symbol.for("react.fragment"),vf=Object.prototype.hasOwnProperty,xf=wf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Sf={key:!0,ref:!0,__self:!0,__source:!0};function Tc(e,t,r){var n,i={},s=null,c=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(c=t.ref);for(n in t)vf.call(t,n)&&!Sf.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:_f,type:e,key:s,ref:c,props:i,_owner:xf.current}}_i.Fragment=Ef;_i.jsx=Tc;_i.jsxs=Tc;Cc.exports=_i;var $t=Cc.exports;const Df={black:"#000",white:"#fff"},Nn=Df,If={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},zr=If,Of={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Kr=Of,Af={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},qr=Af,Cf={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Hr=Cf,Tf={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Wr=Tf,Rf={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},pn=Rf,Pf={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Nf=Pf;function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fe.apply(this,arguments)}function Jr(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function Rc(e){if(!Jr(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=Rc(e[r])}),t}function pr(e,t,r={clone:!0}){const n=r.clone?Fe({},e):e;return Jr(e)&&Jr(t)&&Object.keys(t).forEach(i=>{i!=="__proto__"&&(Jr(t[i])&&i in e&&Jr(e[i])?n[i]=pr(e[i],t[i],r):r.clone?n[i]=Jr(t[i])?Rc(t[i]):t[i]:n[i]=t[i])}),n}function rn(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function Pc(e){if(typeof e!="string")throw new Error(rn(7));return e.charAt(0).toUpperCase()+e.slice(1)}function Nc(e,t){const r=Fe({},t);return Object.keys(e).forEach(n=>{if(n.toString().match(/^(components|slots)$/))r[n]=Fe({},e[n],r[n]);else if(n.toString().match(/^(componentsProps|slotProps)$/)){const i=e[n]||{},s=t[n];r[n]={},!s||!Object.keys(s)?r[n]=i:!i||!Object.keys(i)?r[n]=s:(r[n]=Fe({},s),Object.keys(i).forEach(c=>{r[n][c]=Nc(i[c],s[c])}))}else r[n]===void 0&&(r[n]=e[n])}),r}const Fc="$$material";function on(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function Ff(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}function Lf(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Uf(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var $f=function(){function e(r){var n=this;this._insertTag=function(i){var s;n.tags.length===0?n.insertionPoint?s=n.insertionPoint.nextSibling:n.prepend?s=n.container.firstChild:s=n.before:s=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,s),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Uf(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=Lf(i);try{s.insertRule(n,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){return n.parentNode&&n.parentNode.removeChild(n)}),this.tags=[],this.ctr=0},e}(),It="-ms-",hi="-moz-",Ae="-webkit-",Lc="comm",Ms="rule",Bs="decl",Mf="@import",Uc="@keyframes",Bf="@layer",jf=Math.abs,Ei=String.fromCharCode,kf=Object.assign;function zf(e,t){return _t(e,0)^45?(((t<<2^_t(e,0))<<2^_t(e,1))<<2^_t(e,2))<<2^_t(e,3):0}function $c(e){return e.trim()}function Kf(e,t){return(e=t.exec(e))?e[0]:e}function Ce(e,t,r){return e.replace(t,r)}function Es(e,t){return e.indexOf(t)}function _t(e,t){return e.charCodeAt(t)|0}function Fn(e,t,r){return e.slice(t,r)}function rr(e){return e.length}function js(e){return e.length}function ti(e,t){return t.push(e),e}function qf(e,t){return e.map(t).join("")}var vi=1,nn=1,Mc=0,Ft=0,et=0,an="";function xi(e,t,r,n,i,s,c){return{value:e,root:t,parent:r,type:n,props:i,children:s,line:vi,column:nn,length:c,return:""}}function gn(e,t){return kf(xi("",null,null,"",null,null,0),e,{length:-e.length},t)}function Hf(){return et}function Wf(){return et=Ft>0?_t(an,--Ft):0,nn--,et===10&&(nn=1,vi--),et}function Bt(){return et=Ft<Mc?_t(an,Ft++):0,nn++,et===10&&(nn=1,vi++),et}function or(){return _t(an,Ft)}function oi(){return Ft}function Mn(e,t){return Fn(an,e,t)}function Ln(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Bc(e){return vi=nn=1,Mc=rr(an=e),Ft=0,[]}function jc(e){return an="",e}function ai(e){return $c(Mn(Ft-1,vs(e===91?e+2:e===40?e+1:e)))}function Vf(e){for(;(et=or())&&et<33;)Bt();return Ln(e)>2||Ln(et)>3?"":" "}function Gf(e,t){for(;--t&&Bt()&&!(et<48||et>102||et>57&&et<65||et>70&&et<97););return Mn(e,oi()+(t<6&&or()==32&&Bt()==32))}function vs(e){for(;Bt();)switch(et){case e:return Ft;case 34:case 39:e!==34&&e!==39&&vs(et);break;case 40:e===41&&vs(e);break;case 92:Bt();break}return Ft}function Yf(e,t){for(;Bt()&&e+et!==47+10;)if(e+et===42+42&&or()===47)break;return"/*"+Mn(t,Ft-1)+"*"+Ei(e===47?e:Bt())}function Jf(e){for(;!Ln(or());)Bt();return Mn(e,Ft)}function Xf(e){return jc(ci("",null,null,null,[""],e=Bc(e),0,[0],e))}function ci(e,t,r,n,i,s,c,o,h){for(var p=0,m=0,E=c,A=0,I=0,S=0,R=1,j=1,H=1,T=0,F="",v=i,D=s,y=n,a=F;j;)switch(S=T,T=Bt()){case 40:if(S!=108&&_t(a,E-1)==58){Es(a+=Ce(ai(T),"&","&\f"),"&\f")!=-1&&(H=-1);break}case 34:case 39:case 91:a+=ai(T);break;case 9:case 10:case 13:case 32:a+=Vf(S);break;case 92:a+=Gf(oi()-1,7);continue;case 47:switch(or()){case 42:case 47:ti(Zf(Yf(Bt(),oi()),t,r),h);break;default:a+="/"}break;case 123*R:o[p++]=rr(a)*H;case 125*R:case 59:case 0:switch(T){case 0:case 125:j=0;case 59+m:H==-1&&(a=Ce(a,/\f/g,"")),I>0&&rr(a)-E&&ti(I>32?No(a+";",n,r,E-1):No(Ce(a," ","")+";",n,r,E-2),h);break;case 59:a+=";";default:if(ti(y=Po(a,t,r,p,m,i,o,F,v=[],D=[],E),s),T===123)if(m===0)ci(a,t,y,y,v,s,E,o,D);else switch(A===99&&_t(a,3)===110?100:A){case 100:case 108:case 109:case 115:ci(e,y,y,n&&ti(Po(e,y,y,0,0,i,o,F,i,v=[],E),D),i,D,E,o,n?v:D);break;default:ci(a,y,y,y,[""],D,0,o,D)}}p=m=I=0,R=H=1,F=a="",E=c;break;case 58:E=1+rr(a),I=S;default:if(R<1){if(T==123)--R;else if(T==125&&R++==0&&Wf()==125)continue}switch(a+=Ei(T),T*R){case 38:H=m>0?1:(a+="\f",-1);break;case 44:o[p++]=(rr(a)-1)*H,H=1;break;case 64:or()===45&&(a+=ai(Bt())),A=or(),m=E=rr(F=a+=Jf(oi())),T++;break;case 45:S===45&&rr(a)==2&&(R=0)}}return s}function Po(e,t,r,n,i,s,c,o,h,p,m){for(var E=i-1,A=i===0?s:[""],I=js(A),S=0,R=0,j=0;S<n;++S)for(var H=0,T=Fn(e,E+1,E=jf(R=c[S])),F=e;H<I;++H)(F=$c(R>0?A[H]+" "+T:Ce(T,/&\f/g,A[H])))&&(h[j++]=F);return xi(e,t,r,i===0?Ms:o,h,p,m)}function Zf(e,t,r){return xi(e,t,r,Lc,Ei(Hf()),Fn(e,2,-2),0)}function No(e,t,r,n){return xi(e,t,r,Bs,Fn(e,0,n),Fn(e,n+1,-1),n)}function Qr(e,t){for(var r="",n=js(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function Qf(e,t,r,n){switch(e.type){case Bf:if(e.children.length)break;case Mf:case Bs:return e.return=e.return||e.value;case Lc:return"";case Uc:return e.return=e.value+"{"+Qr(e.children,n)+"}";case Ms:e.value=e.props.join(",")}return rr(r=Qr(e.children,n))?e.return=e.value+"{"+r+"}":""}function eh(e){var t=js(e);return function(r,n,i,s){for(var c="",o=0;o<t;o++)c+=e[o](r,n,i,s)||"";return c}}function th(e){return function(t){t.root||(t=t.return)&&e(t)}}var rh=function(t,r,n){for(var i=0,s=0;i=s,s=or(),i===38&&s===12&&(r[n]=1),!Ln(s);)Bt();return Mn(t,Ft)},nh=function(t,r){var n=-1,i=44;do switch(Ln(i)){case 0:i===38&&or()===12&&(r[n]=1),t[n]+=rh(Ft-1,r,n);break;case 2:t[n]+=ai(i);break;case 4:if(i===44){t[++n]=or()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=Ei(i)}while(i=Bt());return t},ih=function(t,r){return jc(nh(Bc(t),r))},Fo=new WeakMap,sh=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!Fo.get(n))&&!i){Fo.set(t,!0);for(var s=[],c=ih(r,s),o=n.props,h=0,p=0;h<c.length;h++)for(var m=0;m<o.length;m++,p++)t.props[p]=s[h]?c[h].replace(/&\f/g,o[m]):o[m]+" "+c[h]}}},oh=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function kc(e,t){switch(zf(e,t)){case 5103:return Ae+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ae+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ae+e+hi+e+It+e+e;case 6828:case 4268:return Ae+e+It+e+e;case 6165:return Ae+e+It+"flex-"+e+e;case 5187:return Ae+e+Ce(e,/(\w+).+(:[^]+)/,Ae+"box-$1$2"+It+"flex-$1$2")+e;case 5443:return Ae+e+It+"flex-item-"+Ce(e,/flex-|-self/,"")+e;case 4675:return Ae+e+It+"flex-line-pack"+Ce(e,/align-content|flex-|-self/,"")+e;case 5548:return Ae+e+It+Ce(e,"shrink","negative")+e;case 5292:return Ae+e+It+Ce(e,"basis","preferred-size")+e;case 6060:return Ae+"box-"+Ce(e,"-grow","")+Ae+e+It+Ce(e,"grow","positive")+e;case 4554:return Ae+Ce(e,/([^-])(transform)/g,"$1"+Ae+"$2")+e;case 6187:return Ce(Ce(Ce(e,/(zoom-|grab)/,Ae+"$1"),/(image-set)/,Ae+"$1"),e,"")+e;case 5495:case 3959:return Ce(e,/(image-set\([^]*)/,Ae+"$1$`$1");case 4968:return Ce(Ce(e,/(.+:)(flex-)?(.*)/,Ae+"box-pack:$3"+It+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ae+e+e;case 4095:case 3583:case 4068:case 2532:return Ce(e,/(.+)-inline(.+)/,Ae+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(rr(e)-1-t>6)switch(_t(e,t+1)){case 109:if(_t(e,t+4)!==45)break;case 102:return Ce(e,/(.+:)(.+)-([^]+)/,"$1"+Ae+"$2-$3$1"+hi+(_t(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Es(e,"stretch")?kc(Ce(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(_t(e,t+1)!==115)break;case 6444:switch(_t(e,rr(e)-3-(~Es(e,"!important")&&10))){case 107:return Ce(e,":",":"+Ae)+e;case 101:return Ce(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ae+(_t(e,14)===45?"inline-":"")+"box$3$1"+Ae+"$2$3$1"+It+"$2box$3")+e}break;case 5936:switch(_t(e,t+11)){case 114:return Ae+e+It+Ce(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ae+e+It+Ce(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ae+e+It+Ce(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Ae+e+It+e+e}return e}var ah=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case Bs:t.return=kc(t.value,t.length);break;case Uc:return Qr([gn(t,{value:Ce(t.value,"@","@"+Ae)})],i);case Ms:if(t.length)return qf(t.props,function(s){switch(Kf(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Qr([gn(t,{props:[Ce(s,/:(read-\w+)/,":"+hi+"$1")]})],i);case"::placeholder":return Qr([gn(t,{props:[Ce(s,/:(plac\w+)/,":"+Ae+"input-$1")]}),gn(t,{props:[Ce(s,/:(plac\w+)/,":"+hi+"$1")]}),gn(t,{props:[Ce(s,/:(plac\w+)/,It+"input-$1")]})],i)}return""})}},ch=[ah],uh=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(R){var j=R.getAttribute("data-emotion");j.indexOf(" ")!==-1&&(document.head.appendChild(R),R.setAttribute("data-s",""))})}var i=t.stylisPlugins||ch,s={},c,o=[];c=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(R){for(var j=R.getAttribute("data-emotion").split(" "),H=1;H<j.length;H++)s[j[H]]=!0;o.push(R)});var h,p=[sh,oh];{var m,E=[Qf,th(function(R){m.insert(R)})],A=eh(p.concat(i,E)),I=function(j){return Qr(Xf(j),A)};h=function(j,H,T,F){m=T,I(j?j+"{"+H.styles+"}":H.styles),F&&(S.inserted[H.name]=!0)}}var S={key:r,sheet:new $f({key:r,container:c,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:h};return S.sheet.hydrate(o),S},zc={exports:{}},Pe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gt=typeof Symbol=="function"&&Symbol.for,ks=gt?Symbol.for("react.element"):60103,zs=gt?Symbol.for("react.portal"):60106,Si=gt?Symbol.for("react.fragment"):60107,Di=gt?Symbol.for("react.strict_mode"):60108,Ii=gt?Symbol.for("react.profiler"):60114,Oi=gt?Symbol.for("react.provider"):60109,Ai=gt?Symbol.for("react.context"):60110,Ks=gt?Symbol.for("react.async_mode"):60111,Ci=gt?Symbol.for("react.concurrent_mode"):60111,Ti=gt?Symbol.for("react.forward_ref"):60112,Ri=gt?Symbol.for("react.suspense"):60113,lh=gt?Symbol.for("react.suspense_list"):60120,Pi=gt?Symbol.for("react.memo"):60115,Ni=gt?Symbol.for("react.lazy"):60116,fh=gt?Symbol.for("react.block"):60121,hh=gt?Symbol.for("react.fundamental"):60117,dh=gt?Symbol.for("react.responder"):60118,ph=gt?Symbol.for("react.scope"):60119;function jt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case ks:switch(e=e.type,e){case Ks:case Ci:case Si:case Ii:case Di:case Ri:return e;default:switch(e=e&&e.$$typeof,e){case Ai:case Ti:case Ni:case Pi:case Oi:return e;default:return t}}case zs:return t}}}function Kc(e){return jt(e)===Ci}Pe.AsyncMode=Ks;Pe.ConcurrentMode=Ci;Pe.ContextConsumer=Ai;Pe.ContextProvider=Oi;Pe.Element=ks;Pe.ForwardRef=Ti;Pe.Fragment=Si;Pe.Lazy=Ni;Pe.Memo=Pi;Pe.Portal=zs;Pe.Profiler=Ii;Pe.StrictMode=Di;Pe.Suspense=Ri;Pe.isAsyncMode=function(e){return Kc(e)||jt(e)===Ks};Pe.isConcurrentMode=Kc;Pe.isContextConsumer=function(e){return jt(e)===Ai};Pe.isContextProvider=function(e){return jt(e)===Oi};Pe.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===ks};Pe.isForwardRef=function(e){return jt(e)===Ti};Pe.isFragment=function(e){return jt(e)===Si};Pe.isLazy=function(e){return jt(e)===Ni};Pe.isMemo=function(e){return jt(e)===Pi};Pe.isPortal=function(e){return jt(e)===zs};Pe.isProfiler=function(e){return jt(e)===Ii};Pe.isStrictMode=function(e){return jt(e)===Di};Pe.isSuspense=function(e){return jt(e)===Ri};Pe.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Si||e===Ci||e===Ii||e===Di||e===Ri||e===lh||typeof e=="object"&&e!==null&&(e.$$typeof===Ni||e.$$typeof===Pi||e.$$typeof===Oi||e.$$typeof===Ai||e.$$typeof===Ti||e.$$typeof===hh||e.$$typeof===dh||e.$$typeof===ph||e.$$typeof===fh)};Pe.typeOf=jt;zc.exports=Pe;var gh=zc.exports,qc=gh,yh={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},mh={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Hc={};Hc[qc.ForwardRef]=yh;Hc[qc.Memo]=mh;var bh=!0,wh=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||bh===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},_h=function(t,r,n){wh(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var s=r;do t.insert(r===s?"."+i:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function Eh(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var vh={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},xh=/[A-Z]|^ms/g,Sh=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Wc=function(t){return t.charCodeAt(1)===45},Lo=function(t){return t!=null&&typeof t!="boolean"},Qi=Ff(function(e){return Wc(e)?e:e.replace(xh,"-$&").toLowerCase()}),Uo=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(Sh,function(n,i,s){return nr={name:i,styles:s,next:nr},i})}return vh[t]!==1&&!Wc(t)&&typeof r=="number"&&r!==0?r+"px":r};function Un(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return nr={name:r.name,styles:r.styles,next:nr},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)nr={name:n.name,styles:n.styles,next:nr},n=n.next;var i=r.styles+";";return i}return Dh(e,t,r)}case"function":{if(e!==void 0){var s=nr,c=r(e);return nr=s,Un(e,t,c)}break}}if(t==null)return r;var o=t[r];return o!==void 0?o:r}function Dh(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=Un(e,t,r[i])+";";else for(var s in r){var c=r[s];if(typeof c!="object")t!=null&&t[c]!==void 0?n+=s+"{"+t[c]+"}":Lo(c)&&(n+=Qi(s)+":"+Uo(s,c)+";");else if(Array.isArray(c)&&typeof c[0]=="string"&&(t==null||t[c[0]]===void 0))for(var o=0;o<c.length;o++)Lo(c[o])&&(n+=Qi(s)+":"+Uo(s,c[o])+";");else{var h=Un(e,t,c);switch(s){case"animation":case"animationName":{n+=Qi(s)+":"+h+";";break}default:n+=s+"{"+h+"}"}}}return n}var $o=/label:\s*([^\s;\n{]+)\s*(;|$)/g,nr,Ih=function(t,r,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var i=!0,s="";nr=void 0;var c=t[0];c==null||c.raw===void 0?(i=!1,s+=Un(n,r,c)):s+=c[0];for(var o=1;o<t.length;o++)s+=Un(n,r,t[o]),i&&(s+=c[o]);$o.lastIndex=0;for(var h="",p;(p=$o.exec(s))!==null;)h+="-"+p[1];var m=Eh(s)+h;return{name:m,styles:s,next:nr}},Oh=Ro["useInsertionEffect"]?Ro["useInsertionEffect"]:!1,Mo=Oh||Te.useLayoutEffect,Vc=Te.createContext(typeof HTMLElement<"u"?uh({key:"css"}):null);Vc.Provider;var Ah=function(t){return Te.forwardRef(function(r,n){var i=Te.useContext(Vc);return t(r,i,n)})},Gc=Te.createContext({}),Ch=Ah(function(e,t){var r=e.styles,n=Ih([r],void 0,Te.useContext(Gc)),i=Te.useRef();return Mo(function(){var s=t.key+"-global",c=new t.sheet.constructor({key:s,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),o=!1,h=document.querySelector('style[data-emotion="'+s+" "+n.name+'"]');return t.sheet.tags.length&&(c.before=t.sheet.tags[0]),h!==null&&(o=!0,h.setAttribute("data-emotion",s),c.hydrate([h])),i.current=[c,o],function(){c.flush()}},[t]),Mo(function(){var s=i.current,c=s[0],o=s[1];if(o){s[1]=!1;return}if(n.next!==void 0&&_h(t,n.next,!0),c.tags.length){var h=c.tags[c.tags.length-1].nextElementSibling;c.before=h,c.flush()}t.insert("",n,c,!1)},[t,n.name]),null});function Th(e){return e==null||Object.keys(e).length===0}function Rh(e){const{styles:t,defaultTheme:r={}}=e,n=typeof t=="function"?i=>t(Th(i)?r:i):t;return $t.jsx(Ch,{styles:n})}const Ph=["values","unit","step"],Nh=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,n)=>r.val-n.val),t.reduce((r,n)=>Fe({},r,{[n.key]:n.val}),{})};function Fh(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:n=5}=e,i=on(e,Ph),s=Nh(t),c=Object.keys(s);function o(A){return`@media (min-width:${typeof t[A]=="number"?t[A]:A}${r})`}function h(A){return`@media (max-width:${(typeof t[A]=="number"?t[A]:A)-n/100}${r})`}function p(A,I){const S=c.indexOf(I);return`@media (min-width:${typeof t[A]=="number"?t[A]:A}${r}) and (max-width:${(S!==-1&&typeof t[c[S]]=="number"?t[c[S]]:I)-n/100}${r})`}function m(A){return c.indexOf(A)+1<c.length?p(A,c[c.indexOf(A)+1]):o(A)}function E(A){const I=c.indexOf(A);return I===0?o(c[1]):I===c.length-1?h(c[I]):p(A,c[c.indexOf(A)+1]).replace("@media","@media not all and")}return Fe({keys:c,values:s,up:o,down:h,between:p,only:m,not:E,unit:r},i)}const Lh={borderRadius:4},Uh=Lh;function Tn(e,t){return t?pr(e,t,{clone:!1}):e}const qs={xs:0,sm:600,md:900,lg:1200,xl:1536},Bo={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${qs[e]}px)`};function gr(e,t,r){const n=e.theme||{};if(Array.isArray(t)){const s=n.breakpoints||Bo;return t.reduce((c,o,h)=>(c[s.up(s.keys[h])]=r(t[h]),c),{})}if(typeof t=="object"){const s=n.breakpoints||Bo;return Object.keys(t).reduce((c,o)=>{if(Object.keys(s.values||qs).indexOf(o)!==-1){const h=s.up(o);c[h]=r(t[o],o)}else{const h=o;c[h]=t[h]}return c},{})}return r(t)}function $h(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((n,i)=>{const s=e.up(i);return n[s]={},n},{}))||{}}function Mh(e,t){return e.reduce((r,n)=>{const i=r[n];return(!i||Object.keys(i).length===0)&&delete r[n],r},t)}function Fi(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const n=`vars.${t}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,e);if(n!=null)return n}return t.split(".").reduce((n,i)=>n&&n[i]!=null?n[i]:null,e)}function di(e,t,r,n=r){let i;return typeof e=="function"?i=e(r):Array.isArray(e)?i=e[r]||n:i=Fi(e,r)||n,t&&(i=t(i,n,e)),i}function Re(e){const{prop:t,cssProperty:r=e.prop,themeKey:n,transform:i}=e,s=c=>{if(c[t]==null)return null;const o=c[t],h=c.theme,p=Fi(h,n)||{};return gr(c,o,E=>{let A=di(p,i,E);return E===A&&typeof E=="string"&&(A=di(p,i,`${t}${E==="default"?"":Pc(E)}`,E)),r===!1?A:{[r]:A}})};return s.propTypes={},s.filterProps=[t],s}function Bh(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const jh={m:"margin",p:"padding"},kh={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},jo={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},zh=Bh(e=>{if(e.length>2)if(jo[e])e=jo[e];else return[e];const[t,r]=e.split(""),n=jh[t],i=kh[r]||"";return Array.isArray(i)?i.map(s=>n+s):[n+i]}),Hs=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Ws=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Hs,...Ws];function Bn(e,t,r,n){var i;const s=(i=Fi(e,t,!1))!=null?i:r;return typeof s=="number"?c=>typeof c=="string"?c:s*c:Array.isArray(s)?c=>typeof c=="string"?c:s[c]:typeof s=="function"?s:()=>{}}function Yc(e){return Bn(e,"spacing",8)}function jn(e,t){if(typeof t=="string"||t==null)return t;const r=Math.abs(t),n=e(r);return t>=0?n:typeof n=="number"?-n:`-${n}`}function Kh(e,t){return r=>e.reduce((n,i)=>(n[i]=jn(t,r),n),{})}function qh(e,t,r,n){if(t.indexOf(r)===-1)return null;const i=zh(r),s=Kh(i,n),c=e[r];return gr(e,c,s)}function Jc(e,t){const r=Yc(e.theme);return Object.keys(e).map(n=>qh(e,t,n,r)).reduce(Tn,{})}function We(e){return Jc(e,Hs)}We.propTypes={};We.filterProps=Hs;function Ve(e){return Jc(e,Ws)}Ve.propTypes={};Ve.filterProps=Ws;function Hh(e=8){if(e.mui)return e;const t=Yc({spacing:e}),r=(...n)=>(n.length===0?[1]:n).map(s=>{const c=t(s);return typeof c=="number"?`${c}px`:c}).join(" ");return r.mui=!0,r}function Li(...e){const t=e.reduce((n,i)=>(i.filterProps.forEach(s=>{n[s]=i}),n),{}),r=n=>Object.keys(n).reduce((i,s)=>t[s]?Tn(i,t[s](n)):i,{});return r.propTypes={},r.filterProps=e.reduce((n,i)=>n.concat(i.filterProps),[]),r}function ir(e){return typeof e!="number"?e:`${e}px solid`}const Wh=Re({prop:"border",themeKey:"borders",transform:ir}),Vh=Re({prop:"borderTop",themeKey:"borders",transform:ir}),Gh=Re({prop:"borderRight",themeKey:"borders",transform:ir}),Yh=Re({prop:"borderBottom",themeKey:"borders",transform:ir}),Jh=Re({prop:"borderLeft",themeKey:"borders",transform:ir}),Xh=Re({prop:"borderColor",themeKey:"palette"}),Zh=Re({prop:"borderTopColor",themeKey:"palette"}),Qh=Re({prop:"borderRightColor",themeKey:"palette"}),ed=Re({prop:"borderBottomColor",themeKey:"palette"}),td=Re({prop:"borderLeftColor",themeKey:"palette"}),Ui=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Bn(e.theme,"shape.borderRadius",4),r=n=>({borderRadius:jn(t,n)});return gr(e,e.borderRadius,r)}return null};Ui.propTypes={};Ui.filterProps=["borderRadius"];Li(Wh,Vh,Gh,Yh,Jh,Xh,Zh,Qh,ed,td,Ui);const $i=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Bn(e.theme,"spacing",8),r=n=>({gap:jn(t,n)});return gr(e,e.gap,r)}return null};$i.propTypes={};$i.filterProps=["gap"];const Mi=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Bn(e.theme,"spacing",8),r=n=>({columnGap:jn(t,n)});return gr(e,e.columnGap,r)}return null};Mi.propTypes={};Mi.filterProps=["columnGap"];const Bi=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Bn(e.theme,"spacing",8),r=n=>({rowGap:jn(t,n)});return gr(e,e.rowGap,r)}return null};Bi.propTypes={};Bi.filterProps=["rowGap"];const rd=Re({prop:"gridColumn"}),nd=Re({prop:"gridRow"}),id=Re({prop:"gridAutoFlow"}),sd=Re({prop:"gridAutoColumns"}),od=Re({prop:"gridAutoRows"}),ad=Re({prop:"gridTemplateColumns"}),cd=Re({prop:"gridTemplateRows"}),ud=Re({prop:"gridTemplateAreas"}),ld=Re({prop:"gridArea"});Li($i,Mi,Bi,rd,nd,id,sd,od,ad,cd,ud,ld);function en(e,t){return t==="grey"?t:e}const fd=Re({prop:"color",themeKey:"palette",transform:en}),hd=Re({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:en}),dd=Re({prop:"backgroundColor",themeKey:"palette",transform:en});Li(fd,hd,dd);function Mt(e){return e<=1&&e!==0?`${e*100}%`:e}const pd=Re({prop:"width",transform:Mt}),Vs=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var n,i,s;return{maxWidth:((n=e.theme)==null||(i=n.breakpoints)==null||(s=i.values)==null?void 0:s[r])||qs[r]||Mt(r)}};return gr(e,e.maxWidth,t)}return null};Vs.filterProps=["maxWidth"];const gd=Re({prop:"minWidth",transform:Mt}),yd=Re({prop:"height",transform:Mt}),md=Re({prop:"maxHeight",transform:Mt}),bd=Re({prop:"minHeight",transform:Mt});Re({prop:"size",cssProperty:"width",transform:Mt});Re({prop:"size",cssProperty:"height",transform:Mt});const wd=Re({prop:"boxSizing"});Li(pd,Vs,gd,yd,md,bd,wd);const _d={border:{themeKey:"borders",transform:ir},borderTop:{themeKey:"borders",transform:ir},borderRight:{themeKey:"borders",transform:ir},borderBottom:{themeKey:"borders",transform:ir},borderLeft:{themeKey:"borders",transform:ir},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Ui},color:{themeKey:"palette",transform:en},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:en},backgroundColor:{themeKey:"palette",transform:en},p:{style:Ve},pt:{style:Ve},pr:{style:Ve},pb:{style:Ve},pl:{style:Ve},px:{style:Ve},py:{style:Ve},padding:{style:Ve},paddingTop:{style:Ve},paddingRight:{style:Ve},paddingBottom:{style:Ve},paddingLeft:{style:Ve},paddingX:{style:Ve},paddingY:{style:Ve},paddingInline:{style:Ve},paddingInlineStart:{style:Ve},paddingInlineEnd:{style:Ve},paddingBlock:{style:Ve},paddingBlockStart:{style:Ve},paddingBlockEnd:{style:Ve},m:{style:We},mt:{style:We},mr:{style:We},mb:{style:We},ml:{style:We},mx:{style:We},my:{style:We},margin:{style:We},marginTop:{style:We},marginRight:{style:We},marginBottom:{style:We},marginLeft:{style:We},marginX:{style:We},marginY:{style:We},marginInline:{style:We},marginInlineStart:{style:We},marginInlineEnd:{style:We},marginBlock:{style:We},marginBlockStart:{style:We},marginBlockEnd:{style:We},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:$i},rowGap:{style:Bi},columnGap:{style:Mi},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Mt},maxWidth:{style:Vs},minWidth:{transform:Mt},height:{transform:Mt},maxHeight:{transform:Mt},minHeight:{transform:Mt},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},Gs=_d;function Ed(...e){const t=e.reduce((n,i)=>n.concat(Object.keys(i)),[]),r=new Set(t);return e.every(n=>r.size===Object.keys(n).length)}function vd(e,t){return typeof e=="function"?e(t):e}function xd(){function e(r,n,i,s){const c={[r]:n,theme:i},o=s[r];if(!o)return{[r]:n};const{cssProperty:h=r,themeKey:p,transform:m,style:E}=o;if(n==null)return null;if(p==="typography"&&n==="inherit")return{[r]:n};const A=Fi(i,p)||{};return E?E(c):gr(c,n,S=>{let R=di(A,m,S);return S===R&&typeof S=="string"&&(R=di(A,m,`${r}${S==="default"?"":Pc(S)}`,S)),h===!1?R:{[h]:R}})}function t(r){var n;const{sx:i,theme:s={}}=r||{};if(!i)return null;const c=(n=s.unstable_sxConfig)!=null?n:Gs;function o(h){let p=h;if(typeof h=="function")p=h(s);else if(typeof h!="object")return h;if(!p)return null;const m=$h(s.breakpoints),E=Object.keys(m);let A=m;return Object.keys(p).forEach(I=>{const S=vd(p[I],s);if(S!=null)if(typeof S=="object")if(c[I])A=Tn(A,e(I,S,s,c));else{const R=gr({theme:s},S,j=>({[I]:j}));Ed(R,S)?A[I]=t({sx:S,theme:s}):A=Tn(A,R)}else A=Tn(A,e(I,S,s,c))}),Mh(E,A)}return Array.isArray(i)?i.map(o):o(i)}return t}const Xc=xd();Xc.filterProps=["sx"];const Zc=Xc,Sd=["breakpoints","palette","spacing","shape"];function Qc(e={},...t){const{breakpoints:r={},palette:n={},spacing:i,shape:s={}}=e,c=on(e,Sd),o=Fh(r),h=Hh(i);let p=pr({breakpoints:o,direction:"ltr",components:{},palette:Fe({mode:"light"},n),spacing:h,shape:Fe({},Uh,s)},c);return p=t.reduce((m,E)=>pr(m,E),p),p.unstable_sxConfig=Fe({},Gs,c==null?void 0:c.unstable_sxConfig),p.unstable_sx=function(E){return Zc({sx:E,theme:this})},p}function Dd(e){return Object.keys(e).length===0}function Id(e=null){const t=Te.useContext(Gc);return!t||Dd(t)?e:t}const Od=Qc();function eu(e=Od){return Id(e)}function Ad({styles:e,themeId:t,defaultTheme:r={}}){const n=eu(r),i=typeof e=="function"?e(t&&n[t]||n):e;return $t.jsx(Rh,{styles:i})}function Cd(e){const{theme:t,name:r,props:n}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?n:Nc(t.components[r].defaultProps,n)}function Td({props:e,name:t,defaultTheme:r,themeId:n}){let i=eu(r);return n&&(i=i[n]||i),Cd({theme:i,name:t,props:e})}function tu(e,t=0,r=1){return Math.min(Math.max(t,e),r)}function Rd(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(n=>n+n)),r?`rgb${r.length===4?"a":""}(${r.map((n,i)=>i<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function sn(e){if(e.type)return e;if(e.charAt(0)==="#")return sn(Rd(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error(rn(9,e));let n=e.substring(t+1,e.length-1),i;if(r==="color"){if(n=n.split(" "),i=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(rn(10,i))}else n=n.split(",");return n=n.map(s=>parseFloat(s)),{type:r,values:n,colorSpace:i}}function Ys(e){const{type:t,colorSpace:r}=e;let{values:n}=e;return t.indexOf("rgb")!==-1?n=n.map((i,s)=>s<3?parseInt(i,10):i):t.indexOf("hsl")!==-1&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),t.indexOf("color")!==-1?n=`${r} ${n.join(" ")}`:n=`${n.join(", ")}`,`${t}(${n})`}function Pd(e){e=sn(e);const{values:t}=e,r=t[0],n=t[1]/100,i=t[2]/100,s=n*Math.min(i,1-i),c=(p,m=(p+r/30)%12)=>i-s*Math.max(Math.min(m-3,9-m,1),-1);let o="rgb";const h=[Math.round(c(0)*255),Math.round(c(8)*255),Math.round(c(4)*255)];return e.type==="hsla"&&(o+="a",h.push(t[3])),Ys({type:o,values:h})}function ko(e){e=sn(e);let t=e.type==="hsl"||e.type==="hsla"?sn(Pd(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Nd(e,t){const r=ko(e),n=ko(t);return(Math.max(r,n)+.05)/(Math.min(r,n)+.05)}function Fd(e,t){if(e=sn(e),t=tu(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]*=1-t;return Ys(e)}function Ld(e,t){if(e=sn(e),t=tu(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return Ys(e)}function Ud(e,t){return Fe({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const $d=["mode","contrastThreshold","tonalOffset"],zo={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Nn.white,default:Nn.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},es={text:{primary:Nn.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Nn.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Ko(e,t,r,n){const i=n.light||n,s=n.dark||n*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=Ld(e.main,i):t==="dark"&&(e.dark=Fd(e.main,s)))}function Md(e="light"){return e==="dark"?{main:qr[200],light:qr[50],dark:qr[400]}:{main:qr[700],light:qr[400],dark:qr[800]}}function Bd(e="light"){return e==="dark"?{main:Kr[200],light:Kr[50],dark:Kr[400]}:{main:Kr[500],light:Kr[300],dark:Kr[700]}}function jd(e="light"){return e==="dark"?{main:zr[500],light:zr[300],dark:zr[700]}:{main:zr[700],light:zr[400],dark:zr[800]}}function kd(e="light"){return e==="dark"?{main:Hr[400],light:Hr[300],dark:Hr[700]}:{main:Hr[700],light:Hr[500],dark:Hr[900]}}function zd(e="light"){return e==="dark"?{main:Wr[400],light:Wr[300],dark:Wr[700]}:{main:Wr[800],light:Wr[500],dark:Wr[900]}}function Kd(e="light"){return e==="dark"?{main:pn[400],light:pn[300],dark:pn[700]}:{main:"#ed6c02",light:pn[500],dark:pn[900]}}function qd(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:n=.2}=e,i=on(e,$d),s=e.primary||Md(t),c=e.secondary||Bd(t),o=e.error||jd(t),h=e.info||kd(t),p=e.success||zd(t),m=e.warning||Kd(t);function E(R){return Nd(R,es.text.primary)>=r?es.text.primary:zo.text.primary}const A=({color:R,name:j,mainShade:H=500,lightShade:T=300,darkShade:F=700})=>{if(R=Fe({},R),!R.main&&R[H]&&(R.main=R[H]),!R.hasOwnProperty("main"))throw new Error(rn(11,j?` (${j})`:"",H));if(typeof R.main!="string")throw new Error(rn(12,j?` (${j})`:"",JSON.stringify(R.main)));return Ko(R,"light",T,n),Ko(R,"dark",F,n),R.contrastText||(R.contrastText=E(R.main)),R},I={dark:es,light:zo};return pr(Fe({common:Fe({},Nn),mode:t,primary:A({color:s,name:"primary"}),secondary:A({color:c,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:A({color:o,name:"error"}),warning:A({color:m,name:"warning"}),info:A({color:h,name:"info"}),success:A({color:p,name:"success"}),grey:Nf,contrastThreshold:r,getContrastText:E,augmentColor:A,tonalOffset:n},I[t]),i)}const Hd=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function Wd(e){return Math.round(e*1e5)/1e5}const qo={textTransform:"uppercase"},Ho='"Roboto", "Helvetica", "Arial", sans-serif';function Vd(e,t){const r=typeof t=="function"?t(e):t,{fontFamily:n=Ho,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:c=400,fontWeightMedium:o=500,fontWeightBold:h=700,htmlFontSize:p=16,allVariants:m,pxToRem:E}=r,A=on(r,Hd),I=i/14,S=E||(H=>`${H/p*I}rem`),R=(H,T,F,v,D)=>Fe({fontFamily:n,fontWeight:H,fontSize:S(T),lineHeight:F},n===Ho?{letterSpacing:`${Wd(v/T)}em`}:{},D,m),j={h1:R(s,96,1.167,-1.5),h2:R(s,60,1.2,-.5),h3:R(c,48,1.167,0),h4:R(c,34,1.235,.25),h5:R(c,24,1.334,0),h6:R(o,20,1.6,.15),subtitle1:R(c,16,1.75,.15),subtitle2:R(o,14,1.57,.1),body1:R(c,16,1.5,.15),body2:R(c,14,1.43,.15),button:R(o,14,1.75,.4,qo),caption:R(c,12,1.66,.4),overline:R(c,12,2.66,1,qo),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return pr(Fe({htmlFontSize:p,pxToRem:S,fontFamily:n,fontSize:i,fontWeightLight:s,fontWeightRegular:c,fontWeightMedium:o,fontWeightBold:h},j),A,{clone:!1})}const Gd=.2,Yd=.14,Jd=.12;function Be(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${Gd})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${Yd})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${Jd})`].join(",")}const Xd=["none",Be(0,2,1,-1,0,1,1,0,0,1,3,0),Be(0,3,1,-2,0,2,2,0,0,1,5,0),Be(0,3,3,-2,0,3,4,0,0,1,8,0),Be(0,2,4,-1,0,4,5,0,0,1,10,0),Be(0,3,5,-1,0,5,8,0,0,1,14,0),Be(0,3,5,-1,0,6,10,0,0,1,18,0),Be(0,4,5,-2,0,7,10,1,0,2,16,1),Be(0,5,5,-3,0,8,10,1,0,3,14,2),Be(0,5,6,-3,0,9,12,1,0,3,16,2),Be(0,6,6,-3,0,10,14,1,0,4,18,3),Be(0,6,7,-4,0,11,15,1,0,4,20,3),Be(0,7,8,-4,0,12,17,2,0,5,22,4),Be(0,7,8,-4,0,13,19,2,0,5,24,4),Be(0,7,9,-4,0,14,21,2,0,5,26,4),Be(0,8,9,-5,0,15,22,2,0,6,28,5),Be(0,8,10,-5,0,16,24,2,0,6,30,5),Be(0,8,11,-5,0,17,26,2,0,6,32,5),Be(0,9,11,-5,0,18,28,2,0,7,34,6),Be(0,9,12,-6,0,19,29,2,0,7,36,6),Be(0,10,13,-6,0,20,31,3,0,8,38,7),Be(0,10,13,-6,0,21,33,3,0,8,40,7),Be(0,10,14,-6,0,22,35,3,0,8,42,7),Be(0,11,14,-7,0,23,36,3,0,9,44,8),Be(0,11,15,-7,0,24,38,3,0,9,46,8)],Zd=Xd,Qd=["duration","easing","delay"],e0={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},t0={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Wo(e){return`${Math.round(e)}ms`}function r0(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function n0(e){const t=Fe({},e0,e.easing),r=Fe({},t0,e.duration);return Fe({getAutoHeightDuration:r0,create:(i=["all"],s={})=>{const{duration:c=r.standard,easing:o=t.easeInOut,delay:h=0}=s;return on(s,Qd),(Array.isArray(i)?i:[i]).map(p=>`${p} ${typeof c=="string"?c:Wo(c)} ${o} ${typeof h=="string"?h:Wo(h)}`).join(",")}},e,{easing:t,duration:r})}const i0={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},s0=i0,o0=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function a0(e={},...t){const{mixins:r={},palette:n={},transitions:i={},typography:s={}}=e,c=on(e,o0);if(e.vars)throw new Error(rn(18));const o=qd(n),h=Qc(e);let p=pr(h,{mixins:Ud(h.breakpoints,r),palette:o,shadows:Zd.slice(),typography:Vd(o,s),transitions:n0(i),zIndex:Fe({},s0)});return p=pr(p,c),p=t.reduce((m,E)=>pr(m,E),p),p.unstable_sxConfig=Fe({},Gs,c==null?void 0:c.unstable_sxConfig),p.unstable_sx=function(E){return Zc({sx:E,theme:this})},p}const c0=a0(),ru=c0;function u0({props:e,name:t}){return Td({props:e,name:t,defaultTheme:ru,themeId:Fc})}function l0(e){return $t.jsx(Ad,Fe({},e,{defaultTheme:ru,themeId:Fc}))}const f0=(e,t)=>Fe({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),h0=e=>Fe({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),d0=(e,t=!1)=>{var r,n;const i={};t&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([o,h])=>{var p;i[e.getColorSchemeSelector(o).replace(/\s*&/,"")]={colorScheme:(p=h.palette)==null?void 0:p.mode}});let s=Fe({html:f0(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:Fe({margin:0},h0(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},i);const c=(r=e.components)==null||(n=r.MuiCssBaseline)==null?void 0:n.styleOverrides;return c&&(s=[s,c]),s};function p0(e){const t=u0({props:e,name:"MuiCssBaseline"}),{children:r,enableColorScheme:n=!1}=t;return $t.jsxs(Te.Fragment,{children:[$t.jsx(l0,{styles:i=>d0(i,n)}),r]})}var nu,Vo=bf;nu=Vo.createRoot,Vo.hydrateRoot;var Js={exports:{}},tn=typeof Reflect=="object"?Reflect:null,Go=tn&&typeof tn.apply=="function"?tn.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},ui;tn&&typeof tn.ownKeys=="function"?ui=tn.ownKeys:Object.getOwnPropertySymbols?ui=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:ui=function(t){return Object.getOwnPropertyNames(t)};function g0(e){console&&console.warn&&console.warn(e)}var iu=Number.isNaN||function(t){return t!==t};function Ne(){Ne.init.call(this)}Js.exports=Ne;Js.exports.once=w0;Ne.EventEmitter=Ne;Ne.prototype._events=void 0;Ne.prototype._eventsCount=0;Ne.prototype._maxListeners=void 0;var Yo=10;function ji(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Ne,"defaultMaxListeners",{enumerable:!0,get:function(){return Yo},set:function(e){if(typeof e!="number"||e<0||iu(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Yo=e}});Ne.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ne.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||iu(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function su(e){return e._maxListeners===void 0?Ne.defaultMaxListeners:e._maxListeners}Ne.prototype.getMaxListeners=function(){return su(this)};Ne.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=t==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var c;if(r.length>0&&(c=r[0]),c instanceof Error)throw c;var o=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw o.context=c,o}var h=s[t];if(h===void 0)return!1;if(typeof h=="function")Go(h,this,r);else for(var p=h.length,m=lu(h,p),n=0;n<p;++n)Go(m[n],this,r);return!0};function ou(e,t,r,n){var i,s,c;if(ji(r),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),c=s[t]),c===void 0)c=s[t]=r,++e._eventsCount;else if(typeof c=="function"?c=s[t]=n?[r,c]:[c,r]:n?c.unshift(r):c.push(r),i=su(e),i>0&&c.length>i&&!c.warned){c.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=e,o.type=t,o.count=c.length,g0(o)}return e}Ne.prototype.addListener=function(t,r){return ou(this,t,r,!1)};Ne.prototype.on=Ne.prototype.addListener;Ne.prototype.prependListener=function(t,r){return ou(this,t,r,!0)};function y0(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function au(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=y0.bind(n);return i.listener=r,n.wrapFn=i,i}Ne.prototype.once=function(t,r){return ji(r),this.on(t,au(this,t,r)),this};Ne.prototype.prependOnceListener=function(t,r){return ji(r),this.prependListener(t,au(this,t,r)),this};Ne.prototype.removeListener=function(t,r){var n,i,s,c,o;if(ji(r),i=this._events,i===void 0)return this;if(n=i[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(s=-1,c=n.length-1;c>=0;c--)if(n[c]===r||n[c].listener===r){o=n[c].listener,s=c;break}if(s<0)return this;s===0?n.shift():m0(n,s),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,o||r)}return this};Ne.prototype.off=Ne.prototype.removeListener;Ne.prototype.removeAllListeners=function(t){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var s=Object.keys(n),c;for(i=0;i<s.length;++i)c=s[i],c!=="removeListener"&&this.removeAllListeners(c);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(t,r[i]);return this};function cu(e,t,r){var n=e._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?b0(i):lu(i,i.length)}Ne.prototype.listeners=function(t){return cu(this,t,!0)};Ne.prototype.rawListeners=function(t){return cu(this,t,!1)};Ne.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):uu.call(e,t)};Ne.prototype.listenerCount=uu;function uu(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Ne.prototype.eventNames=function(){return this._eventsCount>0?ui(this._events):[]};function lu(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m0(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function b0(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function w0(e,t){return new Promise(function(r,n){function i(c){e.removeListener(t,s),n(c)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",i),r([].slice.call(arguments))}fu(e,t,s,{once:!0}),t!=="error"&&_0(e,i,{once:!0})})}function _0(e,t,r){typeof e.on=="function"&&fu(e,"error",t,r)}function fu(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(s){n.once&&e.removeEventListener(t,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Xt=Js.exports;const hu=Oc(Xt);var ki={},du={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(e){var t,r,n,i,s,c,o,h,p,m,E,A,I,S,R,j,H,T,F,v,D,y,a;(function(g){var z=typeof At=="object"?At:typeof self=="object"?self:typeof this=="object"?this:{};g(w(z,w(e.exports)));function w(C,U){return C!==z&&(typeof Object.create=="function"?Object.defineProperty(C,"__esModule",{value:!0}):C.__esModule=!0),function(W,x){return C[W]=U?U(W,x):x}}})(function(g){var z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,C){w.__proto__=C}||function(w,C){for(var U in C)C.hasOwnProperty(U)&&(w[U]=C[U])};t=function(w,C){z(w,C);function U(){this.constructor=w}w.prototype=C===null?Object.create(C):(U.prototype=C.prototype,new U)},r=Object.assign||function(w){for(var C,U=1,W=arguments.length;U<W;U++){C=arguments[U];for(var x in C)Object.prototype.hasOwnProperty.call(C,x)&&(w[x]=C[x])}return w},n=function(w,C){var U={};for(var W in w)Object.prototype.hasOwnProperty.call(w,W)&&C.indexOf(W)<0&&(U[W]=w[W]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,W=Object.getOwnPropertySymbols(w);x<W.length;x++)C.indexOf(W[x])<0&&Object.prototype.propertyIsEnumerable.call(w,W[x])&&(U[W[x]]=w[W[x]]);return U},i=function(w,C,U,W){var x=arguments.length,O=x<3?C:W===null?W=Object.getOwnPropertyDescriptor(C,U):W,Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(w,C,U,W);else for(var J=w.length-1;J>=0;J--)(Y=w[J])&&(O=(x<3?Y(O):x>3?Y(C,U,O):Y(C,U))||O);return x>3&&O&&Object.defineProperty(C,U,O),O},s=function(w,C){return function(U,W){C(U,W,w)}},c=function(w,C){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(w,C)},o=function(w,C,U,W){function x(O){return O instanceof U?O:new U(function(Y){Y(O)})}return new(U||(U=Promise))(function(O,Y){function J(V){try{q(W.next(V))}catch(X){Y(X)}}function G(V){try{q(W.throw(V))}catch(X){Y(X)}}function q(V){V.done?O(V.value):x(V.value).then(J,G)}q((W=W.apply(w,C||[])).next())})},h=function(w,C){var U={label:0,sent:function(){if(O[0]&1)throw O[1];return O[1]},trys:[],ops:[]},W,x,O,Y;return Y={next:J(0),throw:J(1),return:J(2)},typeof Symbol=="function"&&(Y[Symbol.iterator]=function(){return this}),Y;function J(q){return function(V){return G([q,V])}}function G(q){if(W)throw new TypeError("Generator is already executing.");for(;U;)try{if(W=1,x&&(O=q[0]&2?x.return:q[0]?x.throw||((O=x.return)&&O.call(x),0):x.next)&&!(O=O.call(x,q[1])).done)return O;switch(x=0,O&&(q=[q[0]&2,O.value]),q[0]){case 0:case 1:O=q;break;case 4:return U.label++,{value:q[1],done:!1};case 5:U.label++,x=q[1],q=[0];continue;case 7:q=U.ops.pop(),U.trys.pop();continue;default:if(O=U.trys,!(O=O.length>0&&O[O.length-1])&&(q[0]===6||q[0]===2)){U=0;continue}if(q[0]===3&&(!O||q[1]>O[0]&&q[1]<O[3])){U.label=q[1];break}if(q[0]===6&&U.label<O[1]){U.label=O[1],O=q;break}if(O&&U.label<O[2]){U.label=O[2],U.ops.push(q);break}O[2]&&U.ops.pop(),U.trys.pop();continue}q=C.call(w,U)}catch(V){q=[6,V],x=0}finally{W=O=0}if(q[0]&5)throw q[1];return{value:q[0]?q[1]:void 0,done:!0}}},a=function(w,C,U,W){W===void 0&&(W=U),w[W]=C[U]},p=function(w,C){for(var U in w)U!=="default"&&!C.hasOwnProperty(U)&&(C[U]=w[U])},m=function(w){var C=typeof Symbol=="function"&&Symbol.iterator,U=C&&w[C],W=0;if(U)return U.call(w);if(w&&typeof w.length=="number")return{next:function(){return w&&W>=w.length&&(w=void 0),{value:w&&w[W++],done:!w}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")},E=function(w,C){var U=typeof Symbol=="function"&&w[Symbol.iterator];if(!U)return w;var W=U.call(w),x,O=[],Y;try{for(;(C===void 0||C-- >0)&&!(x=W.next()).done;)O.push(x.value)}catch(J){Y={error:J}}finally{try{x&&!x.done&&(U=W.return)&&U.call(W)}finally{if(Y)throw Y.error}}return O},A=function(){for(var w=[],C=0;C<arguments.length;C++)w=w.concat(E(arguments[C]));return w},I=function(){for(var w=0,C=0,U=arguments.length;C<U;C++)w+=arguments[C].length;for(var W=Array(w),x=0,C=0;C<U;C++)for(var O=arguments[C],Y=0,J=O.length;Y<J;Y++,x++)W[x]=O[Y];return W},S=function(w){return this instanceof S?(this.v=w,this):new S(w)},R=function(w,C,U){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var W=U.apply(w,C||[]),x,O=[];return x={},Y("next"),Y("throw"),Y("return"),x[Symbol.asyncIterator]=function(){return this},x;function Y(te){W[te]&&(x[te]=function(Q){return new Promise(function(ae,ie){O.push([te,Q,ae,ie])>1||J(te,Q)})})}function J(te,Q){try{G(W[te](Q))}catch(ae){X(O[0][3],ae)}}function G(te){te.value instanceof S?Promise.resolve(te.value.v).then(q,V):X(O[0][2],te)}function q(te){J("next",te)}function V(te){J("throw",te)}function X(te,Q){te(Q),O.shift(),O.length&&J(O[0][0],O[0][1])}},j=function(w){var C,U;return C={},W("next"),W("throw",function(x){throw x}),W("return"),C[Symbol.iterator]=function(){return this},C;function W(x,O){C[x]=w[x]?function(Y){return(U=!U)?{value:S(w[x](Y)),done:x==="return"}:O?O(Y):Y}:O}},H=function(w){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var C=w[Symbol.asyncIterator],U;return C?C.call(w):(w=typeof m=="function"?m(w):w[Symbol.iterator](),U={},W("next"),W("throw"),W("return"),U[Symbol.asyncIterator]=function(){return this},U);function W(O){U[O]=w[O]&&function(Y){return new Promise(function(J,G){Y=w[O](Y),x(J,G,Y.done,Y.value)})}}function x(O,Y,J,G){Promise.resolve(G).then(function(q){O({value:q,done:J})},Y)}},T=function(w,C){return Object.defineProperty?Object.defineProperty(w,"raw",{value:C}):w.raw=C,w},F=function(w){if(w&&w.__esModule)return w;var C={};if(w!=null)for(var U in w)Object.hasOwnProperty.call(w,U)&&(C[U]=w[U]);return C.default=w,C},v=function(w){return w&&w.__esModule?w:{default:w}},D=function(w,C){if(!C.has(w))throw new TypeError("attempted to get private field on non-instance");return C.get(w)},y=function(w,C,U){if(!C.has(w))throw new TypeError("attempted to set private field on non-instance");return C.set(w,U),U},g("__extends",t),g("__assign",r),g("__rest",n),g("__decorate",i),g("__param",s),g("__metadata",c),g("__awaiter",o),g("__generator",h),g("__exportStar",p),g("__createBinding",a),g("__values",m),g("__read",E),g("__spread",A),g("__spreadArrays",I),g("__await",S),g("__asyncGenerator",R),g("__asyncDelegator",j),g("__asyncValues",H),g("__makeTemplateObject",T),g("__importStar",F),g("__importDefault",v),g("__classPrivateFieldGet",D),g("__classPrivateFieldSet",y)})})(du);var Gt=du.exports,kn={};Object.defineProperty(kn,"__esModule",{value:!0});function E0(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return JSON.parse(e)}catch{return e}}kn.safeJsonParse=E0;function v0(e){return typeof e=="string"?e:JSON.stringify(e,(t,r)=>typeof r>"u"?null:r)}kn.safeJsonStringify=v0;var yn={exports:{}},Jo;function x0(){return Jo||(Jo=1,function(){let e;function t(){}e=t,e.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},e.prototype.setItem=function(r,n){this[r]=String(n)},e.prototype.removeItem=function(r){delete this[r]},e.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},e.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},e.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof At<"u"&&At.localStorage?yn.exports=At.localStorage:typeof window<"u"&&window.localStorage?yn.exports=window.localStorage:yn.exports=new t}()),yn.exports}var ts={},mn={},Xo;function S0(){if(Xo)return mn;Xo=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.IKeyValueStorage=void 0;class e{}return mn.IKeyValueStorage=e,mn}var bn={},Zo;function D0(){if(Zo)return bn;Zo=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.parseEntry=void 0;const e=kn;function t(r){var n;return[r[0],e.safeJsonParse((n=r[1])!==null&&n!==void 0?n:"")]}return bn.parseEntry=t,bn}var Qo;function I0(){return Qo||(Qo=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Gt;t.__exportStar(S0(),e),t.__exportStar(D0(),e)}(ts)),ts}Object.defineProperty(ki,"__esModule",{value:!0});ki.KeyValueStorage=void 0;const Xr=Gt,ea=kn,O0=Xr.__importDefault(x0()),A0=I0();class pu{constructor(){this.localStorage=O0.default}getKeys(){return Xr.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Xr.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(A0.parseEntry)})}getItem(t){return Xr.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(t);if(r!==null)return ea.safeJsonParse(r)})}setItem(t,r){return Xr.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(t,ea.safeJsonStringify(r))})}removeItem(t){return Xr.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(t)})}}ki.KeyValueStorage=pu;var C0=ki.default=pu,zn={},wn={},ue={},rs={},_n={},ta;function T0(){if(ta)return _n;ta=1,Object.defineProperty(_n,"__esModule",{value:!0}),_n.delay=void 0;function e(t){return new Promise(r=>{setTimeout(()=>{r(!0)},t)})}return _n.delay=e,_n}var Tr={},ns={},Rr={},ra;function R0(){return ra||(ra=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.ONE_THOUSAND=Rr.ONE_HUNDRED=void 0,Rr.ONE_HUNDRED=100,Rr.ONE_THOUSAND=1e3),Rr}var is={},na;function P0(){return na||(na=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}(is)),is}var ia;function gu(){return ia||(ia=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Gt;t.__exportStar(R0(),e),t.__exportStar(P0(),e)}(ns)),ns}var sa;function N0(){if(sa)return Tr;sa=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.fromMiliseconds=Tr.toMiliseconds=void 0;const e=gu();function t(n){return n*e.ONE_THOUSAND}Tr.toMiliseconds=t;function r(n){return Math.floor(n/e.ONE_THOUSAND)}return Tr.fromMiliseconds=r,Tr}var oa;function F0(){return oa||(oa=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Gt;t.__exportStar(T0(),e),t.__exportStar(N0(),e)}(rs)),rs}var Vr={},aa;function L0(){if(aa)return Vr;aa=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Vr.Watch=e,Vr.default=e,Vr}var ss={},En={},ca;function U0(){if(ca)return En;ca=1,Object.defineProperty(En,"__esModule",{value:!0}),En.IWatch=void 0;class e{}return En.IWatch=e,En}var ua;function $0(){return ua||(ua=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Gt.__exportStar(U0(),e)}(ss)),ss}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Gt;t.__exportStar(F0(),e),t.__exportStar(L0(),e),t.__exportStar($0(),e),t.__exportStar(gu(),e)})(ue);var os={},vn={};let Mr=class{};const M0=Object.freeze(Object.defineProperty({__proto__:null,IEvents:Mr},Symbol.toStringTag,{value:"Module"})),B0=Ac(M0);var la;function j0(){if(la)return vn;la=1,Object.defineProperty(vn,"__esModule",{value:!0}),vn.IHeartBeat=void 0;const e=B0;class t extends e.IEvents{constructor(n){super()}}return vn.IHeartBeat=t,vn}var fa;function yu(){return fa||(fa=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Gt.__exportStar(j0(),e)}(os)),os}var as={},Pr={},ha;function k0(){if(ha)return Pr;ha=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.HEARTBEAT_EVENTS=Pr.HEARTBEAT_INTERVAL=void 0;const e=ue;return Pr.HEARTBEAT_INTERVAL=e.FIVE_SECONDS,Pr.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},Pr}var da;function mu(){return da||(da=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Gt.__exportStar(k0(),e)}(as)),as}var pa;function z0(){if(pa)return wn;pa=1,Object.defineProperty(wn,"__esModule",{value:!0}),wn.HeartBeat=void 0;const e=Gt,t=Xt,r=ue,n=yu(),i=mu();class s extends n.IHeartBeat{constructor(o){super(o),this.events=new t.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=(o==null?void 0:o.interval)||i.HEARTBEAT_INTERVAL}static init(o){return e.__awaiter(this,void 0,void 0,function*(){const h=new s(o);return yield h.init(),h})}init(){return e.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(o,h){this.events.on(o,h)}once(o,h){this.events.once(o,h)}off(o,h){this.events.off(o,h)}removeListener(o,h){this.events.removeListener(o,h)}initialize(){return e.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return wn.HeartBeat=s,wn}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Gt;t.__exportStar(z0(),e),t.__exportStar(yu(),e),t.__exportStar(mu(),e)})(zn);var Oe={},cs,ga;function K0(){if(ga)return cs;ga=1;function e(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}cs=t;function t(r,n,i){var s=i&&i.stringify||e,c=1;if(typeof r=="object"&&r!==null){var o=n.length+c;if(o===1)return r;var h=new Array(o);h[0]=s(r);for(var p=1;p<o;p++)h[p]=s(n[p]);return h.join(" ")}if(typeof r!="string")return r;var m=n.length;if(m===0)return r;for(var E="",A=1-c,I=-1,S=r&&r.length||0,R=0;R<S;){if(r.charCodeAt(R)===37&&R+1<S){switch(I=I>-1?I:0,r.charCodeAt(R+1)){case 100:case 102:if(A>=m||n[A]==null)break;I<R&&(E+=r.slice(I,R)),E+=Number(n[A]),I=R+2,R++;break;case 105:if(A>=m||n[A]==null)break;I<R&&(E+=r.slice(I,R)),E+=Math.floor(Number(n[A])),I=R+2,R++;break;case 79:case 111:case 106:if(A>=m||n[A]===void 0)break;I<R&&(E+=r.slice(I,R));var j=typeof n[A];if(j==="string"){E+="'"+n[A]+"'",I=R+2,R++;break}if(j==="function"){E+=n[A].name||"<anonymous>",I=R+2,R++;break}E+=s(n[A]),I=R+2,R++;break;case 115:if(A>=m)break;I<R&&(E+=r.slice(I,R)),E+=String(n[A]),I=R+2,R++;break;case 37:I<R&&(E+=r.slice(I,R)),E+="%",I=R+2,R++,A--;break}++A}++R}return I===-1?r:(I<S&&(E+=r.slice(I)),E)}return cs}var us,ya;function q0(){if(ya)return us;ya=1;const e=K0();us=i;const t=D().console||{},r={mapHttpRequest:S,mapHttpResponse:S,wrapRequestSerializer:R,wrapResponseSerializer:R,wrapErrorSerializer:R,req:S,res:S,err:A};function n(y,a){return Array.isArray(y)?y.filter(function(z){return z!=="!stdSerializers.err"}):y===!0?Object.keys(a):!1}function i(y){y=y||{},y.browser=y.browser||{};const a=y.browser.transmit;if(a&&typeof a.send!="function")throw Error("pino: transmit option must have a send function");const g=y.browser.write||t;y.browser.write&&(y.browser.asObject=!0);const z=y.serializers||{},w=n(y.browser.serialize,z);let C=y.browser.serialize;Array.isArray(y.browser.serialize)&&y.browser.serialize.indexOf("!stdSerializers.err")>-1&&(C=!1);const U=["error","fatal","warn","info","debug","trace"];typeof g=="function"&&(g.error=g.fatal=g.warn=g.info=g.debug=g.trace=g),y.enabled===!1&&(y.level="silent");const W=y.level||"info",x=Object.create(g);x.log||(x.log=j),Object.defineProperty(x,"levelVal",{get:Y}),Object.defineProperty(x,"level",{get:J,set:G});const O={transmit:a,serialize:w,asObject:y.browser.asObject,levels:U,timestamp:I(y)};x.levels=i.levels,x.level=W,x.setMaxListeners=x.getMaxListeners=x.emit=x.addListener=x.on=x.prependListener=x.once=x.prependOnceListener=x.removeListener=x.removeAllListeners=x.listeners=x.listenerCount=x.eventNames=x.write=x.flush=j,x.serializers=z,x._serialize=w,x._stdErrSerialize=C,x.child=q,a&&(x._logEvent=E());function Y(){return this.level==="silent"?1/0:this.levels.values[this.level]}function J(){return this._level}function G(V){if(V!=="silent"&&!this.levels.values[V])throw Error("unknown level "+V);this._level=V,s(O,x,"error","log"),s(O,x,"fatal","error"),s(O,x,"warn","error"),s(O,x,"info","log"),s(O,x,"debug","log"),s(O,x,"trace","log")}function q(V,X){if(!V)throw new Error("missing bindings for child Pino");X=X||{},w&&V.serializers&&(X.serializers=V.serializers);const te=X.serializers;if(w&&te){var Q=Object.assign({},z,te),ae=y.browser.serialize===!0?Object.keys(Q):w;delete V.serializers,h([V],ae,Q,this._stdErrSerialize)}function ie(le){this._childLevel=(le._childLevel|0)+1,this.error=p(le,V,"error"),this.fatal=p(le,V,"fatal"),this.warn=p(le,V,"warn"),this.info=p(le,V,"info"),this.debug=p(le,V,"debug"),this.trace=p(le,V,"trace"),Q&&(this.serializers=Q,this._serialize=ae),a&&(this._logEvent=E([].concat(le._logEvent.bindings,V)))}return ie.prototype=this,new ie(this)}return x}i.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},i.stdSerializers=r,i.stdTimeFunctions=Object.assign({},{nullTime:H,epochTime:T,unixTime:F,isoTime:v});function s(y,a,g,z){const w=Object.getPrototypeOf(a);a[g]=a.levelVal>a.levels.values[g]?j:w[g]?w[g]:t[g]||t[z]||j,c(y,a,g)}function c(y,a,g){!y.transmit&&a[g]===j||(a[g]=function(z){return function(){const C=y.timestamp(),U=new Array(arguments.length),W=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var x=0;x<U.length;x++)U[x]=arguments[x];if(y.serialize&&!y.asObject&&h(U,this._serialize,this.serializers,this._stdErrSerialize),y.asObject?z.call(W,o(this,g,U,C)):z.apply(W,U),y.transmit){const O=y.transmit.level||a.level,Y=i.levels.values[O],J=i.levels.values[g];if(J<Y)return;m(this,{ts:C,methodLevel:g,methodValue:J,transmitLevel:O,transmitValue:i.levels.values[y.transmit.level||a.level],send:y.transmit.send,val:a.levelVal},U)}}}(a[g]))}function o(y,a,g,z){y._serialize&&h(g,y._serialize,y.serializers,y._stdErrSerialize);const w=g.slice();let C=w[0];const U={};z&&(U.time=z),U.level=i.levels.values[a];let W=(y._childLevel|0)+1;if(W<1&&(W=1),C!==null&&typeof C=="object"){for(;W--&&typeof w[0]=="object";)Object.assign(U,w.shift());C=w.length?e(w.shift(),w):void 0}else typeof C=="string"&&(C=e(w.shift(),w));return C!==void 0&&(U.msg=C),U}function h(y,a,g,z){for(const w in y)if(z&&y[w]instanceof Error)y[w]=i.stdSerializers.err(y[w]);else if(typeof y[w]=="object"&&!Array.isArray(y[w]))for(const C in y[w])a&&a.indexOf(C)>-1&&C in g&&(y[w][C]=g[C](y[w][C]))}function p(y,a,g){return function(){const z=new Array(1+arguments.length);z[0]=a;for(var w=1;w<z.length;w++)z[w]=arguments[w-1];return y[g].apply(this,z)}}function m(y,a,g){const z=a.send,w=a.ts,C=a.methodLevel,U=a.methodValue,W=a.val,x=y._logEvent.bindings;h(g,y._serialize||Object.keys(y.serializers),y.serializers,y._stdErrSerialize===void 0?!0:y._stdErrSerialize),y._logEvent.ts=w,y._logEvent.messages=g.filter(function(O){return x.indexOf(O)===-1}),y._logEvent.level.label=C,y._logEvent.level.value=U,z(C,y._logEvent,W),y._logEvent=E(x)}function E(y){return{ts:0,messages:[],bindings:y||[],level:{label:"",value:0}}}function A(y){const a={type:y.constructor.name,msg:y.message,stack:y.stack};for(const g in y)a[g]===void 0&&(a[g]=y[g]);return a}function I(y){return typeof y.timestamp=="function"?y.timestamp:y.timestamp===!1?H:T}function S(){return{}}function R(y){return y}function j(){}function H(){return!1}function T(){return Date.now()}function F(){return Math.round(Date.now()/1e3)}function v(){return new Date(Date.now()).toISOString()}function D(){function y(a){return typeof a<"u"&&a}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return y(self)||y(window)||y(this)||{}}}return us}var Nr={},ma;function bu(){return ma||(ma=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.PINO_CUSTOM_CONTEXT_KEY=Nr.PINO_LOGGER_DEFAULTS=void 0,Nr.PINO_LOGGER_DEFAULTS={level:"info"},Nr.PINO_CUSTOM_CONTEXT_KEY="custom_context"),Nr}var Ot={},ba;function H0(){if(ba)return Ot;ba=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.generateChildLogger=Ot.formatChildLoggerContext=Ot.getLoggerContext=Ot.setBrowserLoggerContext=Ot.getBrowserLoggerContext=Ot.getDefaultLoggerOptions=void 0;const e=bu();function t(o){return Object.assign(Object.assign({},o),{level:(o==null?void 0:o.level)||e.PINO_LOGGER_DEFAULTS.level})}Ot.getDefaultLoggerOptions=t;function r(o,h=e.PINO_CUSTOM_CONTEXT_KEY){return o[h]||""}Ot.getBrowserLoggerContext=r;function n(o,h,p=e.PINO_CUSTOM_CONTEXT_KEY){return o[p]=h,o}Ot.setBrowserLoggerContext=n;function i(o,h=e.PINO_CUSTOM_CONTEXT_KEY){let p="";return typeof o.bindings>"u"?p=r(o,h):p=o.bindings().context||"",p}Ot.getLoggerContext=i;function s(o,h,p=e.PINO_CUSTOM_CONTEXT_KEY){const m=i(o,p);return m.trim()?`${m}/${h}`:h}Ot.formatChildLoggerContext=s;function c(o,h,p=e.PINO_CUSTOM_CONTEXT_KEY){const m=s(o,h,p),E=o.child({context:m});return n(E,m,p)}return Ot.generateChildLogger=c,Ot}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.pino=void 0;const t=Gt,r=t.__importDefault(q0());Object.defineProperty(e,"pino",{enumerable:!0,get:function(){return r.default}}),t.__exportStar(bu(),e),t.__exportStar(H0(),e)})(Oe);class W0 extends Mr{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}}let V0=class extends Mr{constructor(t,r){super(),this.core=t,this.logger=r,this.records=new Map}},G0=class{constructor(t,r){this.logger=t,this.core=r}},Y0=class extends Mr{constructor(t,r){super(),this.relayer=t,this.logger=r}},J0=class extends Mr{constructor(t){super()}},X0=class{constructor(t,r,n,i){this.core=t,this.logger=r,this.name=n}},Z0=class extends Mr{constructor(t,r){super(),this.relayer=t,this.logger=r}},Q0=class extends Mr{constructor(t,r){super(),this.core=t,this.logger=r}},ep=class{constructor(t,r){this.projectId=t,this.logger=r}},tp=class{constructor(t){this.opts=t,this.protocol="wc",this.version=2}},rp=class{constructor(t){this.client=t}};const np=e=>JSON.stringify(e,(t,r)=>typeof r=="bigint"?r.toString()+"n":r),ip=e=>{const t=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=e.replace(t,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function wu(e){if(typeof e!="string")throw new Error(`Cannot safe json parse value of type ${typeof e}`);try{return ip(e)}catch{return e}}function Xs(e){return typeof e=="string"?e:np(e)||""}var Zs={},cn={},zi={},Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.BrowserRandomSource=void 0;const wa=65536;class sp{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(t);for(let n=0;n<r.length;n+=wa)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,wa)));return r}}Ki.BrowserRandomSource=sp;function op(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qi={},kt={};Object.defineProperty(kt,"__esModule",{value:!0});function ap(e){for(var t=0;t<e.length;t++)e[t]=0;return e}kt.wipe=ap;const cp={},up=Object.freeze(Object.defineProperty({__proto__:null,default:cp},Symbol.toStringTag,{value:"Module"})),lp=Ac(up);Object.defineProperty(qi,"__esModule",{value:!0});qi.NodeRandomSource=void 0;const fp=kt;class hp{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof op<"u"){const t=lp;t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const n=new Uint8Array(t);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,fp.wipe)(r),n}}qi.NodeRandomSource=hp;Object.defineProperty(zi,"__esModule",{value:!0});zi.SystemRandomSource=void 0;const dp=Ki,pp=qi;class gp{constructor(){if(this.isAvailable=!1,this.name="",this._source=new dp.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new pp.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}zi.SystemRandomSource=gp;var ge={},_u={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(o,h){var p=o>>>16&65535,m=o&65535,E=h>>>16&65535,A=h&65535;return m*A+(p*A+m*E<<16>>>0)|0}e.mul=Math.imul||t;function r(o,h){return o+h|0}e.add=r;function n(o,h){return o-h|0}e.sub=n;function i(o,h){return o<<h|o>>>32-h}e.rotl=i;function s(o,h){return o<<32-h|o>>>h}e.rotr=s;function c(o){return typeof o=="number"&&isFinite(o)&&Math.floor(o)===o}e.isInteger=Number.isInteger||c,e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(o){return e.isInteger(o)&&o>=-e.MAX_SAFE_INTEGER&&o<=e.MAX_SAFE_INTEGER}})(_u);Object.defineProperty(ge,"__esModule",{value:!0});var Eu=_u;function yp(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16}ge.readInt16BE=yp;function mp(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])>>>0}ge.readUint16BE=mp;function bp(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])<<16>>16}ge.readInt16LE=bp;function wp(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])>>>0}ge.readUint16LE=wp;function vu(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}ge.writeUint16BE=vu;ge.writeInt16BE=vu;function xu(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}ge.writeUint16LE=xu;ge.writeInt16LE=xu;function xs(e,t){return t===void 0&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}ge.readInt32BE=xs;function Ss(e,t){return t===void 0&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}ge.readUint32BE=Ss;function Ds(e,t){return t===void 0&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}ge.readInt32LE=Ds;function Is(e,t){return t===void 0&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}ge.readUint32LE=Is;function pi(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}ge.writeUint32BE=pi;ge.writeInt32BE=pi;function gi(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}ge.writeUint32LE=gi;ge.writeInt32LE=gi;function _p(e,t){t===void 0&&(t=0);var r=xs(e,t),n=xs(e,t+4);return r*4294967296+n-(n>>31)*4294967296}ge.readInt64BE=_p;function Ep(e,t){t===void 0&&(t=0);var r=Ss(e,t),n=Ss(e,t+4);return r*4294967296+n}ge.readUint64BE=Ep;function vp(e,t){t===void 0&&(t=0);var r=Ds(e,t),n=Ds(e,t+4);return n*4294967296+r-(r>>31)*4294967296}ge.readInt64LE=vp;function xp(e,t){t===void 0&&(t=0);var r=Is(e,t),n=Is(e,t+4);return n*4294967296+r}ge.readUint64LE=xp;function Su(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),pi(e/4294967296>>>0,t,r),pi(e>>>0,t,r+4),t}ge.writeUint64BE=Su;ge.writeInt64BE=Su;function Du(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),gi(e>>>0,t,r),gi(e/4294967296>>>0,t,r+4),t}ge.writeUint64LE=Du;ge.writeInt64LE=Du;function Sp(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=e/8+r-1;s>=r;s--)n+=t[s]*i,i*=256;return n}ge.readUintBE=Sp;function Dp(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+e/8;s++)n+=t[s]*i,i*=256;return n}ge.readUintLE=Dp;function Ip(e,t,r,n){if(r===void 0&&(r=new Uint8Array(e/8)),n===void 0&&(n=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Eu.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var i=1,s=e/8+n-1;s>=n;s--)r[s]=t/i&255,i*=256;return r}ge.writeUintBE=Ip;function Op(e,t,r,n){if(r===void 0&&(r=new Uint8Array(e/8)),n===void 0&&(n=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Eu.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var i=1,s=n;s<n+e/8;s++)r[s]=t/i&255,i*=256;return r}ge.writeUintLE=Op;function Ap(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t)}ge.readFloat32BE=Ap;function Cp(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t,!0)}ge.readFloat32LE=Cp;function Tp(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t)}ge.readFloat64BE=Tp;function Rp(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t,!0)}ge.readFloat64LE=Rp;function Pp(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat32(r,e),t}ge.writeFloat32BE=Pp;function Np(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat32(r,e,!0),t}ge.writeFloat32LE=Np;function Fp(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat64(r,e),t}ge.writeFloat64BE=Fp;function Lp(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat64(r,e,!0),t}ge.writeFloat64LE=Lp;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.randomStringForEntropy=e.randomString=e.randomUint32=e.randomBytes=e.defaultRandomSource=void 0;const t=zi,r=ge,n=kt;e.defaultRandomSource=new t.SystemRandomSource;function i(p,m=e.defaultRandomSource){return m.randomBytes(p)}e.randomBytes=i;function s(p=e.defaultRandomSource){const m=i(4,p),E=(0,r.readUint32LE)(m);return(0,n.wipe)(m),E}e.randomUint32=s;const c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function o(p,m=c,E=e.defaultRandomSource){if(m.length<2)throw new Error("randomString charset is too short");if(m.length>256)throw new Error("randomString charset is too long");let A="";const I=m.length,S=256-256%I;for(;p>0;){const R=i(Math.ceil(p*256/S),E);for(let j=0;j<R.length&&p>0;j++){const H=R[j];H<S&&(A+=m.charAt(H%I),p--)}(0,n.wipe)(R)}return A}e.randomString=o;function h(p,m=c,E=e.defaultRandomSource){const A=Math.ceil(p/(Math.log(m.length)/Math.LN2));return o(A,m,E)}e.randomStringForEntropy=h})(cn);var Iu={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=ge,r=kt;e.DIGEST_LENGTH=64,e.BLOCK_SIZE=128;var n=function(){function o(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return o.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},o.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},o.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},o.prototype.update=function(h,p){if(p===void 0&&(p=h.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var m=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<e.BLOCK_SIZE&&p>0;)this._buffer[this._bufferLength++]=h[m++],p--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(m=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,h,m,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=h[m++],p--;return this},o.prototype.finish=function(h){if(!this._finished){var p=this._bytesHashed,m=this._bufferLength,E=p/536870912|0,A=p<<3,I=p%128<112?128:256;this._buffer[m]=128;for(var S=m+1;S<I-8;S++)this._buffer[S]=0;t.writeUint32BE(E,this._buffer,I-8),t.writeUint32BE(A,this._buffer,I-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,I),this._finished=!0}for(var S=0;S<this.digestLength/8;S++)t.writeUint32BE(this._stateHi[S],h,S*8),t.writeUint32BE(this._stateLo[S],h,S*8+4);return this},o.prototype.digest=function(){var h=new Uint8Array(this.digestLength);return this.finish(h),h},o.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},o.prototype.restoreState=function(h){return this._stateHi.set(h.stateHi),this._stateLo.set(h.stateLo),this._bufferLength=h.bufferLength,h.buffer&&this._buffer.set(h.buffer),this._bytesHashed=h.bytesHashed,this._finished=!1,this},o.prototype.cleanSavedState=function(h){r.wipe(h.stateHi),r.wipe(h.stateLo),h.buffer&&r.wipe(h.buffer),h.bufferLength=0,h.bytesHashed=0},o}();e.SHA512=n;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(o,h,p,m,E,A,I){for(var S=p[0],R=p[1],j=p[2],H=p[3],T=p[4],F=p[5],v=p[6],D=p[7],y=m[0],a=m[1],g=m[2],z=m[3],w=m[4],C=m[5],U=m[6],W=m[7],x,O,Y,J,G,q,V,X;I>=128;){for(var te=0;te<16;te++){var Q=8*te+A;o[te]=t.readUint32BE(E,Q),h[te]=t.readUint32BE(E,Q+4)}for(var te=0;te<80;te++){var ae=S,ie=R,le=j,k=H,B=T,L=F,f=v,P=D,ee=y,re=a,de=g,Se=z,_e=w,De=C,je=U,$e=W;if(x=D,O=W,G=O&65535,q=O>>>16,V=x&65535,X=x>>>16,x=(T>>>14|w<<32-14)^(T>>>18|w<<32-18)^(w>>>41-32|T<<32-(41-32)),O=(w>>>14|T<<32-14)^(w>>>18|T<<32-18)^(T>>>41-32|w<<32-(41-32)),G+=O&65535,q+=O>>>16,V+=x&65535,X+=x>>>16,x=T&F^~T&v,O=w&C^~w&U,G+=O&65535,q+=O>>>16,V+=x&65535,X+=x>>>16,x=i[te*2],O=i[te*2+1],G+=O&65535,q+=O>>>16,V+=x&65535,X+=x>>>16,x=o[te%16],O=h[te%16],G+=O&65535,q+=O>>>16,V+=x&65535,X+=x>>>16,q+=G>>>16,V+=q>>>16,X+=V>>>16,Y=V&65535|X<<16,J=G&65535|q<<16,x=Y,O=J,G=O&65535,q=O>>>16,V=x&65535,X=x>>>16,x=(S>>>28|y<<32-28)^(y>>>34-32|S<<32-(34-32))^(y>>>39-32|S<<32-(39-32)),O=(y>>>28|S<<32-28)^(S>>>34-32|y<<32-(34-32))^(S>>>39-32|y<<32-(39-32)),G+=O&65535,q+=O>>>16,V+=x&65535,X+=x>>>16,x=S&R^S&j^R&j,O=y&a^y&g^a&g,G+=O&65535,q+=O>>>16,V+=x&65535,X+=x>>>16,q+=G>>>16,V+=q>>>16,X+=V>>>16,P=V&65535|X<<16,$e=G&65535|q<<16,x=k,O=Se,G=O&65535,q=O>>>16,V=x&65535,X=x>>>16,x=Y,O=J,G+=O&65535,q+=O>>>16,V+=x&65535,X+=x>>>16,q+=G>>>16,V+=q>>>16,X+=V>>>16,k=V&65535|X<<16,Se=G&65535|q<<16,R=ae,j=ie,H=le,T=k,F=B,v=L,D=f,S=P,a=ee,g=re,z=de,w=Se,C=_e,U=De,W=je,y=$e,te%16===15)for(var Q=0;Q<16;Q++)x=o[Q],O=h[Q],G=O&65535,q=O>>>16,V=x&65535,X=x>>>16,x=o[(Q+9)%16],O=h[(Q+9)%16],G+=O&65535,q+=O>>>16,V+=x&65535,X+=x>>>16,Y=o[(Q+1)%16],J=h[(Q+1)%16],x=(Y>>>1|J<<32-1)^(Y>>>8|J<<32-8)^Y>>>7,O=(J>>>1|Y<<32-1)^(J>>>8|Y<<32-8)^(J>>>7|Y<<32-7),G+=O&65535,q+=O>>>16,V+=x&65535,X+=x>>>16,Y=o[(Q+14)%16],J=h[(Q+14)%16],x=(Y>>>19|J<<32-19)^(J>>>61-32|Y<<32-(61-32))^Y>>>6,O=(J>>>19|Y<<32-19)^(Y>>>61-32|J<<32-(61-32))^(J>>>6|Y<<32-6),G+=O&65535,q+=O>>>16,V+=x&65535,X+=x>>>16,q+=G>>>16,V+=q>>>16,X+=V>>>16,o[Q]=V&65535|X<<16,h[Q]=G&65535|q<<16}x=S,O=y,G=O&65535,q=O>>>16,V=x&65535,X=x>>>16,x=p[0],O=m[0],G+=O&65535,q+=O>>>16,V+=x&65535,X+=x>>>16,q+=G>>>16,V+=q>>>16,X+=V>>>16,p[0]=S=V&65535|X<<16,m[0]=y=G&65535|q<<16,x=R,O=a,G=O&65535,q=O>>>16,V=x&65535,X=x>>>16,x=p[1],O=m[1],G+=O&65535,q+=O>>>16,V+=x&65535,X+=x>>>16,q+=G>>>16,V+=q>>>16,X+=V>>>16,p[1]=R=V&65535|X<<16,m[1]=a=G&65535|q<<16,x=j,O=g,G=O&65535,q=O>>>16,V=x&65535,X=x>>>16,x=p[2],O=m[2],G+=O&65535,q+=O>>>16,V+=x&65535,X+=x>>>16,q+=G>>>16,V+=q>>>16,X+=V>>>16,p[2]=j=V&65535|X<<16,m[2]=g=G&65535|q<<16,x=H,O=z,G=O&65535,q=O>>>16,V=x&65535,X=x>>>16,x=p[3],O=m[3],G+=O&65535,q+=O>>>16,V+=x&65535,X+=x>>>16,q+=G>>>16,V+=q>>>16,X+=V>>>16,p[3]=H=V&65535|X<<16,m[3]=z=G&65535|q<<16,x=T,O=w,G=O&65535,q=O>>>16,V=x&65535,X=x>>>16,x=p[4],O=m[4],G+=O&65535,q+=O>>>16,V+=x&65535,X+=x>>>16,q+=G>>>16,V+=q>>>16,X+=V>>>16,p[4]=T=V&65535|X<<16,m[4]=w=G&65535|q<<16,x=F,O=C,G=O&65535,q=O>>>16,V=x&65535,X=x>>>16,x=p[5],O=m[5],G+=O&65535,q+=O>>>16,V+=x&65535,X+=x>>>16,q+=G>>>16,V+=q>>>16,X+=V>>>16,p[5]=F=V&65535|X<<16,m[5]=C=G&65535|q<<16,x=v,O=U,G=O&65535,q=O>>>16,V=x&65535,X=x>>>16,x=p[6],O=m[6],G+=O&65535,q+=O>>>16,V+=x&65535,X+=x>>>16,q+=G>>>16,V+=q>>>16,X+=V>>>16,p[6]=v=V&65535|X<<16,m[6]=U=G&65535|q<<16,x=D,O=W,G=O&65535,q=O>>>16,V=x&65535,X=x>>>16,x=p[7],O=m[7],G+=O&65535,q+=O>>>16,V+=x&65535,X+=x>>>16,q+=G>>>16,V+=q>>>16,X+=V>>>16,p[7]=D=V&65535|X<<16,m[7]=W=G&65535|q<<16,A+=128,I-=128}return A}function c(o){var h=new n;h.update(o);var p=h.digest();return h.clean(),p}e.hash=c})(Iu);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.convertSecretKeyToX25519=e.convertPublicKeyToX25519=e.verify=e.sign=e.extractPublicKeyFromSecretKey=e.generateKeyPair=e.generateKeyPairFromSeed=e.SEED_LENGTH=e.SECRET_KEY_LENGTH=e.PUBLIC_KEY_LENGTH=e.SIGNATURE_LENGTH=void 0;const t=cn,r=Iu,n=kt;e.SIGNATURE_LENGTH=64,e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=64,e.SEED_LENGTH=32;function i(k){const B=new Float64Array(16);if(k)for(let L=0;L<k.length;L++)B[L]=k[L];return B}const s=new Uint8Array(32);s[0]=9;const c=i(),o=i([1]),h=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),p=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),m=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),E=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),A=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function I(k,B){for(let L=0;L<16;L++)k[L]=B[L]|0}function S(k){let B=1;for(let L=0;L<16;L++){let f=k[L]+B+65535;B=Math.floor(f/65536),k[L]=f-B*65536}k[0]+=B-1+37*(B-1)}function R(k,B,L){const f=~(L-1);for(let P=0;P<16;P++){const ee=f&(k[P]^B[P]);k[P]^=ee,B[P]^=ee}}function j(k,B){const L=i(),f=i();for(let P=0;P<16;P++)f[P]=B[P];S(f),S(f),S(f);for(let P=0;P<2;P++){L[0]=f[0]-65517;for(let re=1;re<15;re++)L[re]=f[re]-65535-(L[re-1]>>16&1),L[re-1]&=65535;L[15]=f[15]-32767-(L[14]>>16&1);const ee=L[15]>>16&1;L[14]&=65535,R(f,L,1-ee)}for(let P=0;P<16;P++)k[2*P]=f[P]&255,k[2*P+1]=f[P]>>8}function H(k,B){let L=0;for(let f=0;f<32;f++)L|=k[f]^B[f];return(1&L-1>>>8)-1}function T(k,B){const L=new Uint8Array(32),f=new Uint8Array(32);return j(L,k),j(f,B),H(L,f)}function F(k){const B=new Uint8Array(32);return j(B,k),B[0]&1}function v(k,B){for(let L=0;L<16;L++)k[L]=B[2*L]+(B[2*L+1]<<8);k[15]&=32767}function D(k,B,L){for(let f=0;f<16;f++)k[f]=B[f]+L[f]}function y(k,B,L){for(let f=0;f<16;f++)k[f]=B[f]-L[f]}function a(k,B,L){let f,P,ee=0,re=0,de=0,Se=0,_e=0,De=0,je=0,$e=0,Ee=0,be=0,he=0,ye=0,we=0,fe=0,pe=0,d=0,u=0,l=0,b=0,N=0,M=0,K=0,se=0,ce=0,ve=0,Ie=0,xe=0,Lt=0,Ir=0,fn=0,Gn=0,Ge=L[0],ze=L[1],Ye=L[2],Je=L[3],Xe=L[4],Ke=L[5],nt=L[6],it=L[7],st=L[8],ot=L[9],at=L[10],tt=L[11],Ze=L[12],Me=L[13],ct=L[14],ut=L[15];f=B[0],ee+=f*Ge,re+=f*ze,de+=f*Ye,Se+=f*Je,_e+=f*Xe,De+=f*Ke,je+=f*nt,$e+=f*it,Ee+=f*st,be+=f*ot,he+=f*at,ye+=f*tt,we+=f*Ze,fe+=f*Me,pe+=f*ct,d+=f*ut,f=B[1],re+=f*Ge,de+=f*ze,Se+=f*Ye,_e+=f*Je,De+=f*Xe,je+=f*Ke,$e+=f*nt,Ee+=f*it,be+=f*st,he+=f*ot,ye+=f*at,we+=f*tt,fe+=f*Ze,pe+=f*Me,d+=f*ct,u+=f*ut,f=B[2],de+=f*Ge,Se+=f*ze,_e+=f*Ye,De+=f*Je,je+=f*Xe,$e+=f*Ke,Ee+=f*nt,be+=f*it,he+=f*st,ye+=f*ot,we+=f*at,fe+=f*tt,pe+=f*Ze,d+=f*Me,u+=f*ct,l+=f*ut,f=B[3],Se+=f*Ge,_e+=f*ze,De+=f*Ye,je+=f*Je,$e+=f*Xe,Ee+=f*Ke,be+=f*nt,he+=f*it,ye+=f*st,we+=f*ot,fe+=f*at,pe+=f*tt,d+=f*Ze,u+=f*Me,l+=f*ct,b+=f*ut,f=B[4],_e+=f*Ge,De+=f*ze,je+=f*Ye,$e+=f*Je,Ee+=f*Xe,be+=f*Ke,he+=f*nt,ye+=f*it,we+=f*st,fe+=f*ot,pe+=f*at,d+=f*tt,u+=f*Ze,l+=f*Me,b+=f*ct,N+=f*ut,f=B[5],De+=f*Ge,je+=f*ze,$e+=f*Ye,Ee+=f*Je,be+=f*Xe,he+=f*Ke,ye+=f*nt,we+=f*it,fe+=f*st,pe+=f*ot,d+=f*at,u+=f*tt,l+=f*Ze,b+=f*Me,N+=f*ct,M+=f*ut,f=B[6],je+=f*Ge,$e+=f*ze,Ee+=f*Ye,be+=f*Je,he+=f*Xe,ye+=f*Ke,we+=f*nt,fe+=f*it,pe+=f*st,d+=f*ot,u+=f*at,l+=f*tt,b+=f*Ze,N+=f*Me,M+=f*ct,K+=f*ut,f=B[7],$e+=f*Ge,Ee+=f*ze,be+=f*Ye,he+=f*Je,ye+=f*Xe,we+=f*Ke,fe+=f*nt,pe+=f*it,d+=f*st,u+=f*ot,l+=f*at,b+=f*tt,N+=f*Ze,M+=f*Me,K+=f*ct,se+=f*ut,f=B[8],Ee+=f*Ge,be+=f*ze,he+=f*Ye,ye+=f*Je,we+=f*Xe,fe+=f*Ke,pe+=f*nt,d+=f*it,u+=f*st,l+=f*ot,b+=f*at,N+=f*tt,M+=f*Ze,K+=f*Me,se+=f*ct,ce+=f*ut,f=B[9],be+=f*Ge,he+=f*ze,ye+=f*Ye,we+=f*Je,fe+=f*Xe,pe+=f*Ke,d+=f*nt,u+=f*it,l+=f*st,b+=f*ot,N+=f*at,M+=f*tt,K+=f*Ze,se+=f*Me,ce+=f*ct,ve+=f*ut,f=B[10],he+=f*Ge,ye+=f*ze,we+=f*Ye,fe+=f*Je,pe+=f*Xe,d+=f*Ke,u+=f*nt,l+=f*it,b+=f*st,N+=f*ot,M+=f*at,K+=f*tt,se+=f*Ze,ce+=f*Me,ve+=f*ct,Ie+=f*ut,f=B[11],ye+=f*Ge,we+=f*ze,fe+=f*Ye,pe+=f*Je,d+=f*Xe,u+=f*Ke,l+=f*nt,b+=f*it,N+=f*st,M+=f*ot,K+=f*at,se+=f*tt,ce+=f*Ze,ve+=f*Me,Ie+=f*ct,xe+=f*ut,f=B[12],we+=f*Ge,fe+=f*ze,pe+=f*Ye,d+=f*Je,u+=f*Xe,l+=f*Ke,b+=f*nt,N+=f*it,M+=f*st,K+=f*ot,se+=f*at,ce+=f*tt,ve+=f*Ze,Ie+=f*Me,xe+=f*ct,Lt+=f*ut,f=B[13],fe+=f*Ge,pe+=f*ze,d+=f*Ye,u+=f*Je,l+=f*Xe,b+=f*Ke,N+=f*nt,M+=f*it,K+=f*st,se+=f*ot,ce+=f*at,ve+=f*tt,Ie+=f*Ze,xe+=f*Me,Lt+=f*ct,Ir+=f*ut,f=B[14],pe+=f*Ge,d+=f*ze,u+=f*Ye,l+=f*Je,b+=f*Xe,N+=f*Ke,M+=f*nt,K+=f*it,se+=f*st,ce+=f*ot,ve+=f*at,Ie+=f*tt,xe+=f*Ze,Lt+=f*Me,Ir+=f*ct,fn+=f*ut,f=B[15],d+=f*Ge,u+=f*ze,l+=f*Ye,b+=f*Je,N+=f*Xe,M+=f*Ke,K+=f*nt,se+=f*it,ce+=f*st,ve+=f*ot,Ie+=f*at,xe+=f*tt,Lt+=f*Ze,Ir+=f*Me,fn+=f*ct,Gn+=f*ut,ee+=38*u,re+=38*l,de+=38*b,Se+=38*N,_e+=38*M,De+=38*K,je+=38*se,$e+=38*ce,Ee+=38*ve,be+=38*Ie,he+=38*xe,ye+=38*Lt,we+=38*Ir,fe+=38*fn,pe+=38*Gn,P=1,f=ee+P+65535,P=Math.floor(f/65536),ee=f-P*65536,f=re+P+65535,P=Math.floor(f/65536),re=f-P*65536,f=de+P+65535,P=Math.floor(f/65536),de=f-P*65536,f=Se+P+65535,P=Math.floor(f/65536),Se=f-P*65536,f=_e+P+65535,P=Math.floor(f/65536),_e=f-P*65536,f=De+P+65535,P=Math.floor(f/65536),De=f-P*65536,f=je+P+65535,P=Math.floor(f/65536),je=f-P*65536,f=$e+P+65535,P=Math.floor(f/65536),$e=f-P*65536,f=Ee+P+65535,P=Math.floor(f/65536),Ee=f-P*65536,f=be+P+65535,P=Math.floor(f/65536),be=f-P*65536,f=he+P+65535,P=Math.floor(f/65536),he=f-P*65536,f=ye+P+65535,P=Math.floor(f/65536),ye=f-P*65536,f=we+P+65535,P=Math.floor(f/65536),we=f-P*65536,f=fe+P+65535,P=Math.floor(f/65536),fe=f-P*65536,f=pe+P+65535,P=Math.floor(f/65536),pe=f-P*65536,f=d+P+65535,P=Math.floor(f/65536),d=f-P*65536,ee+=P-1+37*(P-1),P=1,f=ee+P+65535,P=Math.floor(f/65536),ee=f-P*65536,f=re+P+65535,P=Math.floor(f/65536),re=f-P*65536,f=de+P+65535,P=Math.floor(f/65536),de=f-P*65536,f=Se+P+65535,P=Math.floor(f/65536),Se=f-P*65536,f=_e+P+65535,P=Math.floor(f/65536),_e=f-P*65536,f=De+P+65535,P=Math.floor(f/65536),De=f-P*65536,f=je+P+65535,P=Math.floor(f/65536),je=f-P*65536,f=$e+P+65535,P=Math.floor(f/65536),$e=f-P*65536,f=Ee+P+65535,P=Math.floor(f/65536),Ee=f-P*65536,f=be+P+65535,P=Math.floor(f/65536),be=f-P*65536,f=he+P+65535,P=Math.floor(f/65536),he=f-P*65536,f=ye+P+65535,P=Math.floor(f/65536),ye=f-P*65536,f=we+P+65535,P=Math.floor(f/65536),we=f-P*65536,f=fe+P+65535,P=Math.floor(f/65536),fe=f-P*65536,f=pe+P+65535,P=Math.floor(f/65536),pe=f-P*65536,f=d+P+65535,P=Math.floor(f/65536),d=f-P*65536,ee+=P-1+37*(P-1),k[0]=ee,k[1]=re,k[2]=de,k[3]=Se,k[4]=_e,k[5]=De,k[6]=je,k[7]=$e,k[8]=Ee,k[9]=be,k[10]=he,k[11]=ye,k[12]=we,k[13]=fe,k[14]=pe,k[15]=d}function g(k,B){a(k,B,B)}function z(k,B){const L=i();let f;for(f=0;f<16;f++)L[f]=B[f];for(f=253;f>=0;f--)g(L,L),f!==2&&f!==4&&a(L,L,B);for(f=0;f<16;f++)k[f]=L[f]}function w(k,B){const L=i();let f;for(f=0;f<16;f++)L[f]=B[f];for(f=250;f>=0;f--)g(L,L),f!==1&&a(L,L,B);for(f=0;f<16;f++)k[f]=L[f]}function C(k,B){const L=i(),f=i(),P=i(),ee=i(),re=i(),de=i(),Se=i(),_e=i(),De=i();y(L,k[1],k[0]),y(De,B[1],B[0]),a(L,L,De),D(f,k[0],k[1]),D(De,B[0],B[1]),a(f,f,De),a(P,k[3],B[3]),a(P,P,p),a(ee,k[2],B[2]),D(ee,ee,ee),y(re,f,L),y(de,ee,P),D(Se,ee,P),D(_e,f,L),a(k[0],re,de),a(k[1],_e,Se),a(k[2],Se,de),a(k[3],re,_e)}function U(k,B,L){for(let f=0;f<4;f++)R(k[f],B[f],L)}function W(k,B){const L=i(),f=i(),P=i();z(P,B[2]),a(L,B[0],P),a(f,B[1],P),j(k,f),k[31]^=F(L)<<7}function x(k,B,L){I(k[0],c),I(k[1],o),I(k[2],o),I(k[3],c);for(let f=255;f>=0;--f){const P=L[f/8|0]>>(f&7)&1;U(k,B,P),C(B,k),C(k,k),U(k,B,P)}}function O(k,B){const L=[i(),i(),i(),i()];I(L[0],m),I(L[1],E),I(L[2],o),a(L[3],m,E),x(k,L,B)}function Y(k){if(k.length!==e.SEED_LENGTH)throw new Error(`ed25519: seed must be ${e.SEED_LENGTH} bytes`);const B=(0,r.hash)(k);B[0]&=248,B[31]&=127,B[31]|=64;const L=new Uint8Array(32),f=[i(),i(),i(),i()];O(f,B),W(L,f);const P=new Uint8Array(64);return P.set(k),P.set(L,32),{publicKey:L,secretKey:P}}e.generateKeyPairFromSeed=Y;function J(k){const B=(0,t.randomBytes)(32,k),L=Y(B);return(0,n.wipe)(B),L}e.generateKeyPair=J;function G(k){if(k.length!==e.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${e.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(k.subarray(32))}e.extractPublicKeyFromSecretKey=G;const q=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function V(k,B){let L,f,P,ee;for(f=63;f>=32;--f){for(L=0,P=f-32,ee=f-12;P<ee;++P)B[P]+=L-16*B[f]*q[P-(f-32)],L=Math.floor((B[P]+128)/256),B[P]-=L*256;B[P]+=L,B[f]=0}for(L=0,P=0;P<32;P++)B[P]+=L-(B[31]>>4)*q[P],L=B[P]>>8,B[P]&=255;for(P=0;P<32;P++)B[P]-=L*q[P];for(f=0;f<32;f++)B[f+1]+=B[f]>>8,k[f]=B[f]&255}function X(k){const B=new Float64Array(64);for(let L=0;L<64;L++)B[L]=k[L];for(let L=0;L<64;L++)k[L]=0;V(k,B)}function te(k,B){const L=new Float64Array(64),f=[i(),i(),i(),i()],P=(0,r.hash)(k.subarray(0,32));P[0]&=248,P[31]&=127,P[31]|=64;const ee=new Uint8Array(64);ee.set(P.subarray(32),32);const re=new r.SHA512;re.update(ee.subarray(32)),re.update(B);const de=re.digest();re.clean(),X(de),O(f,de),W(ee,f),re.reset(),re.update(ee.subarray(0,32)),re.update(k.subarray(32)),re.update(B);const Se=re.digest();X(Se);for(let _e=0;_e<32;_e++)L[_e]=de[_e];for(let _e=0;_e<32;_e++)for(let De=0;De<32;De++)L[_e+De]+=Se[_e]*P[De];return V(ee.subarray(32),L),ee}e.sign=te;function Q(k,B){const L=i(),f=i(),P=i(),ee=i(),re=i(),de=i(),Se=i();return I(k[2],o),v(k[1],B),g(P,k[1]),a(ee,P,h),y(P,P,k[2]),D(ee,k[2],ee),g(re,ee),g(de,re),a(Se,de,re),a(L,Se,P),a(L,L,ee),w(L,L),a(L,L,P),a(L,L,ee),a(L,L,ee),a(k[0],L,ee),g(f,k[0]),a(f,f,ee),T(f,P)&&a(k[0],k[0],A),g(f,k[0]),a(f,f,ee),T(f,P)?-1:(F(k[0])===B[31]>>7&&y(k[0],c,k[0]),a(k[3],k[0],k[1]),0)}function ae(k,B,L){const f=new Uint8Array(32),P=[i(),i(),i(),i()],ee=[i(),i(),i(),i()];if(L.length!==e.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${e.SIGNATURE_LENGTH} bytes`);if(Q(ee,k))return!1;const re=new r.SHA512;re.update(L.subarray(0,32)),re.update(k),re.update(B);const de=re.digest();return X(de),x(P,ee,de),O(ee,L.subarray(32)),C(P,ee),W(f,P),!H(L,f)}e.verify=ae;function ie(k){let B=[i(),i(),i(),i()];if(Q(B,k))throw new Error("Ed25519: invalid public key");let L=i(),f=i(),P=B[1];D(L,o,P),y(f,o,P),z(f,f),a(L,L,f);let ee=new Uint8Array(32);return j(ee,L),ee}e.convertPublicKeyToX25519=ie;function le(k){const B=(0,r.hash)(k.subarray(0,32));B[0]&=248,B[31]&=127,B[31]|=64;const L=new Uint8Array(B.subarray(0,32));return(0,n.wipe)(B),L}e.convertSecretKeyToX25519=le})(Zs);const Up="EdDSA",$p="JWT",Ou=".",Au="base64url",Mp="utf8",Bp="utf8",jp=":",kp="did",zp="key",_a="base58btc",Kp="z",qp="K36",Hp=32;function Qs(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Cu(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Qs(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Os(e,t){t||(t=e.reduce((i,s)=>i+s.length,0));const r=Cu(t);let n=0;for(const i of e)r.set(i,n),n+=i.length;return Qs(r)}function Wp(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),c=s.charCodeAt(0);if(r[c]!==255)throw new TypeError(s+" is ambiguous");r[c]=i}var o=e.length,h=e.charAt(0),p=Math.log(o)/Math.log(256),m=Math.log(256)/Math.log(o);function E(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var R=0,j=0,H=0,T=S.length;H!==T&&S[H]===0;)H++,R++;for(var F=(T-H)*m+1>>>0,v=new Uint8Array(F);H!==T;){for(var D=S[H],y=0,a=F-1;(D!==0||y<j)&&a!==-1;a--,y++)D+=256*v[a]>>>0,v[a]=D%o>>>0,D=D/o>>>0;if(D!==0)throw new Error("Non-zero carry");j=y,H++}for(var g=F-j;g!==F&&v[g]===0;)g++;for(var z=h.repeat(R);g<F;++g)z+=e.charAt(v[g]);return z}function A(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var R=0;if(S[R]!==" "){for(var j=0,H=0;S[R]===h;)j++,R++;for(var T=(S.length-R)*p+1>>>0,F=new Uint8Array(T);S[R];){var v=r[S.charCodeAt(R)];if(v===255)return;for(var D=0,y=T-1;(v!==0||D<H)&&y!==-1;y--,D++)v+=o*F[y]>>>0,F[y]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");H=D,R++}if(S[R]!==" "){for(var a=T-H;a!==T&&F[a]===0;)a++;for(var g=new Uint8Array(j+(T-a)),z=j;a!==T;)g[z++]=F[a++];return g}}}function I(S){var R=A(S);if(R)return R;throw new Error(`Non-${t} character`)}return{encode:E,decodeUnsafe:A,decode:I}}var Vp=Wp,Gp=Vp;const Yp=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Jp=e=>new TextEncoder().encode(e),Xp=e=>new TextDecoder().decode(e);class Zp{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Qp{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Tu(this,t)}}class eg{constructor(t){this.decoders=t}or(t){return Tu(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Tu=(e,t)=>new eg({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class tg{constructor(t,r,n,i){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Zp(t,r,n),this.decoder=new Qp(t,r,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Hi=({name:e,prefix:t,encode:r,decode:n})=>new tg(e,t,r,n),Kn=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=Gp(r,t);return Hi({prefix:e,name:t,encode:n,decode:s=>Yp(i(s))})},rg=(e,t,r,n)=>{const i={};for(let m=0;m<t.length;++m)i[t[m]]=m;let s=e.length;for(;e[s-1]==="=";)--s;const c=new Uint8Array(s*r/8|0);let o=0,h=0,p=0;for(let m=0;m<s;++m){const E=i[e[m]];if(E===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<r|E,o+=r,o>=8&&(o-=8,c[p++]=255&h>>o)}if(o>=r||255&h<<8-o)throw new SyntaxError("Unexpected end of data");return c},ng=(e,t,r)=>{const n=t[t.length-1]==="=",i=(1<<r)-1;let s="",c=0,o=0;for(let h=0;h<e.length;++h)for(o=o<<8|e[h],c+=8;c>r;)c-=r,s+=t[i&o>>c];if(c&&(s+=t[i&o<<r-c]),n)for(;s.length*r&7;)s+="=";return s},Et=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Hi({prefix:t,name:e,encode(i){return ng(i,n,r)},decode(i){return rg(i,n,r,e)}}),ig=Hi({prefix:"\0",name:"identity",encode:e=>Xp(e),decode:e=>Jp(e)}),sg=Object.freeze(Object.defineProperty({__proto__:null,identity:ig},Symbol.toStringTag,{value:"Module"})),og=Et({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ag=Object.freeze(Object.defineProperty({__proto__:null,base2:og},Symbol.toStringTag,{value:"Module"})),cg=Et({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),ug=Object.freeze(Object.defineProperty({__proto__:null,base8:cg},Symbol.toStringTag,{value:"Module"})),lg=Kn({prefix:"9",name:"base10",alphabet:"0123456789"}),fg=Object.freeze(Object.defineProperty({__proto__:null,base10:lg},Symbol.toStringTag,{value:"Module"})),hg=Et({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),dg=Et({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),pg=Object.freeze(Object.defineProperty({__proto__:null,base16:hg,base16upper:dg},Symbol.toStringTag,{value:"Module"})),gg=Et({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),yg=Et({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),mg=Et({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),bg=Et({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),wg=Et({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),_g=Et({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Eg=Et({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),vg=Et({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),xg=Et({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),Sg=Object.freeze(Object.defineProperty({__proto__:null,base32:gg,base32hex:wg,base32hexpad:Eg,base32hexpadupper:vg,base32hexupper:_g,base32pad:mg,base32padupper:bg,base32upper:yg,base32z:xg},Symbol.toStringTag,{value:"Module"})),Dg=Kn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ig=Kn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Og=Object.freeze(Object.defineProperty({__proto__:null,base36:Dg,base36upper:Ig},Symbol.toStringTag,{value:"Module"})),Ag=Kn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Cg=Kn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Tg=Object.freeze(Object.defineProperty({__proto__:null,base58btc:Ag,base58flickr:Cg},Symbol.toStringTag,{value:"Module"})),Rg=Et({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Pg=Et({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ng=Et({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Fg=Et({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Lg=Object.freeze(Object.defineProperty({__proto__:null,base64:Rg,base64pad:Pg,base64url:Ng,base64urlpad:Fg},Symbol.toStringTag,{value:"Module"})),Ru=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Ug=Ru.reduce((e,t,r)=>(e[r]=t,e),[]),$g=Ru.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function Mg(e){return e.reduce((t,r)=>(t+=Ug[r],t),"")}function Bg(e){const t=[];for(const r of e){const n=$g[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}const jg=Hi({prefix:"🚀",name:"base256emoji",encode:Mg,decode:Bg}),kg=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:jg},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Ea={...sg,...ag,...ug,...fg,...pg,...Sg,...Og,...Tg,...Lg,...kg};function Pu(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const va=Pu("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),ls=Pu("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=Cu(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Nu={utf8:va,"utf-8":va,hex:Ea.base16,latin1:ls,ascii:ls,binary:ls,...Ea};function Rt(e,t="utf8"){const r=Nu[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}function Nt(e,t="utf8"){const r=Nu[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Qs(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function yi(e){return Rt(Nt(Xs(e),Mp),Au)}function Fu(e){const t=Nt(qp,_a),r=Kp+Rt(Os([t,e]),_a);return[kp,zp,r].join(jp)}function zg(e){return Rt(e,Au)}function Kg(e){return Nt([yi(e.header),yi(e.payload)].join(Ou),Bp)}function qg(e){return[yi(e.header),yi(e.payload),zg(e.signature)].join(Ou)}function xa(e=cn.randomBytes(Hp)){return Zs.generateKeyPairFromSeed(e)}async function Hg(e,t,r,n,i=ue.fromMiliseconds(Date.now())){const s={alg:Up,typ:$p},c=Fu(n.publicKey),o=i+r,h={iss:c,sub:e,aud:t,iat:i,exp:o},p=Kg({header:s,payload:h}),m=Zs.sign(n.secretKey,p);return qg({header:s,payload:h,signature:m})}var eo={},Wi={};Object.defineProperty(Wi,"__esModule",{value:!0});var St=ge,As=kt,Wg=20;function Vg(e,t,r){for(var n=1634760805,i=857760878,s=2036477234,c=1797285236,o=r[3]<<24|r[2]<<16|r[1]<<8|r[0],h=r[7]<<24|r[6]<<16|r[5]<<8|r[4],p=r[11]<<24|r[10]<<16|r[9]<<8|r[8],m=r[15]<<24|r[14]<<16|r[13]<<8|r[12],E=r[19]<<24|r[18]<<16|r[17]<<8|r[16],A=r[23]<<24|r[22]<<16|r[21]<<8|r[20],I=r[27]<<24|r[26]<<16|r[25]<<8|r[24],S=r[31]<<24|r[30]<<16|r[29]<<8|r[28],R=t[3]<<24|t[2]<<16|t[1]<<8|t[0],j=t[7]<<24|t[6]<<16|t[5]<<8|t[4],H=t[11]<<24|t[10]<<16|t[9]<<8|t[8],T=t[15]<<24|t[14]<<16|t[13]<<8|t[12],F=n,v=i,D=s,y=c,a=o,g=h,z=p,w=m,C=E,U=A,W=I,x=S,O=R,Y=j,J=H,G=T,q=0;q<Wg;q+=2)F=F+a|0,O^=F,O=O>>>32-16|O<<16,C=C+O|0,a^=C,a=a>>>32-12|a<<12,v=v+g|0,Y^=v,Y=Y>>>32-16|Y<<16,U=U+Y|0,g^=U,g=g>>>32-12|g<<12,D=D+z|0,J^=D,J=J>>>32-16|J<<16,W=W+J|0,z^=W,z=z>>>32-12|z<<12,y=y+w|0,G^=y,G=G>>>32-16|G<<16,x=x+G|0,w^=x,w=w>>>32-12|w<<12,D=D+z|0,J^=D,J=J>>>32-8|J<<8,W=W+J|0,z^=W,z=z>>>32-7|z<<7,y=y+w|0,G^=y,G=G>>>32-8|G<<8,x=x+G|0,w^=x,w=w>>>32-7|w<<7,v=v+g|0,Y^=v,Y=Y>>>32-8|Y<<8,U=U+Y|0,g^=U,g=g>>>32-7|g<<7,F=F+a|0,O^=F,O=O>>>32-8|O<<8,C=C+O|0,a^=C,a=a>>>32-7|a<<7,F=F+g|0,G^=F,G=G>>>32-16|G<<16,W=W+G|0,g^=W,g=g>>>32-12|g<<12,v=v+z|0,O^=v,O=O>>>32-16|O<<16,x=x+O|0,z^=x,z=z>>>32-12|z<<12,D=D+w|0,Y^=D,Y=Y>>>32-16|Y<<16,C=C+Y|0,w^=C,w=w>>>32-12|w<<12,y=y+a|0,J^=y,J=J>>>32-16|J<<16,U=U+J|0,a^=U,a=a>>>32-12|a<<12,D=D+w|0,Y^=D,Y=Y>>>32-8|Y<<8,C=C+Y|0,w^=C,w=w>>>32-7|w<<7,y=y+a|0,J^=y,J=J>>>32-8|J<<8,U=U+J|0,a^=U,a=a>>>32-7|a<<7,v=v+z|0,O^=v,O=O>>>32-8|O<<8,x=x+O|0,z^=x,z=z>>>32-7|z<<7,F=F+g|0,G^=F,G=G>>>32-8|G<<8,W=W+G|0,g^=W,g=g>>>32-7|g<<7;St.writeUint32LE(F+n|0,e,0),St.writeUint32LE(v+i|0,e,4),St.writeUint32LE(D+s|0,e,8),St.writeUint32LE(y+c|0,e,12),St.writeUint32LE(a+o|0,e,16),St.writeUint32LE(g+h|0,e,20),St.writeUint32LE(z+p|0,e,24),St.writeUint32LE(w+m|0,e,28),St.writeUint32LE(C+E|0,e,32),St.writeUint32LE(U+A|0,e,36),St.writeUint32LE(W+I|0,e,40),St.writeUint32LE(x+S|0,e,44),St.writeUint32LE(O+R|0,e,48),St.writeUint32LE(Y+j|0,e,52),St.writeUint32LE(J+H|0,e,56),St.writeUint32LE(G+T|0,e,60)}function Lu(e,t,r,n,i){if(i===void 0&&(i=0),e.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var s,c;if(i===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),c=s.length-t.length,s.set(t,c)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=t,c=i}for(var o=new Uint8Array(64),h=0;h<r.length;h+=64){Vg(o,s,e);for(var p=h;p<h+64&&p<r.length;p++)n[p]=r[p]^o[p-h];Yg(s,0,c)}return As.wipe(o),i===0&&As.wipe(s),n}Wi.streamXOR=Lu;function Gg(e,t,r,n){return n===void 0&&(n=0),As.wipe(r),Lu(e,t,r,r,n)}Wi.stream=Gg;function Yg(e,t,r){for(var n=1;r--;)n=n+(e[t]&255)|0,e[t]=n&255,n>>>=8,t++;if(n>0)throw new Error("ChaCha: counter overflow")}var Uu={},Dr={};Object.defineProperty(Dr,"__esModule",{value:!0});function Jg(e,t,r){return~(e-1)&t|e-1&r}Dr.select=Jg;function Xg(e,t){return(e|0)-(t|0)-1>>>31&1}Dr.lessOrEqual=Xg;function $u(e,t){if(e.length!==t.length)return 0;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return 1&r-1>>>8}Dr.compare=$u;function Zg(e,t){return e.length===0||t.length===0?!1:$u(e,t)!==0}Dr.equal=Zg;(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Dr,r=kt;e.DIGEST_LENGTH=16;var n=function(){function c(o){this.digestLength=e.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var h=o[0]|o[1]<<8;this._r[0]=h&8191;var p=o[2]|o[3]<<8;this._r[1]=(h>>>13|p<<3)&8191;var m=o[4]|o[5]<<8;this._r[2]=(p>>>10|m<<6)&7939;var E=o[6]|o[7]<<8;this._r[3]=(m>>>7|E<<9)&8191;var A=o[8]|o[9]<<8;this._r[4]=(E>>>4|A<<12)&255,this._r[5]=A>>>1&8190;var I=o[10]|o[11]<<8;this._r[6]=(A>>>14|I<<2)&8191;var S=o[12]|o[13]<<8;this._r[7]=(I>>>11|S<<5)&8065;var R=o[14]|o[15]<<8;this._r[8]=(S>>>8|R<<8)&8191,this._r[9]=R>>>5&127,this._pad[0]=o[16]|o[17]<<8,this._pad[1]=o[18]|o[19]<<8,this._pad[2]=o[20]|o[21]<<8,this._pad[3]=o[22]|o[23]<<8,this._pad[4]=o[24]|o[25]<<8,this._pad[5]=o[26]|o[27]<<8,this._pad[6]=o[28]|o[29]<<8,this._pad[7]=o[30]|o[31]<<8}return c.prototype._blocks=function(o,h,p){for(var m=this._fin?0:2048,E=this._h[0],A=this._h[1],I=this._h[2],S=this._h[3],R=this._h[4],j=this._h[5],H=this._h[6],T=this._h[7],F=this._h[8],v=this._h[9],D=this._r[0],y=this._r[1],a=this._r[2],g=this._r[3],z=this._r[4],w=this._r[5],C=this._r[6],U=this._r[7],W=this._r[8],x=this._r[9];p>=16;){var O=o[h+0]|o[h+1]<<8;E+=O&8191;var Y=o[h+2]|o[h+3]<<8;A+=(O>>>13|Y<<3)&8191;var J=o[h+4]|o[h+5]<<8;I+=(Y>>>10|J<<6)&8191;var G=o[h+6]|o[h+7]<<8;S+=(J>>>7|G<<9)&8191;var q=o[h+8]|o[h+9]<<8;R+=(G>>>4|q<<12)&8191,j+=q>>>1&8191;var V=o[h+10]|o[h+11]<<8;H+=(q>>>14|V<<2)&8191;var X=o[h+12]|o[h+13]<<8;T+=(V>>>11|X<<5)&8191;var te=o[h+14]|o[h+15]<<8;F+=(X>>>8|te<<8)&8191,v+=te>>>5|m;var Q=0,ae=Q;ae+=E*D,ae+=A*(5*x),ae+=I*(5*W),ae+=S*(5*U),ae+=R*(5*C),Q=ae>>>13,ae&=8191,ae+=j*(5*w),ae+=H*(5*z),ae+=T*(5*g),ae+=F*(5*a),ae+=v*(5*y),Q+=ae>>>13,ae&=8191;var ie=Q;ie+=E*y,ie+=A*D,ie+=I*(5*x),ie+=S*(5*W),ie+=R*(5*U),Q=ie>>>13,ie&=8191,ie+=j*(5*C),ie+=H*(5*w),ie+=T*(5*z),ie+=F*(5*g),ie+=v*(5*a),Q+=ie>>>13,ie&=8191;var le=Q;le+=E*a,le+=A*y,le+=I*D,le+=S*(5*x),le+=R*(5*W),Q=le>>>13,le&=8191,le+=j*(5*U),le+=H*(5*C),le+=T*(5*w),le+=F*(5*z),le+=v*(5*g),Q+=le>>>13,le&=8191;var k=Q;k+=E*g,k+=A*a,k+=I*y,k+=S*D,k+=R*(5*x),Q=k>>>13,k&=8191,k+=j*(5*W),k+=H*(5*U),k+=T*(5*C),k+=F*(5*w),k+=v*(5*z),Q+=k>>>13,k&=8191;var B=Q;B+=E*z,B+=A*g,B+=I*a,B+=S*y,B+=R*D,Q=B>>>13,B&=8191,B+=j*(5*x),B+=H*(5*W),B+=T*(5*U),B+=F*(5*C),B+=v*(5*w),Q+=B>>>13,B&=8191;var L=Q;L+=E*w,L+=A*z,L+=I*g,L+=S*a,L+=R*y,Q=L>>>13,L&=8191,L+=j*D,L+=H*(5*x),L+=T*(5*W),L+=F*(5*U),L+=v*(5*C),Q+=L>>>13,L&=8191;var f=Q;f+=E*C,f+=A*w,f+=I*z,f+=S*g,f+=R*a,Q=f>>>13,f&=8191,f+=j*y,f+=H*D,f+=T*(5*x),f+=F*(5*W),f+=v*(5*U),Q+=f>>>13,f&=8191;var P=Q;P+=E*U,P+=A*C,P+=I*w,P+=S*z,P+=R*g,Q=P>>>13,P&=8191,P+=j*a,P+=H*y,P+=T*D,P+=F*(5*x),P+=v*(5*W),Q+=P>>>13,P&=8191;var ee=Q;ee+=E*W,ee+=A*U,ee+=I*C,ee+=S*w,ee+=R*z,Q=ee>>>13,ee&=8191,ee+=j*g,ee+=H*a,ee+=T*y,ee+=F*D,ee+=v*(5*x),Q+=ee>>>13,ee&=8191;var re=Q;re+=E*x,re+=A*W,re+=I*U,re+=S*C,re+=R*w,Q=re>>>13,re&=8191,re+=j*z,re+=H*g,re+=T*a,re+=F*y,re+=v*D,Q+=re>>>13,re&=8191,Q=(Q<<2)+Q|0,Q=Q+ae|0,ae=Q&8191,Q=Q>>>13,ie+=Q,E=ae,A=ie,I=le,S=k,R=B,j=L,H=f,T=P,F=ee,v=re,h+=16,p-=16}this._h[0]=E,this._h[1]=A,this._h[2]=I,this._h[3]=S,this._h[4]=R,this._h[5]=j,this._h[6]=H,this._h[7]=T,this._h[8]=F,this._h[9]=v},c.prototype.finish=function(o,h){h===void 0&&(h=0);var p=new Uint16Array(10),m,E,A,I;if(this._leftover){for(I=this._leftover,this._buffer[I++]=1;I<16;I++)this._buffer[I]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(m=this._h[1]>>>13,this._h[1]&=8191,I=2;I<10;I++)this._h[I]+=m,m=this._h[I]>>>13,this._h[I]&=8191;for(this._h[0]+=m*5,m=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=m,m=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=m,p[0]=this._h[0]+5,m=p[0]>>>13,p[0]&=8191,I=1;I<10;I++)p[I]=this._h[I]+m,m=p[I]>>>13,p[I]&=8191;for(p[9]-=8192,E=(m^1)-1,I=0;I<10;I++)p[I]&=E;for(E=~E,I=0;I<10;I++)this._h[I]=this._h[I]&E|p[I];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,A=this._h[0]+this._pad[0],this._h[0]=A&65535,I=1;I<8;I++)A=(this._h[I]+this._pad[I]|0)+(A>>>16)|0,this._h[I]=A&65535;return o[h+0]=this._h[0]>>>0,o[h+1]=this._h[0]>>>8,o[h+2]=this._h[1]>>>0,o[h+3]=this._h[1]>>>8,o[h+4]=this._h[2]>>>0,o[h+5]=this._h[2]>>>8,o[h+6]=this._h[3]>>>0,o[h+7]=this._h[3]>>>8,o[h+8]=this._h[4]>>>0,o[h+9]=this._h[4]>>>8,o[h+10]=this._h[5]>>>0,o[h+11]=this._h[5]>>>8,o[h+12]=this._h[6]>>>0,o[h+13]=this._h[6]>>>8,o[h+14]=this._h[7]>>>0,o[h+15]=this._h[7]>>>8,this._finished=!0,this},c.prototype.update=function(o){var h=0,p=o.length,m;if(this._leftover){m=16-this._leftover,m>p&&(m=p);for(var E=0;E<m;E++)this._buffer[this._leftover+E]=o[h+E];if(p-=m,h+=m,this._leftover+=m,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(p>=16&&(m=p-p%16,this._blocks(o,h,m),h+=m,p-=m),p){for(var E=0;E<p;E++)this._buffer[this._leftover+E]=o[h+E];this._leftover+=p}return this},c.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var o=new Uint8Array(16);return this.finish(o),o},c.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},c}();e.Poly1305=n;function i(c,o){var h=new n(c);h.update(o);var p=h.digest();return h.clean(),p}e.oneTimeAuth=i;function s(c,o){return c.length!==e.DIGEST_LENGTH||o.length!==e.DIGEST_LENGTH?!1:t.equal(c,o)}e.equal=s})(Uu);(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Wi,r=Uu,n=kt,i=ge,s=Dr;e.KEY_LENGTH=32,e.NONCE_LENGTH=12,e.TAG_LENGTH=16;var c=new Uint8Array(16),o=function(){function h(p){if(this.nonceLength=e.NONCE_LENGTH,this.tagLength=e.TAG_LENGTH,p.length!==e.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(p)}return h.prototype.seal=function(p,m,E,A){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var I=new Uint8Array(16);I.set(p,I.length-p.length);var S=new Uint8Array(32);t.stream(this._key,I,S,4);var R=m.length+this.tagLength,j;if(A){if(A.length!==R)throw new Error("ChaCha20Poly1305: incorrect destination length");j=A}else j=new Uint8Array(R);return t.streamXOR(this._key,I,m,j,4),this._authenticate(j.subarray(j.length-this.tagLength,j.length),S,j.subarray(0,j.length-this.tagLength),E),n.wipe(I),j},h.prototype.open=function(p,m,E,A){if(p.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(m.length<this.tagLength)return null;var I=new Uint8Array(16);I.set(p,I.length-p.length);var S=new Uint8Array(32);t.stream(this._key,I,S,4);var R=new Uint8Array(this.tagLength);if(this._authenticate(R,S,m.subarray(0,m.length-this.tagLength),E),!s.equal(R,m.subarray(m.length-this.tagLength,m.length)))return null;var j=m.length-this.tagLength,H;if(A){if(A.length!==j)throw new Error("ChaCha20Poly1305: incorrect destination length");H=A}else H=new Uint8Array(j);return t.streamXOR(this._key,I,m.subarray(0,m.length-this.tagLength),H,4),n.wipe(I),H},h.prototype.clean=function(){return n.wipe(this._key),this},h.prototype._authenticate=function(p,m,E,A){var I=new r.Poly1305(m);A&&(I.update(A),A.length%16>0&&I.update(c.subarray(A.length%16))),I.update(E),E.length%16>0&&I.update(c.subarray(E.length%16));var S=new Uint8Array(8);A&&i.writeUint64LE(A.length,S),I.update(S),i.writeUint64LE(E.length,S),I.update(S);for(var R=I.digest(),j=0;j<R.length;j++)p[j]=R[j];I.clean(),n.wipe(R),n.wipe(S)},h}();e.ChaCha20Poly1305=o})(eo);var Mu={},qn={},to={};Object.defineProperty(to,"__esModule",{value:!0});function Qg(e){return typeof e.saveState<"u"&&typeof e.restoreState<"u"&&typeof e.cleanSavedState<"u"}to.isSerializableHash=Qg;Object.defineProperty(qn,"__esModule",{value:!0});var Zt=to,e1=Dr,t1=kt,Bu=function(){function e(t,r){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var n=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(n).clean():n.set(r);for(var i=0;i<n.length;i++)n[i]^=54;this._inner.update(n);for(var i=0;i<n.length;i++)n[i]^=106;this._outer.update(n),Zt.isSerializableHash(this._inner)&&Zt.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),t1.wipe(n)}return e.prototype.reset=function(){if(!Zt.isSerializableHash(this._inner)||!Zt.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){Zt.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Zt.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(t){return this._inner.update(t),this},e.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},e.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},e.prototype.saveState=function(){if(!Zt.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(t){if(!Zt.isSerializableHash(this._inner)||!Zt.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(t){if(!Zt.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},e}();qn.HMAC=Bu;function r1(e,t,r){var n=new Bu(e,t);n.update(r);var i=n.digest();return n.clean(),i}qn.hmac=r1;qn.equal=e1.equal;Object.defineProperty(Mu,"__esModule",{value:!0});var Sa=qn,Da=kt,n1=function(){function e(t,r,n,i){n===void 0&&(n=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=i;var s=Sa.hmac(this._hash,n,r);this._hmac=new Sa.HMAC(t,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(t){for(var r=new Uint8Array(t),n=0;n<r.length;n++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[n]=this._buffer[this._bufpos++];return r},e.prototype.clean=function(){this._hmac.clean(),Da.wipe(this._buffer),Da.wipe(this._counter),this._bufpos=0},e}(),i1=Mu.HKDF=n1,Vi={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=ge,r=kt;e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var n=function(){function o(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return o.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},o.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},o.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},o.prototype.update=function(h,p){if(p===void 0&&(p=h.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var m=0;if(this._bytesHashed+=p,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&p>0;)this._buffer[this._bufferLength++]=h[m++],p--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(p>=this.blockSize&&(m=s(this._temp,this._state,h,m,p),p%=this.blockSize);p>0;)this._buffer[this._bufferLength++]=h[m++],p--;return this},o.prototype.finish=function(h){if(!this._finished){var p=this._bytesHashed,m=this._bufferLength,E=p/536870912|0,A=p<<3,I=p%64<56?64:128;this._buffer[m]=128;for(var S=m+1;S<I-8;S++)this._buffer[S]=0;t.writeUint32BE(E,this._buffer,I-8),t.writeUint32BE(A,this._buffer,I-4),s(this._temp,this._state,this._buffer,0,I),this._finished=!0}for(var S=0;S<this.digestLength/4;S++)t.writeUint32BE(this._state[S],h,S*4);return this},o.prototype.digest=function(){var h=new Uint8Array(this.digestLength);return this.finish(h),h},o.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},o.prototype.restoreState=function(h){return this._state.set(h.state),this._bufferLength=h.bufferLength,h.buffer&&this._buffer.set(h.buffer),this._bytesHashed=h.bytesHashed,this._finished=!1,this},o.prototype.cleanSavedState=function(h){r.wipe(h.state),h.buffer&&r.wipe(h.buffer),h.bufferLength=0,h.bytesHashed=0},o}();e.SHA256=n;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(o,h,p,m,E){for(;E>=64;){for(var A=h[0],I=h[1],S=h[2],R=h[3],j=h[4],H=h[5],T=h[6],F=h[7],v=0;v<16;v++){var D=m+v*4;o[v]=t.readUint32BE(p,D)}for(var v=16;v<64;v++){var y=o[v-2],a=(y>>>17|y<<32-17)^(y>>>19|y<<32-19)^y>>>10;y=o[v-15];var g=(y>>>7|y<<32-7)^(y>>>18|y<<32-18)^y>>>3;o[v]=(a+o[v-7]|0)+(g+o[v-16]|0)}for(var v=0;v<64;v++){var a=(((j>>>6|j<<26)^(j>>>11|j<<21)^(j>>>25|j<<7))+(j&H^~j&T)|0)+(F+(i[v]+o[v]|0)|0)|0,g=((A>>>2|A<<32-2)^(A>>>13|A<<32-13)^(A>>>22|A<<32-22))+(A&I^A&S^I&S)|0;F=T,T=H,H=j,j=R+a|0,R=S,S=I,I=A,A=a+g|0}h[0]+=A,h[1]+=I,h[2]+=S,h[3]+=R,h[4]+=j,h[5]+=H,h[6]+=T,h[7]+=F,m+=64,E-=64}return m}function c(o){var h=new n;h.update(o);var p=h.digest();return h.clean(),p}e.hash=c})(Vi);var ro={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sharedKey=e.generateKeyPair=e.generateKeyPairFromSeed=e.scalarMultBase=e.scalarMult=e.SHARED_KEY_LENGTH=e.SECRET_KEY_LENGTH=e.PUBLIC_KEY_LENGTH=void 0;const t=cn,r=kt;e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=32,e.SHARED_KEY_LENGTH=32;function n(v){const D=new Float64Array(16);if(v)for(let y=0;y<v.length;y++)D[y]=v[y];return D}const i=new Uint8Array(32);i[0]=9;const s=n([56129,1]);function c(v){let D=1;for(let y=0;y<16;y++){let a=v[y]+D+65535;D=Math.floor(a/65536),v[y]=a-D*65536}v[0]+=D-1+37*(D-1)}function o(v,D,y){const a=~(y-1);for(let g=0;g<16;g++){const z=a&(v[g]^D[g]);v[g]^=z,D[g]^=z}}function h(v,D){const y=n(),a=n();for(let g=0;g<16;g++)a[g]=D[g];c(a),c(a),c(a);for(let g=0;g<2;g++){y[0]=a[0]-65517;for(let w=1;w<15;w++)y[w]=a[w]-65535-(y[w-1]>>16&1),y[w-1]&=65535;y[15]=a[15]-32767-(y[14]>>16&1);const z=y[15]>>16&1;y[14]&=65535,o(a,y,1-z)}for(let g=0;g<16;g++)v[2*g]=a[g]&255,v[2*g+1]=a[g]>>8}function p(v,D){for(let y=0;y<16;y++)v[y]=D[2*y]+(D[2*y+1]<<8);v[15]&=32767}function m(v,D,y){for(let a=0;a<16;a++)v[a]=D[a]+y[a]}function E(v,D,y){for(let a=0;a<16;a++)v[a]=D[a]-y[a]}function A(v,D,y){let a,g,z=0,w=0,C=0,U=0,W=0,x=0,O=0,Y=0,J=0,G=0,q=0,V=0,X=0,te=0,Q=0,ae=0,ie=0,le=0,k=0,B=0,L=0,f=0,P=0,ee=0,re=0,de=0,Se=0,_e=0,De=0,je=0,$e=0,Ee=y[0],be=y[1],he=y[2],ye=y[3],we=y[4],fe=y[5],pe=y[6],d=y[7],u=y[8],l=y[9],b=y[10],N=y[11],M=y[12],K=y[13],se=y[14],ce=y[15];a=D[0],z+=a*Ee,w+=a*be,C+=a*he,U+=a*ye,W+=a*we,x+=a*fe,O+=a*pe,Y+=a*d,J+=a*u,G+=a*l,q+=a*b,V+=a*N,X+=a*M,te+=a*K,Q+=a*se,ae+=a*ce,a=D[1],w+=a*Ee,C+=a*be,U+=a*he,W+=a*ye,x+=a*we,O+=a*fe,Y+=a*pe,J+=a*d,G+=a*u,q+=a*l,V+=a*b,X+=a*N,te+=a*M,Q+=a*K,ae+=a*se,ie+=a*ce,a=D[2],C+=a*Ee,U+=a*be,W+=a*he,x+=a*ye,O+=a*we,Y+=a*fe,J+=a*pe,G+=a*d,q+=a*u,V+=a*l,X+=a*b,te+=a*N,Q+=a*M,ae+=a*K,ie+=a*se,le+=a*ce,a=D[3],U+=a*Ee,W+=a*be,x+=a*he,O+=a*ye,Y+=a*we,J+=a*fe,G+=a*pe,q+=a*d,V+=a*u,X+=a*l,te+=a*b,Q+=a*N,ae+=a*M,ie+=a*K,le+=a*se,k+=a*ce,a=D[4],W+=a*Ee,x+=a*be,O+=a*he,Y+=a*ye,J+=a*we,G+=a*fe,q+=a*pe,V+=a*d,X+=a*u,te+=a*l,Q+=a*b,ae+=a*N,ie+=a*M,le+=a*K,k+=a*se,B+=a*ce,a=D[5],x+=a*Ee,O+=a*be,Y+=a*he,J+=a*ye,G+=a*we,q+=a*fe,V+=a*pe,X+=a*d,te+=a*u,Q+=a*l,ae+=a*b,ie+=a*N,le+=a*M,k+=a*K,B+=a*se,L+=a*ce,a=D[6],O+=a*Ee,Y+=a*be,J+=a*he,G+=a*ye,q+=a*we,V+=a*fe,X+=a*pe,te+=a*d,Q+=a*u,ae+=a*l,ie+=a*b,le+=a*N,k+=a*M,B+=a*K,L+=a*se,f+=a*ce,a=D[7],Y+=a*Ee,J+=a*be,G+=a*he,q+=a*ye,V+=a*we,X+=a*fe,te+=a*pe,Q+=a*d,ae+=a*u,ie+=a*l,le+=a*b,k+=a*N,B+=a*M,L+=a*K,f+=a*se,P+=a*ce,a=D[8],J+=a*Ee,G+=a*be,q+=a*he,V+=a*ye,X+=a*we,te+=a*fe,Q+=a*pe,ae+=a*d,ie+=a*u,le+=a*l,k+=a*b,B+=a*N,L+=a*M,f+=a*K,P+=a*se,ee+=a*ce,a=D[9],G+=a*Ee,q+=a*be,V+=a*he,X+=a*ye,te+=a*we,Q+=a*fe,ae+=a*pe,ie+=a*d,le+=a*u,k+=a*l,B+=a*b,L+=a*N,f+=a*M,P+=a*K,ee+=a*se,re+=a*ce,a=D[10],q+=a*Ee,V+=a*be,X+=a*he,te+=a*ye,Q+=a*we,ae+=a*fe,ie+=a*pe,le+=a*d,k+=a*u,B+=a*l,L+=a*b,f+=a*N,P+=a*M,ee+=a*K,re+=a*se,de+=a*ce,a=D[11],V+=a*Ee,X+=a*be,te+=a*he,Q+=a*ye,ae+=a*we,ie+=a*fe,le+=a*pe,k+=a*d,B+=a*u,L+=a*l,f+=a*b,P+=a*N,ee+=a*M,re+=a*K,de+=a*se,Se+=a*ce,a=D[12],X+=a*Ee,te+=a*be,Q+=a*he,ae+=a*ye,ie+=a*we,le+=a*fe,k+=a*pe,B+=a*d,L+=a*u,f+=a*l,P+=a*b,ee+=a*N,re+=a*M,de+=a*K,Se+=a*se,_e+=a*ce,a=D[13],te+=a*Ee,Q+=a*be,ae+=a*he,ie+=a*ye,le+=a*we,k+=a*fe,B+=a*pe,L+=a*d,f+=a*u,P+=a*l,ee+=a*b,re+=a*N,de+=a*M,Se+=a*K,_e+=a*se,De+=a*ce,a=D[14],Q+=a*Ee,ae+=a*be,ie+=a*he,le+=a*ye,k+=a*we,B+=a*fe,L+=a*pe,f+=a*d,P+=a*u,ee+=a*l,re+=a*b,de+=a*N,Se+=a*M,_e+=a*K,De+=a*se,je+=a*ce,a=D[15],ae+=a*Ee,ie+=a*be,le+=a*he,k+=a*ye,B+=a*we,L+=a*fe,f+=a*pe,P+=a*d,ee+=a*u,re+=a*l,de+=a*b,Se+=a*N,_e+=a*M,De+=a*K,je+=a*se,$e+=a*ce,z+=38*ie,w+=38*le,C+=38*k,U+=38*B,W+=38*L,x+=38*f,O+=38*P,Y+=38*ee,J+=38*re,G+=38*de,q+=38*Se,V+=38*_e,X+=38*De,te+=38*je,Q+=38*$e,g=1,a=z+g+65535,g=Math.floor(a/65536),z=a-g*65536,a=w+g+65535,g=Math.floor(a/65536),w=a-g*65536,a=C+g+65535,g=Math.floor(a/65536),C=a-g*65536,a=U+g+65535,g=Math.floor(a/65536),U=a-g*65536,a=W+g+65535,g=Math.floor(a/65536),W=a-g*65536,a=x+g+65535,g=Math.floor(a/65536),x=a-g*65536,a=O+g+65535,g=Math.floor(a/65536),O=a-g*65536,a=Y+g+65535,g=Math.floor(a/65536),Y=a-g*65536,a=J+g+65535,g=Math.floor(a/65536),J=a-g*65536,a=G+g+65535,g=Math.floor(a/65536),G=a-g*65536,a=q+g+65535,g=Math.floor(a/65536),q=a-g*65536,a=V+g+65535,g=Math.floor(a/65536),V=a-g*65536,a=X+g+65535,g=Math.floor(a/65536),X=a-g*65536,a=te+g+65535,g=Math.floor(a/65536),te=a-g*65536,a=Q+g+65535,g=Math.floor(a/65536),Q=a-g*65536,a=ae+g+65535,g=Math.floor(a/65536),ae=a-g*65536,z+=g-1+37*(g-1),g=1,a=z+g+65535,g=Math.floor(a/65536),z=a-g*65536,a=w+g+65535,g=Math.floor(a/65536),w=a-g*65536,a=C+g+65535,g=Math.floor(a/65536),C=a-g*65536,a=U+g+65535,g=Math.floor(a/65536),U=a-g*65536,a=W+g+65535,g=Math.floor(a/65536),W=a-g*65536,a=x+g+65535,g=Math.floor(a/65536),x=a-g*65536,a=O+g+65535,g=Math.floor(a/65536),O=a-g*65536,a=Y+g+65535,g=Math.floor(a/65536),Y=a-g*65536,a=J+g+65535,g=Math.floor(a/65536),J=a-g*65536,a=G+g+65535,g=Math.floor(a/65536),G=a-g*65536,a=q+g+65535,g=Math.floor(a/65536),q=a-g*65536,a=V+g+65535,g=Math.floor(a/65536),V=a-g*65536,a=X+g+65535,g=Math.floor(a/65536),X=a-g*65536,a=te+g+65535,g=Math.floor(a/65536),te=a-g*65536,a=Q+g+65535,g=Math.floor(a/65536),Q=a-g*65536,a=ae+g+65535,g=Math.floor(a/65536),ae=a-g*65536,z+=g-1+37*(g-1),v[0]=z,v[1]=w,v[2]=C,v[3]=U,v[4]=W,v[5]=x,v[6]=O,v[7]=Y,v[8]=J,v[9]=G,v[10]=q,v[11]=V,v[12]=X,v[13]=te,v[14]=Q,v[15]=ae}function I(v,D){A(v,D,D)}function S(v,D){const y=n();for(let a=0;a<16;a++)y[a]=D[a];for(let a=253;a>=0;a--)I(y,y),a!==2&&a!==4&&A(y,y,D);for(let a=0;a<16;a++)v[a]=y[a]}function R(v,D){const y=new Uint8Array(32),a=new Float64Array(80),g=n(),z=n(),w=n(),C=n(),U=n(),W=n();for(let J=0;J<31;J++)y[J]=v[J];y[31]=v[31]&127|64,y[0]&=248,p(a,D);for(let J=0;J<16;J++)z[J]=a[J];g[0]=C[0]=1;for(let J=254;J>=0;--J){const G=y[J>>>3]>>>(J&7)&1;o(g,z,G),o(w,C,G),m(U,g,w),E(g,g,w),m(w,z,C),E(z,z,C),I(C,U),I(W,g),A(g,w,g),A(w,z,U),m(U,g,w),E(g,g,w),I(z,g),E(w,C,W),A(g,w,s),m(g,g,C),A(w,w,g),A(g,C,W),A(C,z,a),I(z,U),o(g,z,G),o(w,C,G)}for(let J=0;J<16;J++)a[J+16]=g[J],a[J+32]=w[J],a[J+48]=z[J],a[J+64]=C[J];const x=a.subarray(32),O=a.subarray(16);S(x,x),A(O,O,x);const Y=new Uint8Array(32);return h(Y,O),Y}e.scalarMult=R;function j(v){return R(v,i)}e.scalarMultBase=j;function H(v){if(v.length!==e.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${e.SECRET_KEY_LENGTH} bytes`);const D=new Uint8Array(v);return{publicKey:j(D),secretKey:D}}e.generateKeyPairFromSeed=H;function T(v){const D=(0,t.randomBytes)(32,v),y=H(D);return(0,r.wipe)(D),y}e.generateKeyPair=T;function F(v,D,y=!1){if(v.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(D.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const a=R(v,D);if(y){let g=0;for(let z=0;z<a.length;z++)g|=a[z];if(g===0)throw new Error("X25519: invalid shared key")}return a}e.sharedKey=F})(ro);var Ia=globalThis&&globalThis.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))},s1=function(){function e(t,r,n){this.name=t,this.version=r,this.os=n,this.type="browser"}return e}(),o1=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),a1=function(){function e(t,r,n,i){this.name=t,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return e}(),c1=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),u1=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),l1=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,f1=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Oa=3,h1=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",l1]],Aa=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function d1(e){return e?Ca(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new u1:typeof navigator<"u"?Ca(navigator.userAgent):y1()}function p1(e){return e!==""&&h1.reduce(function(t,r){var n=r[0],i=r[1];if(t)return t;var s=i.exec(e);return!!s&&[n,s]},!1)}function Ca(e){var t=p1(e);if(!t)return null;var r=t[0],n=t[1];if(r==="searchbot")return new c1;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Oa&&(i=Ia(Ia([],i,!0),m1(Oa-i.length),!0)):i=[];var s=i.join("."),c=g1(e),o=f1.exec(e);return o&&o[1]?new a1(r,s,c,o[1]):new s1(r,s,c)}function g1(e){for(var t=0,r=Aa.length;t<r;t++){var n=Aa[t],i=n[0],s=n[1],c=s.exec(e);if(c)return i}return null}function y1(){var e=typeof process<"u"&&process.version;return e?new o1(process.version.slice(1)):null}function m1(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}var Le={};Object.defineProperty(Le,"__esModule",{value:!0});Le.getLocalStorage=Le.getLocalStorageOrThrow=Le.getCrypto=Le.getCryptoOrThrow=ku=Le.getLocation=Le.getLocationOrThrow=no=Le.getNavigator=Le.getNavigatorOrThrow=ju=Le.getDocument=Le.getDocumentOrThrow=Le.getFromWindowOrThrow=Le.getFromWindow=void 0;function Br(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}Le.getFromWindow=Br;function un(e){const t=Br(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Le.getFromWindowOrThrow=un;function b1(){return un("document")}Le.getDocumentOrThrow=b1;function w1(){return Br("document")}var ju=Le.getDocument=w1;function _1(){return un("navigator")}Le.getNavigatorOrThrow=_1;function E1(){return Br("navigator")}var no=Le.getNavigator=E1;function v1(){return un("location")}Le.getLocationOrThrow=v1;function x1(){return Br("location")}var ku=Le.getLocation=x1;function S1(){return un("crypto")}Le.getCryptoOrThrow=S1;function D1(){return Br("crypto")}Le.getCrypto=D1;function I1(){return un("localStorage")}Le.getLocalStorageOrThrow=I1;function O1(){return Br("localStorage")}Le.getLocalStorage=O1;var io={};Object.defineProperty(io,"__esModule",{value:!0});var zu=io.getWindowMetadata=void 0;const Ta=Le;function A1(){let e,t;try{e=Ta.getDocumentOrThrow(),t=Ta.getLocationOrThrow()}catch{return null}function r(){const E=e.getElementsByTagName("link"),A=[];for(let I=0;I<E.length;I++){const S=E[I],R=S.getAttribute("rel");if(R&&R.toLowerCase().indexOf("icon")>-1){const j=S.getAttribute("href");if(j)if(j.toLowerCase().indexOf("https:")===-1&&j.toLowerCase().indexOf("http:")===-1&&j.indexOf("//")!==0){let H=t.protocol+"//"+t.host;if(j.indexOf("/")===0)H+=j;else{const T=t.pathname.split("/");T.pop();const F=T.join("/");H+=F+"/"+j}A.push(H)}else if(j.indexOf("//")===0){const H=t.protocol+j;A.push(H)}else A.push(j)}}return A}function n(...E){const A=e.getElementsByTagName("meta");for(let I=0;I<A.length;I++){const S=A[I],R=["itemprop","property","name"].map(j=>S.getAttribute(j)).filter(j=>j?E.includes(j):!1);if(R.length&&R){const j=S.getAttribute("content");if(j)return j}}return""}function i(){let E=n("name","og:site_name","og:title","twitter:title");return E||(E=e.title),E}function s(){return n("description","og:description","twitter:description","keywords")}const c=i(),o=s(),h=t.origin,p=r();return{description:o,url:h,icons:p,name:c}}zu=io.getWindowMetadata=A1;var $n={},C1=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),Ku="%[a-f0-9]{2}",Ra=new RegExp("("+Ku+")|([^%]+?)","gi"),Pa=new RegExp("("+Ku+")+","gi");function Cs(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],Cs(r),Cs(n))}function T1(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(Ra)||[],r=1;r<t.length;r++)e=Cs(t,r).join(""),t=e.match(Ra)||[];return e}}function R1(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=Pa.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{var n=T1(r[0]);n!==r[0]&&(t[r[0]]=n)}r=Pa.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),s=0;s<i.length;s++){var c=i[s];e=e.replace(new RegExp(c,"g"),t[c])}return e}var P1=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return R1(e)}},N1=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]},F1=function(e,t){for(var r={},n=Object.keys(e),i=Array.isArray(t),s=0;s<n.length;s++){var c=n[s],o=e[c];(i?t.indexOf(c)!==-1:t(c,o,e))&&(r[c]=o)}return r};(function(e){const t=C1,r=P1,n=N1,i=F1,s=T=>T==null,c=Symbol("encodeFragmentIdentifier");function o(T){switch(T.arrayFormat){case"index":return F=>(v,D)=>{const y=v.length;return D===void 0||T.skipNull&&D===null||T.skipEmptyString&&D===""?v:D===null?[...v,[m(F,T),"[",y,"]"].join("")]:[...v,[m(F,T),"[",m(y,T),"]=",m(D,T)].join("")]};case"bracket":return F=>(v,D)=>D===void 0||T.skipNull&&D===null||T.skipEmptyString&&D===""?v:D===null?[...v,[m(F,T),"[]"].join("")]:[...v,[m(F,T),"[]=",m(D,T)].join("")];case"colon-list-separator":return F=>(v,D)=>D===void 0||T.skipNull&&D===null||T.skipEmptyString&&D===""?v:D===null?[...v,[m(F,T),":list="].join("")]:[...v,[m(F,T),":list=",m(D,T)].join("")];case"comma":case"separator":case"bracket-separator":{const F=T.arrayFormat==="bracket-separator"?"[]=":"=";return v=>(D,y)=>y===void 0||T.skipNull&&y===null||T.skipEmptyString&&y===""?D:(y=y===null?"":y,D.length===0?[[m(v,T),F,m(y,T)].join("")]:[[D,m(y,T)].join(T.arrayFormatSeparator)])}default:return F=>(v,D)=>D===void 0||T.skipNull&&D===null||T.skipEmptyString&&D===""?v:D===null?[...v,m(F,T)]:[...v,[m(F,T),"=",m(D,T)].join("")]}}function h(T){let F;switch(T.arrayFormat){case"index":return(v,D,y)=>{if(F=/\[(\d*)\]$/.exec(v),v=v.replace(/\[\d*\]$/,""),!F){y[v]=D;return}y[v]===void 0&&(y[v]={}),y[v][F[1]]=D};case"bracket":return(v,D,y)=>{if(F=/(\[\])$/.exec(v),v=v.replace(/\[\]$/,""),!F){y[v]=D;return}if(y[v]===void 0){y[v]=[D];return}y[v]=[].concat(y[v],D)};case"colon-list-separator":return(v,D,y)=>{if(F=/(:list)$/.exec(v),v=v.replace(/:list$/,""),!F){y[v]=D;return}if(y[v]===void 0){y[v]=[D];return}y[v]=[].concat(y[v],D)};case"comma":case"separator":return(v,D,y)=>{const a=typeof D=="string"&&D.includes(T.arrayFormatSeparator),g=typeof D=="string"&&!a&&E(D,T).includes(T.arrayFormatSeparator);D=g?E(D,T):D;const z=a||g?D.split(T.arrayFormatSeparator).map(w=>E(w,T)):D===null?D:E(D,T);y[v]=z};case"bracket-separator":return(v,D,y)=>{const a=/(\[\])$/.test(v);if(v=v.replace(/\[\]$/,""),!a){y[v]=D&&E(D,T);return}const g=D===null?[]:D.split(T.arrayFormatSeparator).map(z=>E(z,T));if(y[v]===void 0){y[v]=g;return}y[v]=[].concat(y[v],g)};default:return(v,D,y)=>{if(y[v]===void 0){y[v]=D;return}y[v]=[].concat(y[v],D)}}}function p(T){if(typeof T!="string"||T.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function m(T,F){return F.encode?F.strict?t(T):encodeURIComponent(T):T}function E(T,F){return F.decode?r(T):T}function A(T){return Array.isArray(T)?T.sort():typeof T=="object"?A(Object.keys(T)).sort((F,v)=>Number(F)-Number(v)).map(F=>T[F]):T}function I(T){const F=T.indexOf("#");return F!==-1&&(T=T.slice(0,F)),T}function S(T){let F="";const v=T.indexOf("#");return v!==-1&&(F=T.slice(v)),F}function R(T){T=I(T);const F=T.indexOf("?");return F===-1?"":T.slice(F+1)}function j(T,F){return F.parseNumbers&&!Number.isNaN(Number(T))&&typeof T=="string"&&T.trim()!==""?T=Number(T):F.parseBooleans&&T!==null&&(T.toLowerCase()==="true"||T.toLowerCase()==="false")&&(T=T.toLowerCase()==="true"),T}function H(T,F){F=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},F),p(F.arrayFormatSeparator);const v=h(F),D=Object.create(null);if(typeof T!="string"||(T=T.trim().replace(/^[?#&]/,""),!T))return D;for(const y of T.split("&")){if(y==="")continue;let[a,g]=n(F.decode?y.replace(/\+/g," "):y,"=");g=g===void 0?null:["comma","separator","bracket-separator"].includes(F.arrayFormat)?g:E(g,F),v(E(a,F),g,D)}for(const y of Object.keys(D)){const a=D[y];if(typeof a=="object"&&a!==null)for(const g of Object.keys(a))a[g]=j(a[g],F);else D[y]=j(a,F)}return F.sort===!1?D:(F.sort===!0?Object.keys(D).sort():Object.keys(D).sort(F.sort)).reduce((y,a)=>{const g=D[a];return g&&typeof g=="object"&&!Array.isArray(g)?y[a]=A(g):y[a]=g,y},Object.create(null))}e.extract=R,e.parse=H,e.stringify=(T,F)=>{if(!T)return"";F=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},F),p(F.arrayFormatSeparator);const v=g=>F.skipNull&&s(T[g])||F.skipEmptyString&&T[g]==="",D=o(F),y={};for(const g of Object.keys(T))v(g)||(y[g]=T[g]);const a=Object.keys(y);return F.sort!==!1&&a.sort(F.sort),a.map(g=>{const z=T[g];return z===void 0?"":z===null?m(g,F):Array.isArray(z)?z.length===0&&F.arrayFormat==="bracket-separator"?m(g,F)+"[]":z.reduce(D(g),[]).join("&"):m(g,F)+"="+m(z,F)}).filter(g=>g.length>0).join("&")},e.parseUrl=(T,F)=>{F=Object.assign({decode:!0},F);const[v,D]=n(T,"#");return Object.assign({url:v.split("?")[0]||"",query:H(R(T),F)},F&&F.parseFragmentIdentifier&&D?{fragmentIdentifier:E(D,F)}:{})},e.stringifyUrl=(T,F)=>{F=Object.assign({encode:!0,strict:!0,[c]:!0},F);const v=I(T.url).split("?")[0]||"",D=e.extract(T.url),y=e.parse(D,{sort:!1}),a=Object.assign(y,T.query);let g=e.stringify(a,F);g&&(g=`?${g}`);let z=S(T.url);return T.fragmentIdentifier&&(z=`#${F[c]?m(T.fragmentIdentifier,F):T.fragmentIdentifier}`),`${v}${g}${z}`},e.pick=(T,F,v)=>{v=Object.assign({parseFragmentIdentifier:!0,[c]:!1},v);const{url:D,query:y,fragmentIdentifier:a}=e.parseUrl(T,v);return e.stringifyUrl({url:D,query:i(y,F),fragmentIdentifier:a},v)},e.exclude=(T,F,v)=>{const D=Array.isArray(F)?y=>!F.includes(y):(y,a)=>!F(y,a);return e.pick(T,D,v)}})($n);const L1={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function qu(e,t){return e.includes(":")?[e]:t.chains||[]}const Hu="base10",Tt="base16",Ts="base64pad",so="utf8",Wu=0,jr=1,U1=0,Na=1,Rs=12,oo=32;function $1(){const e=ro.generateKeyPair();return{privateKey:Rt(e.secretKey,Tt),publicKey:Rt(e.publicKey,Tt)}}function Ps(){const e=cn.randomBytes(oo);return Rt(e,Tt)}function M1(e,t){const r=ro.sharedKey(Nt(e,Tt),Nt(t,Tt)),n=new i1(Vi.SHA256,r).expand(oo);return Rt(n,Tt)}function B1(e){const t=Vi.hash(Nt(e,Tt));return Rt(t,Tt)}function $r(e){const t=Vi.hash(Nt(e,so));return Rt(t,Tt)}function j1(e){return Nt(`${e}`,Hu)}function Hn(e){return Number(Rt(e,Hu))}function k1(e){const t=j1(typeof e.type<"u"?e.type:Wu);if(Hn(t)===jr&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof e.senderPublicKey<"u"?Nt(e.senderPublicKey,Tt):void 0,n=typeof e.iv<"u"?Nt(e.iv,Tt):cn.randomBytes(Rs),i=new eo.ChaCha20Poly1305(Nt(e.symKey,Tt)).seal(n,Nt(e.message,so));return K1({type:t,sealed:i,iv:n,senderPublicKey:r})}function z1(e){const t=new eo.ChaCha20Poly1305(Nt(e.symKey,Tt)),{sealed:r,iv:n}=mi(e.encoded),i=t.open(n,r);if(i===null)throw new Error("Failed to decrypt");return Rt(i,so)}function K1(e){if(Hn(e.type)===jr){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Rt(Os([e.type,e.senderPublicKey,e.iv,e.sealed]),Ts)}return Rt(Os([e.type,e.iv,e.sealed]),Ts)}function mi(e){const t=Nt(e,Ts),r=t.slice(U1,Na),n=Na;if(Hn(r)===jr){const o=n+oo,h=o+Rs,p=t.slice(n,o),m=t.slice(o,h),E=t.slice(h);return{type:r,sealed:E,iv:m,senderPublicKey:p}}const i=n+Rs,s=t.slice(n,i),c=t.slice(i);return{type:r,sealed:c,iv:s}}function q1(e,t){const r=mi(e);return Vu({type:Hn(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?Rt(r.senderPublicKey,Tt):void 0,receiverPublicKey:t==null?void 0:t.receiverPublicKey})}function Vu(e){const t=(e==null?void 0:e.type)||Wu;if(t===jr){if(typeof(e==null?void 0:e.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(e==null?void 0:e.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e==null?void 0:e.senderPublicKey,receiverPublicKey:e==null?void 0:e.receiverPublicKey}}function Fa(e){return e.type===jr&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}var H1=Object.defineProperty,La=Object.getOwnPropertySymbols,W1=Object.prototype.hasOwnProperty,V1=Object.prototype.propertyIsEnumerable,Ua=(e,t,r)=>t in e?H1(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$a=(e,t)=>{for(var r in t||(t={}))W1.call(t,r)&&Ua(e,r,t[r]);if(La)for(var r of La(t))V1.call(t,r)&&Ua(e,r,t[r]);return e};const G1="ReactNative",Cn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Y1="js";function ao(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Gu(){return!ju()&&!!no()&&navigator.product===G1}function co(){return!ao()&&!!no()}function J1(){return Gu()?Cn.reactNative:ao()?Cn.node:co()?Cn.browser:Cn.unknown}function X1(e,t){let r=$n.parse(e);return r=$a($a({},r),t),e=$n.stringify(r),e}function Z1(){return zu()||{name:"",description:"",url:"",icons:[""]}}function Q1(){const e=d1();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function ey(){var e;const t=J1();return t===Cn.browser?[t,((e=ku())==null?void 0:e.host)||"unknown"].join(":"):t}function ty(e,t,r){const n=Q1(),i=ey();return[[e,t].join("-"),[Y1,r].join("-"),n,i].join("/")}function ry({protocol:e,version:t,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:c}){const o=r.split("?"),h=ty(e,t,n),p={auth:i,ua:h,projectId:s,useOnCloseEvent:c||void 0},m=X1(o[1]||"",p);return o[0]+"?"+m}function Ur(e,t){return e.filter(r=>t.includes(r)).length===e.length}function Yu(e){return Object.fromEntries(e.entries())}function Ju(e){return new Map(Object.entries(e))}function Zr(e=ue.FIVE_MINUTES,t){const r=ue.toMiliseconds(e||ue.FIVE_MINUTES);let n,i,s;return{resolve:c=>{s&&n&&(clearTimeout(s),n(c))},reject:c=>{s&&i&&(clearTimeout(s),i(c))},done:()=>new Promise((c,o)=>{s=setTimeout(()=>{o(new Error(t))},r),n=c,i=o})}}function bi(e,t,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),t);try{const c=await e;n(c)}catch(c){i(c)}clearTimeout(s)})}function Xu(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function ny(e){return Xu("topic",e)}function iy(e){return Xu("id",e)}function Zu(e){const[t,r]=e.split(":"),n={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")n.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return n}function tr(e,t){return ue.fromMiliseconds((t||Date.now())+ue.toMiliseconds(e))}function Er(e){return Date.now()>=ue.toMiliseconds(e)}function Qe(e,t){return`${e}${t?`:${t}`:""}`}const sy="irn";function Ns(e){return(e==null?void 0:e.relay)||{protocol:sy}}function li(e){const t=L1[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var oy=Object.defineProperty,Ma=Object.getOwnPropertySymbols,ay=Object.prototype.hasOwnProperty,cy=Object.prototype.propertyIsEnumerable,Ba=(e,t,r)=>t in e?oy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uy=(e,t)=>{for(var r in t||(t={}))ay.call(t,r)&&Ba(e,r,t[r]);if(Ma)for(var r of Ma(t))cy.call(t,r)&&Ba(e,r,t[r]);return e};function ly(e,t="-"){const r={},n="relay"+t;return Object.keys(e).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),c=e[i];r[s]=c}}),r}function fy(e){const t=e.indexOf(":"),r=e.indexOf("?")!==-1?e.indexOf("?"):void 0,n=e.substring(0,t),i=e.substring(t+1,r).split("@"),s=typeof r<"u"?e.substring(r):"",c=$n.parse(s);return{protocol:n,topic:i[0],version:parseInt(i[1],10),symKey:c.symKey,relay:ly(c)}}function hy(e,t="-"){const r="relay",n={};return Object.keys(e).forEach(i=>{const s=r+t+i;e[i]&&(n[s]=e[i])}),n}function dy(e){return`${e.protocol}:${e.topic}@${e.version}?`+$n.stringify(uy({symKey:e.symKey},hy(e.relay)))}function ln(e){const t=[];return e.forEach(r=>{const[n,i]=r.split(":");t.push(`${n}:${i}`)}),t}function py(e){const t=[];return Object.values(e).forEach(r=>{t.push(...ln(r.accounts))}),t}function gy(e,t){const r=[];return Object.values(e).forEach(n=>{ln(n.accounts).includes(t)&&r.push(...n.methods)}),r}function yy(e,t){const r=[];return Object.values(e).forEach(n=>{ln(n.accounts).includes(t)&&r.push(...n.events)}),r}function my(e,t){const r=fi(e,t);if(r)throw new Error(r.message);const n={};for(const[i,s]of Object.entries(e))n[i]={methods:s.methods,events:s.events,chains:s.accounts.map(c=>`${c.split(":")[0]}:${c.split(":")[1]}`)};return n}const by={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},wy={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ne(e,t){const{message:r,code:n}=wy[e];return{message:t?`${r} ${t}`:r,code:n}}function rt(e,t){const{message:r,code:n}=by[e];return{message:t?`${r} ${t}`:r,code:n}}function Wn(e,t){return Array.isArray(e)?typeof t<"u"&&e.length?e.every(t):!0:!1}function Rn(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Ct(e){return typeof e>"u"}function pt(e,t){return t&&Ct(e)?!0:typeof e=="string"&&!!e.trim().length}function uo(e,t){return t&&Ct(e)?!0:typeof e=="number"&&!isNaN(e)}function _y(e,t){const{requiredNamespaces:r}=t,n=Object.keys(e.namespaces),i=Object.keys(r);let s=!0;return Ur(i,n)?(n.forEach(c=>{const{accounts:o,methods:h,events:p}=e.namespaces[c],m=ln(o),E=r[c];(!Ur(qu(c,E),m)||!Ur(E.methods,h)||!Ur(E.events,p))&&(s=!1)}),s):!1}function lo(e){return pt(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function Ey(e){if(pt(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&lo(r)}}return!1}function vy(e){if(pt(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function xy(e){var t;return(t=e==null?void 0:e.proposer)==null?void 0:t.publicKey}function Sy(e){return e==null?void 0:e.topic}function Dy(e,t){let r=null;return pt(e==null?void 0:e.publicKey,!1)||(r=ne("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function ja(e){let t=!0;return Wn(e)?e.length&&(t=e.every(r=>pt(r,!1))):t=!1,t}function Iy(e,t,r){let n=null;return Wn(t)?t.forEach(i=>{n||(!lo(i)||!i.includes(e))&&(n=rt("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):n=rt("UNSUPPORTED_CHAINS",`${r}, chains ${t} should be an array of strings conforming to "namespace:chainId" format`),n}function Oy(e,t){let r=null;return Object.entries(e).forEach(([n,i])=>{if(r)return;const s=Iy(n,qu(n,i),`${t} requiredNamespace`);s&&(r=s)}),r}function Ay(e,t){let r=null;return Wn(e)?e.forEach(n=>{r||Ey(n)||(r=rt("UNSUPPORTED_ACCOUNTS",`${t}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=rt("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function Cy(e,t){let r=null;return Object.values(e).forEach(n=>{if(r)return;const i=Ay(n==null?void 0:n.accounts,`${t} namespace`);i&&(r=i)}),r}function Ty(e,t){let r=null;return ja(e==null?void 0:e.methods)?ja(e==null?void 0:e.events)||(r=rt("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=rt("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function Qu(e,t){let r=null;return Object.values(e).forEach(n=>{if(r)return;const i=Ty(n,`${t}, namespace`);i&&(r=i)}),r}function Ry(e,t,r){let n=null;if(e&&Rn(e)){const i=Qu(e,t);i&&(n=i);const s=Oy(e,t);s&&(n=s)}else n=ne("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return n}function fi(e,t){let r=null;if(e&&Rn(e)){const n=Qu(e,t);n&&(r=n);const i=Cy(e,t);i&&(r=i)}else r=ne("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function el(e){return pt(e.protocol,!0)}function Py(e,t){let r=!1;return t&&!e?r=!0:e&&Wn(e)&&e.length&&e.forEach(n=>{r=el(n)}),r}function Ny(e){return typeof e=="number"}function Pt(e){return typeof e<"u"&&typeof e!==null}function Fy(e){return!(!e||typeof e!="object"||!e.code||!uo(e.code,!1)||!e.message||!pt(e.message,!1))}function Ly(e){return!(Ct(e)||!pt(e.method,!1))}function Uy(e){return!(Ct(e)||Ct(e.result)&&Ct(e.error)||!uo(e.id,!1)||!pt(e.jsonrpc,!1))}function $y(e){return!(Ct(e)||!pt(e.name,!1))}function ka(e,t){return!(!lo(t)||!py(e).includes(t))}function My(e,t,r){return pt(r,!1)?gy(e,t).includes(r):!1}function By(e,t,r){return pt(r,!1)?yy(e,t).includes(r):!1}function za(e,t,r){let n=null;const i=jy(e),s=ky(t),c=Object.keys(i),o=Object.keys(s),h=Ka(Object.keys(e)),p=Ka(Object.keys(t)),m=h.filter(E=>!p.includes(E));return m.length&&(n=ne("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${m.toString()}
      Received: ${Object.keys(t).toString()}`)),Ur(c,o)||(n=ne("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${o.toString()}`)),Object.keys(t).forEach(E=>{if(!E.includes(":")||n)return;const A=ln(t[E].accounts);A.includes(E)||(n=ne("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${E}
        Required: ${E}
        Approved: ${A.toString()}`))}),c.forEach(E=>{n||(Ur(i[E].methods,s[E].methods)?Ur(i[E].events,s[E].events)||(n=ne("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${E}`)):n=ne("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${E}`))}),n}function jy(e){const t={};return Object.keys(e).forEach(r=>{var n;r.includes(":")?t[r]=e[r]:(n=e[r].chains)==null||n.forEach(i=>{t[i]={methods:e[r].methods,events:e[r].events}})}),t}function Ka(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function ky(e){const t={};return Object.keys(e).forEach(r=>{if(r.includes(":"))t[r]=e[r];else{const n=ln(e[r].accounts);n==null||n.forEach(i=>{t[i]={accounts:e[r].accounts.filter(s=>s.includes(`${i}:`)),methods:e[r].methods,events:e[r].events}})}}),t}function zy(e,t){return uo(e,!1)&&e<=t.max&&e>=t.min}const Ky="PARSE_ERROR",qy="INVALID_REQUEST",Hy="METHOD_NOT_FOUND",Wy="INVALID_PARAMS",tl="INTERNAL_ERROR",fo="SERVER_ERROR",Vy=[-32700,-32600,-32601,-32602,-32603],Pn={[Ky]:{code:-32700,message:"Parse error"},[qy]:{code:-32600,message:"Invalid Request"},[Hy]:{code:-32601,message:"Method not found"},[Wy]:{code:-32602,message:"Invalid params"},[tl]:{code:-32603,message:"Internal error"},[fo]:{code:-32e3,message:"Server error"}},rl=fo;function Gy(e){return Vy.includes(e)}function qa(e){return Object.keys(Pn).includes(e)?Pn[e]:Pn[rl]}function Yy(e){const t=Object.values(Pn).find(r=>r.code===e);return t||Pn[rl]}function Jy(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${t}`):e}var nl={},lr={},Ha;function Xy(){if(Ha)return lr;Ha=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.isBrowserCryptoAvailable=lr.getSubtleCrypto=lr.getBrowerCrypto=void 0;function e(){return(At===null||At===void 0?void 0:At.crypto)||(At===null||At===void 0?void 0:At.msCrypto)||{}}lr.getBrowerCrypto=e;function t(){const n=e();return n.subtle||n.webkitSubtle}lr.getSubtleCrypto=t;function r(){return!!e()&&!!t()}return lr.isBrowserCryptoAvailable=r,lr}var fr={},Wa;function Zy(){if(Wa)return fr;Wa=1,Object.defineProperty(fr,"__esModule",{value:!0}),fr.isBrowser=fr.isNode=fr.isReactNative=void 0;function e(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}fr.isReactNative=e;function t(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}fr.isNode=t;function r(){return!e()&&!t()}return fr.isBrowser=r,fr}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Gt;t.__exportStar(Xy(),e),t.__exportStar(Zy(),e)})(nl);function il(e=3){const t=Date.now()*Math.pow(10,e),r=Math.floor(Math.random()*Math.pow(10,e));return t+r}function Qy(e=6){return BigInt(il(e))}function Gi(e,t,r){return{id:r||il(),jsonrpc:"2.0",method:e,params:t}}function ho(e,t){return{id:e,jsonrpc:"2.0",result:t}}function po(e,t,r){return{id:e,jsonrpc:"2.0",error:em(t,r)}}function em(e,t){return typeof e>"u"?qa(tl):(typeof e=="string"&&(e=Object.assign(Object.assign({},qa(fo)),{message:e})),typeof t<"u"&&(e.data=t),Gy(e.code)&&(e=Yy(e.code)),e)}class tm{}class rm extends tm{constructor(){super()}}class nm extends rm{constructor(t){super()}}const im="^wss?:";function sm(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(!(!t||!t.length))return t[0]}function om(e,t){const r=sm(e);return typeof r>"u"?!1:new RegExp(t).test(r)}function Va(e){return om(e,im)}function am(e){return new RegExp("wss?://localhost(:d{2,5})?").test(e)}function sl(e){return typeof e=="object"&&"id"in e&&"jsonrpc"in e&&e.jsonrpc==="2.0"}function go(e){return sl(e)&&"method"in e}function yo(e){return sl(e)&&(hr(e)||Jt(e))}function hr(e){return"result"in e}function Jt(e){return"error"in e}let cm=class extends nm{constructor(t){super(t),this.events=new Xt.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async request(t,r){return this.requestStrict(Gi(t.method,t.params||[],Qy().toString()),r)}async requestStrict(t,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${t.id}`,s=>{Jt(s)?i(s.error):n(s.result)});try{await this.connection.send(t,r)}catch(s){i(s)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),yo(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Ga=10,um=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),lm=()=>typeof window<"u",fm=um();class hm{constructor(t){if(this.url=t,this.events=new Xt.EventEmitter,this.registering=!1,!Va(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);this.url=t}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async open(t=this.url){await this.register(t)}async close(){return new Promise((t,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),t()},this.socket.close()})}async send(t,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Xs(t))}catch(n){this.onError(t.id,n)}}register(t=this.url){if(!Va(t))throw new Error(`Provided URL is not compatible with WebSocket connection: ${t}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=t,this.registering=!0,new Promise((r,n)=>{const i=nl.isReactNative()?void 0:{rejectUnauthorized:!am(t)},s=new fm(t,[],i);lm()?s.onerror=c=>{const o=c;n(this.emitError(o.error))}:s.on("error",c=>{n(this.emitError(c))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(t){t.onmessage=r=>this.onPayload(r),t.onclose=r=>this.onClose(r),this.socket=t,this.registering=!1,this.events.emit("open")}onClose(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}onPayload(t){if(typeof t.data>"u")return;const r=typeof t.data=="string"?wu(t.data):t.data;this.events.emit("payload",r)}onError(t,r){const n=this.parseError(r),i=n.message||n.toString(),s=po(t,i);this.events.emit("payload",s)}parseError(t,r=this.url){return Jy(t,r,"WS")}resetMaxListeners(){this.events.getMaxListeners()>Ga&&this.events.setMaxListeners(Ga)}emitError(t){const r=this.parseError(new Error((t==null?void 0:t.message)||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",r),r}}var wi={exports:{}};wi.exports;(function(e,t){var r=200,n="__lodash_hash_undefined__",i=1,s=2,c=9007199254740991,o="[object Arguments]",h="[object Array]",p="[object AsyncFunction]",m="[object Boolean]",E="[object Date]",A="[object Error]",I="[object Function]",S="[object GeneratorFunction]",R="[object Map]",j="[object Number]",H="[object Null]",T="[object Object]",F="[object Promise]",v="[object Proxy]",D="[object RegExp]",y="[object Set]",a="[object String]",g="[object Symbol]",z="[object Undefined]",w="[object WeakMap]",C="[object ArrayBuffer]",U="[object DataView]",W="[object Float32Array]",x="[object Float64Array]",O="[object Int8Array]",Y="[object Int16Array]",J="[object Int32Array]",G="[object Uint8Array]",q="[object Uint8ClampedArray]",V="[object Uint16Array]",X="[object Uint32Array]",te=/[\\^$.*+?()[\]{}|]/g,Q=/^\[object .+?Constructor\]$/,ae=/^(?:0|[1-9]\d*)$/,ie={};ie[W]=ie[x]=ie[O]=ie[Y]=ie[J]=ie[G]=ie[q]=ie[V]=ie[X]=!0,ie[o]=ie[h]=ie[C]=ie[m]=ie[U]=ie[E]=ie[A]=ie[I]=ie[R]=ie[j]=ie[T]=ie[D]=ie[y]=ie[a]=ie[w]=!1;var le=typeof At=="object"&&At&&At.Object===Object&&At,k=typeof self=="object"&&self&&self.Object===Object&&self,B=le||k||Function("return this")(),L=t&&!t.nodeType&&t,f=L&&!0&&e&&!e.nodeType&&e,P=f&&f.exports===L,ee=P&&le.process,re=function(){try{return ee&&ee.binding&&ee.binding("util")}catch{}}(),de=re&&re.isTypedArray;function Se(_,$){for(var Z=-1,oe=_==null?0:_.length,Ue=0,me=[];++Z<oe;){var qe=_[Z];$(qe,Z,_)&&(me[Ue++]=qe)}return me}function _e(_,$){for(var Z=-1,oe=$.length,Ue=_.length;++Z<oe;)_[Ue+Z]=$[Z];return _}function De(_,$){for(var Z=-1,oe=_==null?0:_.length;++Z<oe;)if($(_[Z],Z,_))return!0;return!1}function je(_,$){for(var Z=-1,oe=Array(_);++Z<_;)oe[Z]=$(Z);return oe}function $e(_){return function($){return _($)}}function Ee(_,$){return _.has($)}function be(_,$){return _==null?void 0:_[$]}function he(_){var $=-1,Z=Array(_.size);return _.forEach(function(oe,Ue){Z[++$]=[Ue,oe]}),Z}function ye(_,$){return function(Z){return _($(Z))}}function we(_){var $=-1,Z=Array(_.size);return _.forEach(function(oe){Z[++$]=oe}),Z}var fe=Array.prototype,pe=Function.prototype,d=Object.prototype,u=B["__core-js_shared__"],l=pe.toString,b=d.hasOwnProperty,N=function(){var _=/[^.]+$/.exec(u&&u.keys&&u.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),M=d.toString,K=RegExp("^"+l.call(b).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),se=P?B.Buffer:void 0,ce=B.Symbol,ve=B.Uint8Array,Ie=d.propertyIsEnumerable,xe=fe.splice,Lt=ce?ce.toStringTag:void 0,Ir=Object.getOwnPropertySymbols,fn=se?se.isBuffer:void 0,Gn=ye(Object.keys,Object),Ge=kr(B,"DataView"),ze=kr(B,"Map"),Ye=kr(B,"Promise"),Je=kr(B,"Set"),Xe=kr(B,"WeakMap"),Ke=kr(Object,"create"),nt=Ar(Ge),it=Ar(ze),st=Ar(Ye),ot=Ar(Je),at=Ar(Xe),tt=ce?ce.prototype:void 0,Ze=tt?tt.valueOf:void 0;function Me(_){var $=-1,Z=_==null?0:_.length;for(this.clear();++$<Z;){var oe=_[$];this.set(oe[0],oe[1])}}function ct(){this.__data__=Ke?Ke(null):{},this.size=0}function ut(_){var $=this.has(_)&&delete this.__data__[_];return this.size-=$?1:0,$}function Tl(_){var $=this.__data__;if(Ke){var Z=$[_];return Z===n?void 0:Z}return b.call($,_)?$[_]:void 0}function Rl(_){var $=this.__data__;return Ke?$[_]!==void 0:b.call($,_)}function Pl(_,$){var Z=this.__data__;return this.size+=this.has(_)?0:1,Z[_]=Ke&&$===void 0?n:$,this}Me.prototype.clear=ct,Me.prototype.delete=ut,Me.prototype.get=Tl,Me.prototype.has=Rl,Me.prototype.set=Pl;function cr(_){var $=-1,Z=_==null?0:_.length;for(this.clear();++$<Z;){var oe=_[$];this.set(oe[0],oe[1])}}function Nl(){this.__data__=[],this.size=0}function Fl(_){var $=this.__data__,Z=Jn($,_);if(Z<0)return!1;var oe=$.length-1;return Z==oe?$.pop():xe.call($,Z,1),--this.size,!0}function Ll(_){var $=this.__data__,Z=Jn($,_);return Z<0?void 0:$[Z][1]}function Ul(_){return Jn(this.__data__,_)>-1}function $l(_,$){var Z=this.__data__,oe=Jn(Z,_);return oe<0?(++this.size,Z.push([_,$])):Z[oe][1]=$,this}cr.prototype.clear=Nl,cr.prototype.delete=Fl,cr.prototype.get=Ll,cr.prototype.has=Ul,cr.prototype.set=$l;function Or(_){var $=-1,Z=_==null?0:_.length;for(this.clear();++$<Z;){var oe=_[$];this.set(oe[0],oe[1])}}function Ml(){this.size=0,this.__data__={hash:new Me,map:new(ze||cr),string:new Me}}function Bl(_){var $=Xn(this,_).delete(_);return this.size-=$?1:0,$}function jl(_){return Xn(this,_).get(_)}function kl(_){return Xn(this,_).has(_)}function zl(_,$){var Z=Xn(this,_),oe=Z.size;return Z.set(_,$),this.size+=Z.size==oe?0:1,this}Or.prototype.clear=Ml,Or.prototype.delete=Bl,Or.prototype.get=jl,Or.prototype.has=kl,Or.prototype.set=zl;function Yn(_){var $=-1,Z=_==null?0:_.length;for(this.__data__=new Or;++$<Z;)this.add(_[$])}function Kl(_){return this.__data__.set(_,n),this}function ql(_){return this.__data__.has(_)}Yn.prototype.add=Yn.prototype.push=Kl,Yn.prototype.has=ql;function mr(_){var $=this.__data__=new cr(_);this.size=$.size}function Hl(){this.__data__=new cr,this.size=0}function Wl(_){var $=this.__data__,Z=$.delete(_);return this.size=$.size,Z}function Vl(_){return this.__data__.get(_)}function Gl(_){return this.__data__.has(_)}function Yl(_,$){var Z=this.__data__;if(Z instanceof cr){var oe=Z.__data__;if(!ze||oe.length<r-1)return oe.push([_,$]),this.size=++Z.size,this;Z=this.__data__=new Or(oe)}return Z.set(_,$),this.size=Z.size,this}mr.prototype.clear=Hl,mr.prototype.delete=Wl,mr.prototype.get=Vl,mr.prototype.has=Gl,mr.prototype.set=Yl;function Jl(_,$){var Z=Zn(_),oe=!Z&&hf(_),Ue=!Z&&!oe&&Zi(_),me=!Z&&!oe&&!Ue&&Co(_),qe=Z||oe||Ue||me,lt=qe?je(_.length,String):[],yt=lt.length;for(var ke in _)($||b.call(_,ke))&&!(qe&&(ke=="length"||Ue&&(ke=="offset"||ke=="parent")||me&&(ke=="buffer"||ke=="byteLength"||ke=="byteOffset")||af(ke,yt)))&&lt.push(ke);return lt}function Jn(_,$){for(var Z=_.length;Z--;)if(Do(_[Z][0],$))return Z;return-1}function Xl(_,$,Z){var oe=$(_);return Zn(_)?oe:_e(oe,Z(_))}function hn(_){return _==null?_===void 0?z:H:Lt&&Lt in Object(_)?sf(_):ff(_)}function Eo(_){return dn(_)&&hn(_)==o}function vo(_,$,Z,oe,Ue){return _===$?!0:_==null||$==null||!dn(_)&&!dn($)?_!==_&&$!==$:Zl(_,$,Z,oe,vo,Ue)}function Zl(_,$,Z,oe,Ue,me){var qe=Zn(_),lt=Zn($),yt=qe?h:br(_),ke=lt?h:br($);yt=yt==o?T:yt,ke=ke==o?T:ke;var Ut=yt==T,Yt=ke==T,xt=yt==ke;if(xt&&Zi(_)){if(!Zi($))return!1;qe=!0,Ut=!1}if(xt&&!Ut)return me||(me=new mr),qe||Co(_)?xo(_,$,Z,oe,Ue,me):rf(_,$,yt,Z,oe,Ue,me);if(!(Z&i)){var zt=Ut&&b.call(_,"__wrapped__"),Kt=Yt&&b.call($,"__wrapped__");if(zt||Kt){var wr=zt?_.value():_,ur=Kt?$.value():$;return me||(me=new mr),Ue(wr,ur,Z,oe,me)}}return xt?(me||(me=new mr),nf(_,$,Z,oe,Ue,me)):!1}function Ql(_){if(!Ao(_)||uf(_))return!1;var $=Io(_)?K:Q;return $.test(Ar(_))}function ef(_){return dn(_)&&Oo(_.length)&&!!ie[hn(_)]}function tf(_){if(!lf(_))return Gn(_);var $=[];for(var Z in Object(_))b.call(_,Z)&&Z!="constructor"&&$.push(Z);return $}function xo(_,$,Z,oe,Ue,me){var qe=Z&i,lt=_.length,yt=$.length;if(lt!=yt&&!(qe&&yt>lt))return!1;var ke=me.get(_);if(ke&&me.get($))return ke==$;var Ut=-1,Yt=!0,xt=Z&s?new Yn:void 0;for(me.set(_,$),me.set($,_);++Ut<lt;){var zt=_[Ut],Kt=$[Ut];if(oe)var wr=qe?oe(Kt,zt,Ut,$,_,me):oe(zt,Kt,Ut,_,$,me);if(wr!==void 0){if(wr)continue;Yt=!1;break}if(xt){if(!De($,function(ur,Cr){if(!Ee(xt,Cr)&&(zt===ur||Ue(zt,ur,Z,oe,me)))return xt.push(Cr)})){Yt=!1;break}}else if(!(zt===Kt||Ue(zt,Kt,Z,oe,me))){Yt=!1;break}}return me.delete(_),me.delete($),Yt}function rf(_,$,Z,oe,Ue,me,qe){switch(Z){case U:if(_.byteLength!=$.byteLength||_.byteOffset!=$.byteOffset)return!1;_=_.buffer,$=$.buffer;case C:return!(_.byteLength!=$.byteLength||!me(new ve(_),new ve($)));case m:case E:case j:return Do(+_,+$);case A:return _.name==$.name&&_.message==$.message;case D:case a:return _==$+"";case R:var lt=he;case y:var yt=oe&i;if(lt||(lt=we),_.size!=$.size&&!yt)return!1;var ke=qe.get(_);if(ke)return ke==$;oe|=s,qe.set(_,$);var Ut=xo(lt(_),lt($),oe,Ue,me,qe);return qe.delete(_),Ut;case g:if(Ze)return Ze.call(_)==Ze.call($)}return!1}function nf(_,$,Z,oe,Ue,me){var qe=Z&i,lt=So(_),yt=lt.length,ke=So($),Ut=ke.length;if(yt!=Ut&&!qe)return!1;for(var Yt=yt;Yt--;){var xt=lt[Yt];if(!(qe?xt in $:b.call($,xt)))return!1}var zt=me.get(_);if(zt&&me.get($))return zt==$;var Kt=!0;me.set(_,$),me.set($,_);for(var wr=qe;++Yt<yt;){xt=lt[Yt];var ur=_[xt],Cr=$[xt];if(oe)var To=qe?oe(Cr,ur,xt,$,_,me):oe(ur,Cr,xt,_,$,me);if(!(To===void 0?ur===Cr||Ue(ur,Cr,Z,oe,me):To)){Kt=!1;break}wr||(wr=xt=="constructor")}if(Kt&&!wr){var Qn=_.constructor,ei=$.constructor;Qn!=ei&&"constructor"in _&&"constructor"in $&&!(typeof Qn=="function"&&Qn instanceof Qn&&typeof ei=="function"&&ei instanceof ei)&&(Kt=!1)}return me.delete(_),me.delete($),Kt}function So(_){return Xl(_,gf,of)}function Xn(_,$){var Z=_.__data__;return cf($)?Z[typeof $=="string"?"string":"hash"]:Z.map}function kr(_,$){var Z=be(_,$);return Ql(Z)?Z:void 0}function sf(_){var $=b.call(_,Lt),Z=_[Lt];try{_[Lt]=void 0;var oe=!0}catch{}var Ue=M.call(_);return oe&&($?_[Lt]=Z:delete _[Lt]),Ue}var of=Ir?function(_){return _==null?[]:(_=Object(_),Se(Ir(_),function($){return Ie.call(_,$)}))}:yf,br=hn;(Ge&&br(new Ge(new ArrayBuffer(1)))!=U||ze&&br(new ze)!=R||Ye&&br(Ye.resolve())!=F||Je&&br(new Je)!=y||Xe&&br(new Xe)!=w)&&(br=function(_){var $=hn(_),Z=$==T?_.constructor:void 0,oe=Z?Ar(Z):"";if(oe)switch(oe){case nt:return U;case it:return R;case st:return F;case ot:return y;case at:return w}return $});function af(_,$){return $=$??c,!!$&&(typeof _=="number"||ae.test(_))&&_>-1&&_%1==0&&_<$}function cf(_){var $=typeof _;return $=="string"||$=="number"||$=="symbol"||$=="boolean"?_!=="__proto__":_===null}function uf(_){return!!N&&N in _}function lf(_){var $=_&&_.constructor,Z=typeof $=="function"&&$.prototype||d;return _===Z}function ff(_){return M.call(_)}function Ar(_){if(_!=null){try{return l.call(_)}catch{}try{return _+""}catch{}}return""}function Do(_,$){return _===$||_!==_&&$!==$}var hf=Eo(function(){return arguments}())?Eo:function(_){return dn(_)&&b.call(_,"callee")&&!Ie.call(_,"callee")},Zn=Array.isArray;function df(_){return _!=null&&Oo(_.length)&&!Io(_)}var Zi=fn||mf;function pf(_,$){return vo(_,$)}function Io(_){if(!Ao(_))return!1;var $=hn(_);return $==I||$==S||$==p||$==v}function Oo(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=c}function Ao(_){var $=typeof _;return _!=null&&($=="object"||$=="function")}function dn(_){return _!=null&&typeof _=="object"}var Co=de?$e(de):ef;function gf(_){return df(_)?Jl(_):tf(_)}function yf(){return[]}function mf(){return!1}e.exports=pf})(wi,wi.exports);var dm=wi.exports;const pm=Oc(dm);function gm(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),c=s.charCodeAt(0);if(r[c]!==255)throw new TypeError(s+" is ambiguous");r[c]=i}var o=e.length,h=e.charAt(0),p=Math.log(o)/Math.log(256),m=Math.log(256)/Math.log(o);function E(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var R=0,j=0,H=0,T=S.length;H!==T&&S[H]===0;)H++,R++;for(var F=(T-H)*m+1>>>0,v=new Uint8Array(F);H!==T;){for(var D=S[H],y=0,a=F-1;(D!==0||y<j)&&a!==-1;a--,y++)D+=256*v[a]>>>0,v[a]=D%o>>>0,D=D/o>>>0;if(D!==0)throw new Error("Non-zero carry");j=y,H++}for(var g=F-j;g!==F&&v[g]===0;)g++;for(var z=h.repeat(R);g<F;++g)z+=e.charAt(v[g]);return z}function A(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var R=0;if(S[R]!==" "){for(var j=0,H=0;S[R]===h;)j++,R++;for(var T=(S.length-R)*p+1>>>0,F=new Uint8Array(T);S[R];){var v=r[S.charCodeAt(R)];if(v===255)return;for(var D=0,y=T-1;(v!==0||D<H)&&y!==-1;y--,D++)v+=o*F[y]>>>0,F[y]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");H=D,R++}if(S[R]!==" "){for(var a=T-H;a!==T&&F[a]===0;)a++;for(var g=new Uint8Array(j+(T-a)),z=j;a!==T;)g[z++]=F[a++];return g}}}function I(S){var R=A(S);if(R)return R;throw new Error(`Non-${t} character`)}return{encode:E,decodeUnsafe:A,decode:I}}var ym=gm,mm=ym;const ol=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},bm=e=>new TextEncoder().encode(e),wm=e=>new TextDecoder().decode(e);class _m{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class Em{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return al(this,t)}}class vm{constructor(t){this.decoders=t}or(t){return al(this,t)}decode(t){const r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const al=(e,t)=>new vm({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class xm{constructor(t,r,n,i){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new _m(t,r,n),this.decoder=new Em(t,r,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Yi=({name:e,prefix:t,encode:r,decode:n})=>new xm(e,t,r,n),Vn=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=mm(r,t);return Yi({prefix:e,name:t,encode:n,decode:s=>ol(i(s))})},Sm=(e,t,r,n)=>{const i={};for(let m=0;m<t.length;++m)i[t[m]]=m;let s=e.length;for(;e[s-1]==="=";)--s;const c=new Uint8Array(s*r/8|0);let o=0,h=0,p=0;for(let m=0;m<s;++m){const E=i[e[m]];if(E===void 0)throw new SyntaxError(`Non-${n} character`);h=h<<r|E,o+=r,o>=8&&(o-=8,c[p++]=255&h>>o)}if(o>=r||255&h<<8-o)throw new SyntaxError("Unexpected end of data");return c},Dm=(e,t,r)=>{const n=t[t.length-1]==="=",i=(1<<r)-1;let s="",c=0,o=0;for(let h=0;h<e.length;++h)for(o=o<<8|e[h],c+=8;c>r;)c-=r,s+=t[i&o>>c];if(c&&(s+=t[i&o<<r-c]),n)for(;s.length*r&7;)s+="=";return s},vt=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Yi({prefix:t,name:e,encode(i){return Dm(i,n,r)},decode(i){return Sm(i,n,r,e)}}),Im=Yi({prefix:"\0",name:"identity",encode:e=>wm(e),decode:e=>bm(e)});var Om=Object.freeze({__proto__:null,identity:Im});const Am=vt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Cm=Object.freeze({__proto__:null,base2:Am});const Tm=vt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Rm=Object.freeze({__proto__:null,base8:Tm});const Pm=Vn({prefix:"9",name:"base10",alphabet:"0123456789"});var Nm=Object.freeze({__proto__:null,base10:Pm});const Fm=vt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Lm=vt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Um=Object.freeze({__proto__:null,base16:Fm,base16upper:Lm});const $m=vt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Mm=vt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Bm=vt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),jm=vt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),km=vt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),zm=vt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Km=vt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),qm=vt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Hm=vt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Wm=Object.freeze({__proto__:null,base32:$m,base32upper:Mm,base32pad:Bm,base32padupper:jm,base32hex:km,base32hexupper:zm,base32hexpad:Km,base32hexpadupper:qm,base32z:Hm});const Vm=Vn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Gm=Vn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ym=Object.freeze({__proto__:null,base36:Vm,base36upper:Gm});const Jm=Vn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Xm=Vn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Zm=Object.freeze({__proto__:null,base58btc:Jm,base58flickr:Xm});const Qm=vt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),eb=vt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),tb=vt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),rb=vt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var nb=Object.freeze({__proto__:null,base64:Qm,base64pad:eb,base64url:tb,base64urlpad:rb});const cl=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),ib=cl.reduce((e,t,r)=>(e[r]=t,e),[]),sb=cl.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function ob(e){return e.reduce((t,r)=>(t+=ib[r],t),"")}function ab(e){const t=[];for(const r of e){const n=sb[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}const cb=Yi({prefix:"🚀",name:"base256emoji",encode:ob,decode:ab});var ub=Object.freeze({__proto__:null,base256emoji:cb}),lb=ul,Ya=128,fb=127,hb=~fb,db=Math.pow(2,31);function ul(e,t,r){t=t||[],r=r||0;for(var n=r;e>=db;)t[r++]=e&255|Ya,e/=128;for(;e&hb;)t[r++]=e&255|Ya,e>>>=7;return t[r]=e|0,ul.bytes=r-n+1,t}var pb=Fs,gb=128,Ja=127;function Fs(e,n){var r=0,n=n||0,i=0,s=n,c,o=e.length;do{if(s>=o)throw Fs.bytes=0,new RangeError("Could not decode varint");c=e[s++],r+=i<28?(c&Ja)<<i:(c&Ja)*Math.pow(2,i),i+=7}while(c>=gb);return Fs.bytes=s-n,r}var yb=Math.pow(2,7),mb=Math.pow(2,14),bb=Math.pow(2,21),wb=Math.pow(2,28),_b=Math.pow(2,35),Eb=Math.pow(2,42),vb=Math.pow(2,49),xb=Math.pow(2,56),Sb=Math.pow(2,63),Db=function(e){return e<yb?1:e<mb?2:e<bb?3:e<wb?4:e<_b?5:e<Eb?6:e<vb?7:e<xb?8:e<Sb?9:10},Ib={encode:lb,decode:pb,encodingLength:Db},ll=Ib;const Xa=(e,t,r=0)=>(ll.encode(e,t,r),t),Za=e=>ll.encodingLength(e),Ls=(e,t)=>{const r=t.byteLength,n=Za(e),i=n+Za(r),s=new Uint8Array(i+r);return Xa(e,s,0),Xa(r,s,n),s.set(t,i),new Ob(e,r,t,s)};class Ob{constructor(t,r,n,i){this.code=t,this.size=r,this.digest=n,this.bytes=i}}const fl=({name:e,code:t,encode:r})=>new Ab(e,t,r);class Ab{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?Ls(this.code,r):r.then(n=>Ls(this.code,n))}else throw Error("Unknown type, must be binary type")}}const hl=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Cb=fl({name:"sha2-256",code:18,encode:hl("SHA-256")}),Tb=fl({name:"sha2-512",code:19,encode:hl("SHA-512")});var Rb=Object.freeze({__proto__:null,sha256:Cb,sha512:Tb});const dl=0,Pb="identity",pl=ol,Nb=e=>Ls(dl,pl(e)),Fb={code:dl,name:Pb,encode:pl,digest:Nb};var Lb=Object.freeze({__proto__:null,identity:Fb});new TextEncoder,new TextDecoder;const Qa={...Om,...Cm,...Rm,...Nm,...Um,...Wm,...Ym,...Zm,...nb,...ub};({...Rb,...Lb});function gl(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Ub(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?gl(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function yl(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const ec=yl("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),fs=yl("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=Ub(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),$b={utf8:ec,"utf-8":ec,hex:Qa.base16,latin1:fs,ascii:fs,binary:fs,...Qa};function Mb(e,t="utf8"){const r=$b[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?gl(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}const ml="wc",Bb=2,mo="core",xr=`${ml}@2:${mo}:`,jb={name:mo,logger:"error"},kb={database:":memory:"},zb="crypto",tc="client_ed25519_seed",Kb=ue.ONE_DAY,qb="keychain",Hb="0.3",Wb="messages",Vb="0.3",Gb=ue.SIX_HOURS,Yb="publisher",bl="irn",Jb="error",wl="wss://relay.walletconnect.com",Xb="relayer",dt={message:"relayer_message",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Zb="_subscription",xn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Qb=ue.ONE_SECOND/2,ew="2.7.4",tw="0.3",er={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},rw="subscription",nw="0.3",iw=ue.FIVE_SECONDS*1e3,sw="pairing",ow="0.3",Sn={wc_pairingDelete:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ue.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ue.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:0},res:{ttl:ue.ONE_DAY,prompt:!1,tag:0}}},Qt={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},aw="history",cw="0.3",uw="expirer",Wt={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},lw="0.3",hs="verify-api",rc="https://verify.walletconnect.com";class fw{constructor(t,r){this.core=t,this.logger=r,this.keychain=new Map,this.name=qb,this.version=Hb,this.initialized=!1,this.storagePrefix=xr,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()},this.get=n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=ne("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=t,this.logger=Oe.generateChildLogger(r,this.name)}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,Yu(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Ju(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=ne("NOT_INITIALIZED",this.name);throw new Error(t)}}}class hw{constructor(t,r,n){this.core=t,this.logger=r,this.name=zb,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=xa(i);return Fu(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=$1();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),c=xa(s),o=Ps();return await Hg(o,i,Kb,c)},this.generateSharedKey=(i,s,c)=>{this.isInitialized();const o=this.getPrivateKey(i),h=M1(o,s);return this.setSymKey(h,c)},this.setSymKey=async(i,s)=>{this.isInitialized();const c=s||B1(i);return await this.keychain.set(c,i),c},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,c)=>{this.isInitialized();const o=Vu(c),h=Xs(s);if(Fa(o)){const A=o.senderPublicKey,I=o.receiverPublicKey;i=await this.generateSharedKey(A,I)}const p=this.getSymKey(i),{type:m,senderPublicKey:E}=o;return k1({type:m,symKey:p,message:h,senderPublicKey:E})},this.decode=async(i,s,c)=>{this.isInitialized();const o=q1(s,c);if(Fa(o)){const m=o.receiverPublicKey,E=o.senderPublicKey;i=await this.generateSharedKey(m,E)}const h=this.getSymKey(i),p=z1({symKey:h,encoded:s});return wu(p)},this.getPayloadType=i=>{const s=mi(i);return Hn(s.type)},this.getPayloadSenderPublicKey=i=>{const s=mi(i);return s.senderPublicKey?Rt(s.senderPublicKey,Tt):void 0},this.core=t,this.logger=Oe.generateChildLogger(r,this.name),this.keychain=n||new fw(this.core,this.logger)}get context(){return Oe.getLoggerContext(this.logger)}async setPrivateKey(t,r){return await this.keychain.set(t,r),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(tc)}catch{t=Ps(),await this.keychain.set(tc,t)}return Mb(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=ne("NOT_INITIALIZED",this.name);throw new Error(t)}}}class dw extends G0{constructor(t,r){super(t,r),this.logger=t,this.core=r,this.messages=new Map,this.name=Wb,this.version=Vb,this.initialized=!1,this.storagePrefix=xr,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,i)=>{this.isInitialized();const s=$r(i);let c=this.messages.get(n);return typeof c>"u"&&(c={}),typeof c[s]<"u"||(c[s]=i,this.messages.set(n,c),await this.persist()),s},this.get=n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i},this.has=(n,i)=>{this.isInitialized();const s=this.get(n),c=$r(i);return typeof s[c]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Oe.generateChildLogger(t,this.name),this.core=r}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,Yu(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?Ju(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=ne("NOT_INITIALIZED",this.name);throw new Error(t)}}}class pw extends Y0{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.events=new Xt.EventEmitter,this.name=Yb,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(n,i,s)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});try{const c=(s==null?void 0:s.ttl)||Gb,o=Ns(s),h=(s==null?void 0:s.prompt)||!1,p=(s==null?void 0:s.tag)||0,m={topic:n,message:i,opts:{ttl:c,relay:o,prompt:h,tag:p}},E=$r(i);this.queue.set(E,m);try{await await bi(this.rpcPublish(n,i,c,o,h,p),this.publishTimeout),this.relayer.events.emit(dt.publish,m)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(dt.connection_stalled);return}this.onPublish(E,m),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}})}catch(c){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(c),c}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.relayer=t,this.logger=Oe.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Oe.getLoggerContext(this.logger)}rpcPublish(t,r,n,i,s,c){var o,h,p,m;const E={method:li(i.protocol).publish,params:{topic:t,message:r,ttl:n,prompt:s,tag:c}};return Ct((o=E.params)==null?void 0:o.prompt)&&((h=E.params)==null||delete h.prompt),Ct((p=E.params)==null?void 0:p.tag)&&((m=E.params)==null||delete m.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:E}),this.relayer.request(E)}onPublish(t,r){this.queue.delete(t)}checkQueue(){this.queue.forEach(async t=>{const{topic:r,message:n,opts:i}=t;await this.publish(r,n,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(zn.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}}class gw{constructor(){this.map=new Map,this.set=(t,r)=>{const n=this.get(t);this.exists(t,r)||this.map.set(t,[...n,r])},this.get=t=>this.map.get(t)||[],this.exists=(t,r)=>this.get(t).includes(r),this.delete=(t,r)=>{if(typeof r>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const n=this.get(t);if(!this.exists(t,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(t);return}this.map.set(t,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var yw=Object.defineProperty,mw=Object.defineProperties,bw=Object.getOwnPropertyDescriptors,nc=Object.getOwnPropertySymbols,ww=Object.prototype.hasOwnProperty,_w=Object.prototype.propertyIsEnumerable,ic=(e,t,r)=>t in e?yw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Dn=(e,t)=>{for(var r in t||(t={}))ww.call(t,r)&&ic(e,r,t[r]);if(nc)for(var r of nc(t))_w.call(t,r)&&ic(e,r,t[r]);return e},ds=(e,t)=>mw(e,bw(t));class Ew extends Z0{constructor(t,r){super(t,r),this.relayer=t,this.logger=r,this.subscriptions=new Map,this.topicMap=new gw,this.events=new Xt.EventEmitter,this.name=rw,this.version=nw,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=xr,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const s=Ns(i),c={topic:n,relay:s};this.pending.set(n,c);const o=await this.rpcSubscribe(n,s);return this.onSubscribe(o,c),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}}),o}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,i)=>{await this.restartToComplete(),this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)},this.isSubscribed=async n=>this.topics.includes(n)?!0:await new Promise((i,s)=>{const c=new ue.Watch;c.start(this.pendingSubscriptionWatchLabel);const o=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(o),c.stop(this.pendingSubscriptionWatchLabel),i(!0)),c.elapsed(this.pendingSubscriptionWatchLabel)>=iw&&(clearInterval(o),c.stop(this.pendingSubscriptionWatchLabel),s(!1))},this.pollingInterval)}),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=Oe.generateChildLogger(r,this.name),this.clientId=""}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,r){let n=!1;try{n=this.getSubscription(t).topic===r}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,r){const n=this.topicMap.get(t);await Promise.all(n.map(async i=>await this.unsubscribeById(t,i,r)))}async unsubscribeById(t,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:n}});try{const i=Ns(n);await this.rpcUnsubscribe(t,r,i);const s=rt("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(t,r){const n={method:li(r.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await bi(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(dt.connection_stalled)}return $r(t+this.clientId)}async rpcBatchSubscribe(t){if(!t.length)return;const r=t[0].relay,n={method:li(r.protocol).batchSubscribe,params:{topics:t.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await bi(this.relayer.request(n),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(dt.connection_stalled)}}rpcUnsubscribe(t,r,n){const i={method:li(n.protocol).unsubscribe,params:{topic:t,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(t,r){this.setSubscription(t,ds(Dn({},r),{id:t})),this.pending.delete(r.topic)}onBatchSubscribe(t){t.length&&t.forEach(r=>{this.setSubscription(r.id,Dn({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(t,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,t)&&this.deleteSubscription(r,n),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,r){this.subscriptions.has(t)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:r}),this.addSubscription(t,r))}addSubscription(t,r){this.subscriptions.set(t,Dn({},r)),this.topicMap.set(r.topic,t),this.events.emit(er.created,r)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const r=this.subscriptions.get(t);if(!r){const{message:n}=ne("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(n)}return r}deleteSubscription(t,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:r});const n=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(n.topic,t),this.events.emit(er.deleted,ds(Dn({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(er.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(n)}}this.events.emit(er.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:r}=ne("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const r=await this.rpcBatchSubscribe(t);Wn(r)&&this.onBatchSubscribe(r.map((n,i)=>ds(Dn({},t[i]),{id:n})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const t=[];this.pending.forEach(r=>{t.push(r)}),await this.batchSubscribe(t)}registerEventListeners(){this.relayer.core.heartbeat.on(zn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(dt.connect,async()=>{await this.onConnect()}),this.relayer.on(dt.disconnect,()=>{this.onDisconnect()}),this.events.on(er.created,async t=>{const r=er.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()}),this.events.on(er.deleted,async t=>{const r=er.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=ne("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise(t=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),t())},this.pollingInterval)})}}var vw=Object.defineProperty,sc=Object.getOwnPropertySymbols,xw=Object.prototype.hasOwnProperty,Sw=Object.prototype.propertyIsEnumerable,oc=(e,t,r)=>t in e?vw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Dw=(e,t)=>{for(var r in t||(t={}))xw.call(t,r)&&oc(e,r,t[r]);if(sc)for(var r of sc(t))Sw.call(t,r)&&oc(e,r,t[r]);return e};class Iw extends J0{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new Xt.EventEmitter,this.name=Xb,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(n){throw this.logger.debug("Failed to Publish Request"),this.logger.error(n),n}},this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?Oe.generateChildLogger(t.logger,this.name):Oe.pino(Oe.getDefaultLoggerOptions({level:t.logger||Jb})),this.messages=new dw(this.logger,t.core),this.subscriber=new Ew(this,this.logger),this.publisher=new pw(this,this.logger),this.relayUrl=(t==null?void 0:t.relayUrl)||wl,this.projectId=t.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0}get context(){return Oe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(t,r,n){this.isInitialized(),await this.publisher.publish(t,r,n),await this.recordMessageEvent({topic:t,message:r,publishedAt:Date.now()})}async subscribe(t,r){this.isInitialized();let n="";return await Promise.all([new Promise(i=>{this.subscriber.once(er.created,s=>{s.topic===t&&i()})}),new Promise(async i=>{n=await this.subscriber.subscribe(t,r),i()})]),n}async unsubscribe(t,r){this.isInitialized(),await this.subscriber.unsubscribe(t,r)}on(t,r){this.events.on(t,r)}once(t,r){this.events.once(t,r)}off(t,r){this.events.off(t,r)}removeListener(t,r){this.events.removeListener(t,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(dt.transport_closed))}async transportOpen(t){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=t||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(er.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,n)=>{await bi(this.provider.connect(),5e3,"socket stalled").catch(i=>n(i)).then(()=>r()).finally(()=>this.removeListener(dt.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(dt.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const n=r;if(!this.isConnectionStalled(n.message))throw r;this.events.emit(dt.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(t){this.transportExplicitlyClosed||(this.relayUrl=t||this.relayUrl,this.connected&&await Promise.all([new Promise(r=>{this.provider.once(xn.disconnect,()=>{r()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(t){return this.staleConnectionErrors.some(r=>t.includes(r))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}async createProvider(){const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new cm(new hm(ry({sdkVersion:ew,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:r,message:n}=t;await this.messages.set(r,n)}async shouldIgnoreMessageEvent(t){const{topic:r,message:n}=t;return await this.subscriber.isSubscribed(r)?this.messages.has(r,n):!0}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),go(t)){if(!t.method.endsWith(Zb))return;const r=t.params,{topic:n,message:i,publishedAt:s}=r.data,c={topic:n,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Dw({type:"event",event:r.id},c)),this.events.emit(r.id,c),await this.acknowledgePayload(t),await this.onMessageEvent(c)}}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(dt.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const r=ho(t.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on(xn.payload,t=>this.onProviderPayload(t)),this.provider.on(xn.connect,()=>{this.events.emit(dt.connect)}),this.provider.on(xn.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(xn.error,t=>{this.logger.error(t),this.events.emit(dt.error,t)})}registerEventListeners(){this.events.on(dt.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(dt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},ue.toMiliseconds(Qb))}isInitialized(){if(!this.initialized){const{message:t}=ne("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(t=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),t())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var Ow=Object.defineProperty,ac=Object.getOwnPropertySymbols,Aw=Object.prototype.hasOwnProperty,Cw=Object.prototype.propertyIsEnumerable,cc=(e,t,r)=>t in e?Ow(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,uc=(e,t)=>{for(var r in t||(t={}))Aw.call(t,r)&&cc(e,r,t[r]);if(ac)for(var r of ac(t))Cw.call(t,r)&&cc(e,r,t[r]);return e};class Ji extends X0{constructor(t,r,n,i=xr,s=void 0){super(t,r,n,i),this.core=t,this.logger=r,this.name=n,this.map=new Map,this.version=tw,this.cached=[],this.initialized=!1,this.storagePrefix=xr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(c=>{this.getKey&&c!==null&&!Ct(c)?this.map.set(this.getKey(c),c):xy(c)?this.map.set(c.id,c):Sy(c)&&this.map.set(c.topic,c)}),this.cached=[],this.initialized=!0)},this.set=async(c,o)=>{this.isInitialized(),this.map.has(c)?await this.update(c,o):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:c,value:o}),this.map.set(c,o),await this.persist())},this.get=c=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:c}),this.getData(c)),this.getAll=c=>(this.isInitialized(),c?this.values.filter(o=>Object.keys(c).every(h=>pm(o[h],c[h]))):this.values),this.update=async(c,o)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:c,update:o});const h=uc(uc({},this.getData(c)),o);this.map.set(c,h),await this.persist()},this.delete=async(c,o)=>{this.isInitialized(),this.map.has(c)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:c,reason:o}),this.map.delete(c),await this.persist())},this.logger=Oe.generateChildLogger(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const r=this.map.get(t);if(!r){const{message:n}=ne("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:r}=ne("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=ne("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Tw{constructor(t,r){this.core=t,this.logger=r,this.name=sw,this.version=ow,this.events=new hu,this.initialized=!1,this.storagePrefix=xr,this.ignoredPayloadTypes=[jr],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async()=>{this.isInitialized();const n=Ps(),i=await this.core.crypto.setSymKey(n),s=tr(ue.FIVE_MINUTES),c={protocol:bl},o={topic:i,expiry:s,relay:c,active:!1},h=dy({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:n,relay:c});return await this.pairings.set(i,o),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:h}},this.pair=async n=>{this.isInitialized(),this.isValidPair(n);const{topic:i,symKey:s,relay:c}=fy(n.uri);if(this.pairings.keys.includes(i))throw new Error(`Pairing already exists: ${i}`);if(this.core.crypto.hasKeys(i))throw new Error(`Keychain already exists: ${i}`);const o=tr(ue.FIVE_MINUTES),h={topic:i,relay:c,expiry:o,active:!1};return await this.pairings.set(i,h),await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:c}),this.core.expirer.set(i,o),n.activatePairing&&await this.activate({topic:i}),h},this.activate=async({topic:n})=>{this.isInitialized();const i=tr(ue.THIRTY_DAYS);await this.pairings.update(n,{active:!0,expiry:i}),this.core.expirer.set(n,i)},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:c,resolve:o,reject:h}=Zr();this.events.once(Qe("pairing_ping",s),({error:p})=>{p?h(p):o()}),await c()}},this.updateExpiry=async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})},this.updateMetadata=async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",rt("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(n,i,s)=>{const c=Gi(i,s),o=await this.core.crypto.encode(n,c),h=Sn[i].req;return this.core.history.set(n,c),await this.core.relayer.publish(n,o,h),c.id},this.sendResult=async(n,i,s)=>{const c=ho(n,s),o=await this.core.crypto.encode(i,c),h=await this.core.history.get(i,n),p=Sn[h.request.method].res;await this.core.relayer.publish(i,o,p),await this.core.history.resolve(c)},this.sendError=async(n,i,s)=>{const c=po(n,s),o=await this.core.crypto.encode(i,c),h=await this.core.history.get(i,n),p=Sn[h.request.method]?Sn[h.request.method].res:Sn.unregistered_method.res;await this.core.relayer.publish(i,o,p),await this.core.history.resolve(c)},this.deletePairing=async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,rt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(i=>Er(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=n=>{const{topic:i,payload:s}=n,c=s.method;if(this.pairings.keys.includes(i))switch(c){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async n=>{const{topic:i,payload:s}=n,c=(await this.core.history.get(i,s.id)).request.method;if(this.pairings.keys.includes(i))switch(c){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(c)}},this.onPairingPingRequest=async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit("pairing_ping",{id:s,topic:n})}catch(c){await this.sendError(s,n,c),this.logger.error(c)}},this.onPairingPingResponse=(n,i)=>{const{id:s}=i;setTimeout(()=>{hr(i)?this.events.emit(Qe("pairing_ping",s),{}):Jt(i)&&this.events.emit(Qe("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit("pairing_delete",{id:s,topic:n})}catch(c){await this.sendError(s,n,c),this.logger.error(c)}},this.onUnknownRpcMethodRequest=async(n,i)=>{const{id:s,method:c}=i;try{if(this.registeredMethods.includes(c))return;const o=rt("WC_METHOD_UNSUPPORTED",c);await this.sendError(s,n,o),this.logger.error(o)}catch(o){await this.sendError(s,n,o),this.logger.error(o)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(rt("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=n=>{if(!Pt(n)){const{message:i}=ne("MISSING_OR_INVALID",`pair() params: ${n}`);throw new Error(i)}if(!vy(n.uri)){const{message:i}=ne("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw new Error(i)}},this.isValidPing=async n=>{if(!Pt(n)){const{message:s}=ne("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidDisconnect=async n=>{if(!Pt(n)){const{message:s}=ne("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async n=>{if(!pt(n,!1)){const{message:i}=ne("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=ne("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Er(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=ne("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}},this.core=t,this.logger=Oe.generateChildLogger(r,this.name),this.pairings=new Ji(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Oe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=ne("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(dt.message,async t=>{const{topic:r,message:n}=t;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const i=await this.core.crypto.decode(r,n);go(i)?(this.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):yo(i)&&(await this.core.history.resolve(i),this.onRelayEventResponse({topic:r,payload:i}))})}registerExpirerEvents(){this.core.expirer.on(Wt.expired,async t=>{const{topic:r}=Zu(t.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class Rw extends V0{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.records=new Map,this.events=new Xt.EventEmitter,this.name=aw,this.version=cw,this.cached=[],this.initialized=!1,this.storagePrefix=xr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const c={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s};this.records.set(c.id,c),this.events.emit(Qt.created,c)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Jt(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.events.emit(Qt.updated,i))},this.get=async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i)),this.delete=(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(Qt.deleted,s)}})},this.exists=async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1),this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Oe.generateChildLogger(r,this.name)}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:Gi(r.request.method,r.request.params,r.id),chainId:r.chainId};return t.push(n)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const r=this.records.get(t);if(!r){const{message:n}=ne("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Qt.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:r}=ne("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(Qt.created,t=>{const r=Qt.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(Qt.updated,t=>{const r=Qt.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()}),this.events.on(Qt.deleted,t=>{const r=Qt.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=ne("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Pw extends Q0{constructor(t,r){super(t,r),this.core=t,this.logger=r,this.expirations=new Map,this.events=new Xt.EventEmitter,this.name=uw,this.version=lw,this.cached=[],this.initialized=!1,this.storagePrefix=xr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(n,i)=>{this.isInitialized();const s=this.formatTarget(n),c={target:s,expiry:i};this.expirations.set(s,c),this.checkExpiry(s,c),this.events.emit(Wt.created,{target:s,expiration:c})},this.get=n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)},this.del=n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Wt.deleted,{target:i,expiration:s})}},this.on=(n,i)=>{this.events.on(n,i)},this.once=(n,i)=>{this.events.once(n,i)},this.off=(n,i)=>{this.events.off(n,i)},this.removeListener=(n,i)=>{this.events.removeListener(n,i)},this.logger=Oe.generateChildLogger(r,this.name)}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return ny(t);if(typeof t=="number")return iy(t);const{message:r}=ne("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(r)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Wt.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:r}=ne("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const r=this.expirations.get(t);if(!r){const{message:n}=ne("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(n),new Error(n)}return r}checkExpiry(t,r){const{expiry:n}=r;ue.toMiliseconds(n)-Date.now()<=0&&this.expire(t,r)}expire(t,r){this.expirations.delete(t),this.events.emit(Wt.expired,{target:t,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,r)=>this.checkExpiry(r,t))}registerEventListeners(){this.core.heartbeat.on(zn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Wt.created,t=>{const r=Wt.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Wt.expired,t=>{const r=Wt.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()}),this.events.on(Wt.deleted,t=>{const r=Wt.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=ne("NOT_INITIALIZED",this.name);throw new Error(t)}}}class Nw extends ep{constructor(t,r){super(t,r),this.projectId=t,this.logger=r,this.name=hs,this.initialized=!1,this.init=async n=>{Gu()||!co()||(this.verifyUrl=(n==null?void 0:n.verifyUrl)||rc,await this.createIframe())},this.register=async n=>{var i;this.initialized||await this.init(),this.iframe&&((i=this.iframe.contentWindow)==null||i.postMessage(n.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${n.attestationId} ${this.verifyUrl}`))},this.resolve=async n=>{var i;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${n.attestationId}`);const s=this.startAbortTimer(ue.FIVE_SECONDS),c=await fetch(`${this.verifyUrl}/attestation/${n.attestationId}`,{signal:this.abortController.signal});return clearTimeout(s),c.status===200?(i=await c.json())==null?void 0:i.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((n,i)=>{if(document.getElementById(hs))return n();const s=document.createElement("iframe");s.setAttribute("id",hs),s.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),s.style.display="none",s.addEventListener("load",()=>{this.initialized=!0,n()}),s.addEventListener("error",c=>{i(c)}),document.body.append(s),this.iframe=s}),new Promise(n=>{setTimeout(()=>n("iframe load timeout"),ue.toMiliseconds(ue.ONE_SECOND/2))})])}catch(n){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(n)}},this.logger=Oe.generateChildLogger(r,this.name),this.verifyUrl=rc,this.abortController=new AbortController,this.isDevEnv=ao()&&{}.IS_VITEST}get context(){return Oe.getLoggerContext(this.logger)}startAbortTimer(t){return setTimeout(()=>this.abortController.abort(),ue.toMiliseconds(t))}}var Fw=Object.defineProperty,lc=Object.getOwnPropertySymbols,Lw=Object.prototype.hasOwnProperty,Uw=Object.prototype.propertyIsEnumerable,fc=(e,t,r)=>t in e?Fw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,hc=(e,t)=>{for(var r in t||(t={}))Lw.call(t,r)&&fc(e,r,t[r]);if(lc)for(var r of lc(t))Uw.call(t,r)&&fc(e,r,t[r]);return e};let $w=class _l extends W0{constructor(t){super(t),this.protocol=ml,this.version=Bb,this.name=mo,this.events=new Xt.EventEmitter,this.initialized=!1,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.projectId=t==null?void 0:t.projectId,this.relayUrl=(t==null?void 0:t.relayUrl)||wl;const r=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Oe.pino(Oe.getDefaultLoggerOptions({level:(t==null?void 0:t.logger)||jb.logger}));this.logger=Oe.generateChildLogger(r,this.name),this.heartbeat=new zn.HeartBeat,this.crypto=new hw(this,this.logger,t==null?void 0:t.keychain),this.history=new Rw(this,this.logger),this.expirer=new Pw(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new C0(hc(hc({},kb),t==null?void 0:t.storageOptions)),this.relayer=new Iw({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Tw(this,this.logger),this.verify=new Nw(this.projectId||"",this.logger)}static async init(t){const r=new _l(t);return await r.initialize(),r}get context(){return Oe.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}};const Mw=$w,El="wc",vl=2,xl="client",bo=`${El}@${vl}:${xl}:`,ps={name:xl,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Bw="proposal",jw="Proposal expired",kw="session",ri=ue.SEVEN_DAYS,zw="engine",In={wc_sessionPropose:{req:{ttl:ue.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ue.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ue.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ue.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ue.THIRTY_SECONDS,prompt:!1,tag:1115}}},gs={min:ue.FIVE_MINUTES,max:ue.SEVEN_DAYS},Kw="request",qw=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var Hw=Object.defineProperty,Ww=Object.defineProperties,Vw=Object.getOwnPropertyDescriptors,dc=Object.getOwnPropertySymbols,Gw=Object.prototype.hasOwnProperty,Yw=Object.prototype.propertyIsEnumerable,pc=(e,t,r)=>t in e?Hw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,qt=(e,t)=>{for(var r in t||(t={}))Gw.call(t,r)&&pc(e,r,t[r]);if(dc)for(var r of dc(t))Yw.call(t,r)&&pc(e,r,t[r]);return e},ys=(e,t)=>Ww(e,Vw(t));class Jw extends rp{constructor(t){super(t),this.name=zw,this.events=new hu,this.initialized=!1,this.ignoredPayloadTypes=[jr],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(In)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();const n=ys(qt({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:c,sessionProperties:o,relays:h}=n;let p=i,m,E=!1;if(p&&(E=this.client.core.pairing.pairings.get(p).active),!p||!E){const{topic:F,uri:v}=await this.client.core.pairing.create();p=F,m=v}const A=await this.client.core.crypto.generateKeyPair(),I=qt({requiredNamespaces:s,optionalNamespaces:c,relays:h??[{protocol:bl}],proposer:{publicKey:A,metadata:this.client.metadata}},o&&{sessionProperties:o}),{reject:S,resolve:R,done:j}=Zr(ue.FIVE_MINUTES,jw);if(this.events.once(Qe("session_connect"),async({error:F,session:v})=>{if(F)S(F);else if(v){v.self.publicKey=A;const D=ys(qt({},v),{requiredNamespaces:v.requiredNamespaces,optionalNamespaces:v.optionalNamespaces});await this.client.session.set(v.topic,D),await this.setExpiry(v.topic,v.expiry),p&&await this.client.core.pairing.updateMetadata({topic:p,metadata:v.peer.metadata}),R(D)}}),!p){const{message:F}=ne("NO_MATCHING_KEY",`connect() pairing topic: ${p}`);throw new Error(F)}const H=await this.sendRequest(p,"wc_sessionPropose",I),T=tr(ue.FIVE_MINUTES);return await this.setProposal(H,qt({id:H,expiry:T},I)),{uri:m,approval:j}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:n,relayProtocol:i,namespaces:s,sessionProperties:c}=r,o=this.client.proposal.get(n);let{pairingTopic:h,proposer:p,requiredNamespaces:m,optionalNamespaces:E}=o;h=h||"",Rn(m)||(m=my(s,"approve()"));const A=await this.client.core.crypto.generateKeyPair(),I=p.publicKey,S=await this.client.core.crypto.generateSharedKey(A,I);h&&n&&(await this.client.core.pairing.updateMetadata({topic:h,metadata:p.metadata}),await this.sendResult(n,h,{relay:{protocol:i??"irn"},responderPublicKey:A}),await this.client.proposal.delete(n,rt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:h}));const R=qt({relay:{protocol:i??"irn"},namespaces:s,requiredNamespaces:m,optionalNamespaces:E,pairingTopic:h,controller:{publicKey:A,metadata:this.client.metadata},expiry:tr(ri)},c&&{sessionProperties:c});await this.client.core.relayer.subscribe(S),await this.sendRequest(S,"wc_sessionSettle",R);const j=ys(qt({},R),{topic:S,pairingTopic:h,acknowledged:!1,self:R.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:A});return await this.client.session.set(S,j),await this.setExpiry(S,tr(ri)),{topic:S,acknowledged:()=>new Promise(H=>H(this.client.session.get(S)))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:n,reason:i}=r,{pairingTopic:s}=this.client.proposal.get(n);s&&(await this.sendError(n,s,i),await this.client.proposal.delete(n,rt("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:n,namespaces:i}=r,s=await this.sendRequest(n,"wc_sessionUpdate",{namespaces:i}),{done:c,resolve:o,reject:h}=Zr();return this.events.once(Qe("session_update",s),({error:p})=>{p?h(p):o()}),await this.client.session.update(n,{namespaces:i}),{acknowledged:c}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:n}=r,i=await this.sendRequest(n,"wc_sessionExtend",{}),{done:s,resolve:c,reject:o}=Zr();return this.events.once(Qe("session_extend",i),({error:h})=>{h?o(h):c()}),await this.setExpiry(n,tr(ri)),{acknowledged:s}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:n,request:i,topic:s,expiry:c}=r,o=await this.sendRequest(s,"wc_sessionRequest",{request:i,chainId:n},c),{done:h,resolve:p,reject:m}=Zr(c);return this.events.once(Qe("session_request",o),({error:E,result:A})=>{E?m(E):p(A)}),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:o}),await h()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:n,response:i}=r,{id:s}=i;hr(i)?await this.sendResult(s,n,i.result):Jt(i)&&await this.sendError(s,n,i.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=await this.sendRequest(n,"wc_sessionPing",{}),{done:s,resolve:c,reject:o}=Zr();this.events.once(Qe("session_ping",i),({error:h})=>{h?o(h):c()}),await s()}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r;await this.sendRequest(n,"wc_sessionEvent",{event:i,chainId:s})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:n}=r;this.client.session.keys.includes(n)?(await this.sendRequest(n,"wc_sessionDelete",rt("USER_DISCONNECTED")),await this.deleteSession(n)):await this.client.core.pairing.disconnect({topic:n})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(n=>_y(n,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var c,o;return((c=s.peerMetadata)==null?void 0:c.url)&&((o=s.peerMetadata)==null?void 0:o.url)===r.self.metadata.url&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async(r,n)=>{const{self:i}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await Promise.all([this.client.session.delete(r,rt("USER_DISCONNECTED")),this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.deleteSymKey(r),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deleteProposal=async(r,n)=>{await Promise.all([this.client.proposal.delete(r,rt("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,n)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:n}),this.client.core.expirer.set(r,n)},this.setProposal=async(r,n)=>{await this.client.proposal.set(r,n),this.client.core.expirer.set(r,n.expiry)},this.setPendingSessionRequest=async r=>{const n=In.wc_sessionRequest.req.ttl,{id:i,topic:s,params:c}=r;await this.client.pendingRequest.set(i,{id:i,topic:s,params:c}),n&&this.client.core.expirer.set(i,tr(n))},this.sendRequest=async(r,n,i,s)=>{const c=Gi(n,i);if(co()&&qw.includes(n)){const p=$r(JSON.stringify(c));await this.client.core.verify.register({attestationId:p})}const o=await this.client.core.crypto.encode(r,c),h=In[n].req;return s&&(h.ttl=s),this.client.core.history.set(r,c),this.client.core.relayer.publish(r,o,h),c.id},this.sendResult=async(r,n,i)=>{const s=ho(r,i),c=await this.client.core.crypto.encode(n,s),o=await this.client.core.history.get(n,r),h=In[o.request.method].res;this.client.core.relayer.publish(n,c,h),await this.client.core.history.resolve(s)},this.sendError=async(r,n,i)=>{const s=po(r,i),c=await this.client.core.crypto.encode(n,s),o=await this.client.core.history.get(n,r),h=In[o.request.method].res;this.client.core.relayer.publish(n,c,h),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{Er(i.expiry)&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Er(i.expiry)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession(i)),...n.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=r=>{const{topic:n,payload:i}=r,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(n,i);case"wc_sessionSettle":return this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return this.onSessionExtendRequest(n,i);case"wc_sessionPing":return this.onSessionPingRequest(n,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return this.onSessionRequest(n,i);case"wc_sessionEvent":return this.onSessionEventRequest(n,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async r=>{const{topic:n,payload:i}=r,s=(await this.client.core.history.get(n,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onSessionProposeRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidConnect(qt({},n.params));const c=tr(ue.FIVE_MINUTES),o=qt({id:s,pairingTopic:r,expiry:c},i);await this.setProposal(s,o);const h=$r(JSON.stringify(n)),p=await this.getVerifyContext(h,o.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:o,context:p})}catch(c){await this.sendError(s,r,c),this.client.logger.error(c)}},this.onSessionProposeResponse=async(r,n)=>{const{id:i}=n;if(hr(n)){const{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const c=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:c});const o=c.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});const h=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:h});const p=await this.client.core.crypto.generateSharedKey(o,h);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:p});const m=await this.client.core.relayer.subscribe(p);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:m}),await this.client.core.pairing.activate({topic:r})}else Jt(n)&&(await this.client.proposal.delete(i,rt("USER_DISCONNECTED")),this.events.emit(Qe("session_connect"),{error:n.error}))},this.onSessionSettleRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:c,controller:o,expiry:h,namespaces:p,requiredNamespaces:m,optionalNamespaces:E,sessionProperties:A,pairingTopic:I}=n.params,S=qt({topic:r,relay:c,expiry:h,namespaces:p,acknowledged:!0,pairingTopic:I,requiredNamespaces:m,optionalNamespaces:E,controller:o.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:o.publicKey,metadata:o.metadata}},A&&{sessionProperties:A});await this.sendResult(n.id,r,!0),this.events.emit(Qe("session_connect"),{session:S}),this.cleanupDuplicatePairings(S)}catch(c){await this.sendError(i,r,c),this.client.logger.error(c)}},this.onSessionSettleResponse=async(r,n)=>{const{id:i}=n;hr(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Qe("session_approve",i),{})):Jt(n)&&(await this.client.session.delete(r,rt("USER_DISCONNECTED")),this.events.emit(Qe("session_approve",i),{error:n.error}))},this.onSessionUpdateRequest=async(r,n)=>{const{params:i,id:s}=n;try{this.isValidUpdate(qt({topic:r},i)),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult(s,r,!0),this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(c){await this.sendError(s,r,c),this.client.logger.error(c)}},this.onSessionUpdateResponse=(r,n)=>{const{id:i}=n;hr(n)?this.events.emit(Qe("session_update",i),{}):Jt(n)&&this.events.emit(Qe("session_update",i),{error:n.error})},this.onSessionExtendRequest=async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,tr(ri)),await this.sendResult(i,r,!0),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(r,n)=>{const{id:i}=n;hr(n)?this.events.emit(Qe("session_extend",i),{}):Jt(n)&&this.events.emit(Qe("session_extend",i),{error:n.error})},this.onSessionPingRequest=async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionPingResponse=(r,n)=>{const{id:i}=n;setTimeout(()=>{hr(n)?this.events.emit(Qe("session_ping",i),{}):Jt(n)&&this.events.emit(Qe("session_ping",i),{error:n.error})},500)},this.onSessionDeleteRequest=async(r,n)=>{const{id:i}=n;try{this.isValidDisconnect({topic:r,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(dt.publish,async()=>{s(await this.deleteSession(r))})}),this.sendResult(i,r,!0)]),this.client.events.emit("session_delete",{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.client.logger.error(s)}},this.onSessionRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidRequest(qt({topic:r},s)),await this.setPendingSessionRequest({id:i,topic:r,params:s});const c=$r(JSON.stringify(n)),o=this.client.session.get(r),h=await this.getVerifyContext(c,o.peer.metadata);this.client.events.emit("session_request",{id:i,topic:r,params:s,context:h})}catch(c){await this.sendError(i,r,c),this.client.logger.error(c)}},this.onSessionRequestResponse=(r,n)=>{const{id:i}=n;hr(n)?this.events.emit(Qe("session_request",i),{result:n.result}):Jt(n)&&this.events.emit(Qe("session_request",i),{error:n.error})},this.onSessionEventRequest=async(r,n)=>{const{id:i,params:s}=n;try{this.isValidEmit(qt({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s})}catch(c){await this.sendError(i,r,c),this.client.logger.error(c)}},this.isValidConnect=async r=>{if(!Pt(r)){const{message:h}=ne("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(h)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:c,relays:o}=r;if(Ct(n)||await this.isValidPairingTopic(n),!Py(o,!0)){const{message:h}=ne("MISSING_OR_INVALID",`connect() relays: ${o}`);throw new Error(h)}!Ct(i)&&Rn(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!Ct(s)&&Rn(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Ct(c)||this.validateSessionProps(c,"sessionProperties")},this.validateNamespaces=(r,n)=>{const i=Ry(r,"connect()",n);if(i)throw new Error(i.message)},this.isValidApprove=async r=>{if(!Pt(r))throw new Error(ne("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:c}=r;await this.isValidProposalId(n);const o=this.client.proposal.get(n),h=fi(i,"approve()");if(h)throw new Error(h.message);const p=za(o.requiredNamespaces,i,"approve()");if(p)throw new Error(p.message);if(!pt(s,!0)){const{message:m}=ne("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(m)}Ct(c)||this.validateSessionProps(c,"sessionProperties")},this.isValidReject=async r=>{if(!Pt(r)){const{message:s}=ne("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(await this.isValidProposalId(n),!Fy(i)){const{message:s}=ne("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=r=>{if(!Pt(r)){const{message:p}=ne("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(p)}const{relay:n,controller:i,namespaces:s,expiry:c}=r;if(!el(n)){const{message:p}=ne("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(p)}const o=Dy(i,"onSessionSettleRequest()");if(o)throw new Error(o.message);const h=fi(s,"onSessionSettleRequest()");if(h)throw new Error(h.message);if(Er(c)){const{message:p}=ne("EXPIRED","onSessionSettleRequest()");throw new Error(p)}},this.isValidUpdate=async r=>{if(!Pt(r)){const{message:h}=ne("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(h)}const{topic:n,namespaces:i}=r;await this.isValidSessionTopic(n);const s=this.client.session.get(n),c=fi(i,"update()");if(c)throw new Error(c.message);const o=za(s.requiredNamespaces,i,"update()");if(o)throw new Error(o.message)},this.isValidExtend=async r=>{if(!Pt(r)){const{message:i}=ne("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionTopic(n)},this.isValidRequest=async r=>{if(!Pt(r)){const{message:h}=ne("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(h)}const{topic:n,request:i,chainId:s,expiry:c}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!ka(o,s)){const{message:h}=ne("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(h)}if(!Ly(i)){const{message:h}=ne("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(h)}if(!My(o,s,i.method)){const{message:h}=ne("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(h)}if(c&&!zy(c,gs)){const{message:h}=ne("MISSING_OR_INVALID",`request() expiry: ${c}. Expiry must be a number (in seconds) between ${gs.min} and ${gs.max}`);throw new Error(h)}},this.isValidRespond=async r=>{if(!Pt(r)){const{message:s}=ne("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(s)}const{topic:n,response:i}=r;if(await this.isValidSessionTopic(n),!Uy(i)){const{message:s}=ne("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidPing=async r=>{if(!Pt(r)){const{message:i}=ne("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async r=>{if(!Pt(r)){const{message:o}=ne("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(o)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:c}=this.client.session.get(n);if(!ka(c,s)){const{message:o}=ne("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(o)}if(!$y(i)){const{message:o}=ne("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(o)}if(!By(c,s,i.name)){const{message:o}=ne("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(o)}},this.isValidDisconnect=async r=>{if(!Pt(r)){const{message:i}=ne("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)},this.getVerifyContext=async(r,n)=>{const i={verified:{verifyUrl:n.verifyUrl||"",validation:"UNKNOWN",origin:n.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:r,verifyUrl:n.verifyUrl});s&&(i.verified.origin=s,i.verified.validation=s===n.url?"VALID":"INVALID")}catch(s){this.client.logger.error(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(r,n)=>{Object.values(r).forEach(i=>{if(!pt(i,!1)){const{message:s}=ne("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}}isInitialized(){if(!this.initialized){const{message:t}=ne("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.client.core.relayer.on(dt.message,async t=>{const{topic:r,message:n}=t;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(n)))return;const i=await this.client.core.crypto.decode(r,n);go(i)?(this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i})):yo(i)&&(await this.client.core.history.resolve(i),this.onRelayEventResponse({topic:r,payload:i}))})}registerExpirerEvents(){this.client.core.expirer.on(Wt.expired,async t=>{const{topic:r,id:n}=Zu(t.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,ne("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}isValidPairingTopic(t){if(!pt(t,!1)){const{message:r}=ne("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:r}=ne("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(r)}if(Er(this.client.core.pairing.pairings.get(t).expiry)){const{message:r}=ne("EXPIRED",`pairing topic: ${t}`);throw new Error(r)}}async isValidSessionTopic(t){if(!pt(t,!1)){const{message:r}=ne("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(r)}if(!this.client.session.keys.includes(t)){const{message:r}=ne("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(r)}if(Er(this.client.session.get(t).expiry)){await this.deleteSession(t);const{message:r}=ne("EXPIRED",`session topic: ${t}`);throw new Error(r)}}async isValidSessionOrPairingTopic(t){if(this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(pt(t,!1)){const{message:r}=ne("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(r)}else{const{message:r}=ne("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(r)}}async isValidProposalId(t){if(!Ny(t)){const{message:r}=ne("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(r)}if(!this.client.proposal.keys.includes(t)){const{message:r}=ne("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(r)}if(Er(this.client.proposal.get(t).expiry)){await this.deleteProposal(t);const{message:r}=ne("EXPIRED",`proposal id: ${t}`);throw new Error(r)}}}class Xw extends Ji{constructor(t,r){super(t,r,Bw,bo),this.core=t,this.logger=r}}class Zw extends Ji{constructor(t,r){super(t,r,kw,bo),this.core=t,this.logger=r}}class Qw extends Ji{constructor(t,r){super(t,r,Kw,bo,n=>n.id),this.core=t,this.logger=r}}class wo extends tp{constructor(t){super(t),this.protocol=El,this.version=vl,this.name=ps.name,this.events=new Xt.EventEmitter,this.on=(n,i)=>this.events.on(n,i),this.once=(n,i)=>this.events.once(n,i),this.off=(n,i)=>this.events.off(n,i),this.removeListener=(n,i)=>this.events.removeListener(n,i),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}},this.update=async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}},this.request=async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}},this.find=n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.name=(t==null?void 0:t.name)||ps.name,this.metadata=(t==null?void 0:t.metadata)||Z1();const r=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Oe.pino(Oe.getDefaultLoggerOptions({level:(t==null?void 0:t.logger)||ps.logger}));this.core=(t==null?void 0:t.core)||new Mw(t),this.logger=Oe.generateChildLogger(r,this.name),this.session=new Zw(this.core,this.logger),this.proposal=new Xw(this.core,this.logger),this.pendingRequest=new Qw(this.core,this.logger),this.engine=new Jw(this)}static async init(t){const r=new wo(t);return await r.initialize(),r}get context(){return Oe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}}const e_="modulepreload",t_=function(e){return"/"+e},gc={},r_=function(t,r,n){if(!r||r.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(r.map(s=>{if(s=t_(s),s in gc)return;gc[s]=!0;const c=s.endsWith(".css"),o=c?'[rel="stylesheet"]':"";if(!!n)for(let m=i.length-1;m>=0;m--){const E=i[m];if(E.href===s&&(!c||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${o}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":e_,c||(p.as="script",p.crossOrigin=""),p.href=s,document.head.appendChild(p),c)return new Promise((m,E)=>{p.addEventListener("load",m),p.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())},n_=Symbol(),yc=Object.getPrototypeOf,Us=new WeakMap,i_=e=>e&&(Us.has(e)?Us.get(e):yc(e)===Object.prototype||yc(e)===Array.prototype),s_=e=>i_(e)&&e[n_]||null,mc=(e,t=!0)=>{Us.set(e,t)},ms=e=>typeof e=="object"&&e!==null,vr=new WeakMap,ni=new WeakSet,o_=(e=Object.is,t=(p,m)=>new Proxy(p,m),r=p=>ms(p)&&!ni.has(p)&&(Array.isArray(p)||!(Symbol.iterator in p))&&!(p instanceof WeakMap)&&!(p instanceof WeakSet)&&!(p instanceof Error)&&!(p instanceof Number)&&!(p instanceof Date)&&!(p instanceof String)&&!(p instanceof RegExp)&&!(p instanceof ArrayBuffer),n=p=>{switch(p.status){case"fulfilled":return p.value;case"rejected":throw p.reason;default:throw p}},i=new WeakMap,s=(p,m,E=n)=>{const A=i.get(p);if((A==null?void 0:A[0])===m)return A[1];const I=Array.isArray(p)?[]:Object.create(Object.getPrototypeOf(p));return mc(I,!0),i.set(p,[m,I]),Reflect.ownKeys(p).forEach(S=>{if(Object.getOwnPropertyDescriptor(I,S))return;const R=Reflect.get(p,S),j={value:R,enumerable:!0,configurable:!0};if(ni.has(R))mc(R,!1);else if(R instanceof Promise)delete j.value,j.get=()=>E(R);else if(vr.has(R)){const[H,T]=vr.get(R);j.value=s(H,T(),E)}Object.defineProperty(I,S,j)}),I},c=new WeakMap,o=[1,1],h=p=>{if(!ms(p))throw new Error("object required");const m=c.get(p);if(m)return m;let E=o[0];const A=new Set,I=(z,w=++o[0])=>{E!==w&&(E=w,A.forEach(C=>C(z,w)))};let S=o[1];const R=(z=++o[1])=>(S!==z&&!A.size&&(S=z,H.forEach(([w])=>{const C=w[1](z);C>E&&(E=C)})),E),j=z=>(w,C)=>{const U=[...w];U[1]=[z,...U[1]],I(U,C)},H=new Map,T=(z,w)=>{if(({VITE_PROJECT_ID:"f8ecda7a059571686392adfb46ff2b1b",VITE_RELAY_URL:"wss://relay.walletconnect.com",VITE_CHAIN_ID:"chia:testnet",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&H.has(z))throw new Error("prop listener already exists");if(A.size){const C=w[3](j(z));H.set(z,[w,C])}else H.set(z,[w])},F=z=>{var w;const C=H.get(z);C&&(H.delete(z),(w=C[1])==null||w.call(C))},v=z=>(A.add(z),A.size===1&&H.forEach(([C,U],W)=>{if(({VITE_PROJECT_ID:"f8ecda7a059571686392adfb46ff2b1b",VITE_RELAY_URL:"wss://relay.walletconnect.com",VITE_CHAIN_ID:"chia:testnet",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&U)throw new Error("remove already exists");const x=C[3](j(W));H.set(W,[C,x])}),()=>{A.delete(z),A.size===0&&H.forEach(([C,U],W)=>{U&&(U(),H.set(W,[C]))})}),D=Array.isArray(p)?[]:Object.create(Object.getPrototypeOf(p)),a=t(D,{deleteProperty(z,w){const C=Reflect.get(z,w);F(w);const U=Reflect.deleteProperty(z,w);return U&&I(["delete",[w],C]),U},set(z,w,C,U){const W=Reflect.has(z,w),x=Reflect.get(z,w,U);if(W&&(e(x,C)||c.has(C)&&e(x,c.get(C))))return!0;F(w),ms(C)&&(C=s_(C)||C);let O=C;if(C instanceof Promise)C.then(Y=>{C.status="fulfilled",C.value=Y,I(["resolve",[w],Y])}).catch(Y=>{C.status="rejected",C.reason=Y,I(["reject",[w],Y])});else{!vr.has(C)&&r(C)&&(O=h(C));const Y=!ni.has(O)&&vr.get(O);Y&&T(w,Y)}return Reflect.set(z,w,O,U),I(["set",[w],C,x]),!0}});c.set(p,a);const g=[D,R,s,v];return vr.set(a,g),Reflect.ownKeys(p).forEach(z=>{const w=Object.getOwnPropertyDescriptor(p,z);"value"in w&&(a[z]=p[z],delete w.value,delete w.writable),Object.defineProperty(D,z,w)}),a})=>[h,vr,ni,e,t,r,n,i,s,c,o],[a_]=o_();function ar(e={}){return a_(e)}function yr(e,t,r){const n=vr.get(e);({VITE_PROJECT_ID:"f8ecda7a059571686392adfb46ff2b1b",VITE_RELAY_URL:"wss://relay.walletconnect.com",VITE_CHAIN_ID:"chia:testnet",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&!n&&console.warn("Please use proxy object");let i;const s=[],c=n[3];let o=!1;const p=c(m=>{if(s.push(m),r){t(s.splice(0));return}i||(i=Promise.resolve().then(()=>{i=void 0,o&&t(s.splice(0))}))});return o=!0,()=>{o=!1,p()}}function c_(e,t){const r=vr.get(e);({VITE_PROJECT_ID:"f8ecda7a059571686392adfb46ff2b1b",VITE_RELAY_URL:"wss://relay.walletconnect.com",VITE_CHAIN_ID:"chia:testnet",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&!r&&console.warn("Please use proxy object");const[n,i,s]=r;return s(n,i(),t)}var Sl={},Xi={};Xi.byteLength=f_;Xi.toByteArray=d_;Xi.fromByteArray=y_;var sr=[],Vt=[],u_=typeof Uint8Array<"u"?Uint8Array:Array,bs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Gr=0,l_=bs.length;Gr<l_;++Gr)sr[Gr]=bs[Gr],Vt[bs.charCodeAt(Gr)]=Gr;Vt["-".charCodeAt(0)]=62;Vt["_".charCodeAt(0)]=63;function Dl(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var n=r===t?0:4-r%4;return[r,n]}function f_(e){var t=Dl(e),r=t[0],n=t[1];return(r+n)*3/4-n}function h_(e,t,r){return(t+r)*3/4-r}function d_(e){var t,r=Dl(e),n=r[0],i=r[1],s=new u_(h_(e,n,i)),c=0,o=i>0?n-4:n,h;for(h=0;h<o;h+=4)t=Vt[e.charCodeAt(h)]<<18|Vt[e.charCodeAt(h+1)]<<12|Vt[e.charCodeAt(h+2)]<<6|Vt[e.charCodeAt(h+3)],s[c++]=t>>16&255,s[c++]=t>>8&255,s[c++]=t&255;return i===2&&(t=Vt[e.charCodeAt(h)]<<2|Vt[e.charCodeAt(h+1)]>>4,s[c++]=t&255),i===1&&(t=Vt[e.charCodeAt(h)]<<10|Vt[e.charCodeAt(h+1)]<<4|Vt[e.charCodeAt(h+2)]>>2,s[c++]=t>>8&255,s[c++]=t&255),s}function p_(e){return sr[e>>18&63]+sr[e>>12&63]+sr[e>>6&63]+sr[e&63]}function g_(e,t,r){for(var n,i=[],s=t;s<r;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),i.push(p_(n));return i.join("")}function y_(e){for(var t,r=e.length,n=r%3,i=[],s=16383,c=0,o=r-n;c<o;c+=s)i.push(g_(e,c,c+s>o?o:c+s));return n===1?(t=e[r-1],i.push(sr[t>>2]+sr[t<<4&63]+"==")):n===2&&(t=(e[r-2]<<8)+e[r-1],i.push(sr[t>>10]+sr[t>>4&63]+sr[t<<2&63]+"=")),i.join("")}var _o={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_o.read=function(e,t,r,n,i){var s,c,o=i*8-n-1,h=(1<<o)-1,p=h>>1,m=-7,E=r?i-1:0,A=r?-1:1,I=e[t+E];for(E+=A,s=I&(1<<-m)-1,I>>=-m,m+=o;m>0;s=s*256+e[t+E],E+=A,m-=8);for(c=s&(1<<-m)-1,s>>=-m,m+=n;m>0;c=c*256+e[t+E],E+=A,m-=8);if(s===0)s=1-p;else{if(s===h)return c?NaN:(I?-1:1)*(1/0);c=c+Math.pow(2,n),s=s-p}return(I?-1:1)*c*Math.pow(2,s-n)};_o.write=function(e,t,r,n,i,s){var c,o,h,p=s*8-i-1,m=(1<<p)-1,E=m>>1,A=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,I=n?0:s-1,S=n?1:-1,R=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,c=m):(c=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-c))<1&&(c--,h*=2),c+E>=1?t+=A/h:t+=A*Math.pow(2,1-E),t*h>=2&&(c++,h/=2),c+E>=m?(o=0,c=m):c+E>=1?(o=(t*h-1)*Math.pow(2,i),c=c+E):(o=t*Math.pow(2,E-1)*Math.pow(2,i),c=0));i>=8;e[r+I]=o&255,I+=S,o/=256,i-=8);for(c=c<<i|o,p+=i;p>0;e[r+I]=c&255,I+=S,c/=256,p-=8);e[r+I-S]|=R*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Xi,r=_o,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=T,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=s(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const d=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(d,u),d.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function c(d){if(d>i)throw new RangeError('The value "'+d+'" is invalid for option "size"');const u=new Uint8Array(d);return Object.setPrototypeOf(u,o.prototype),u}function o(d,u,l){if(typeof d=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(d)}return h(d,u,l)}o.poolSize=8192;function h(d,u,l){if(typeof d=="string")return A(d,u);if(ArrayBuffer.isView(d))return S(d);if(d==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(he(d,ArrayBuffer)||d&&he(d.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(he(d,SharedArrayBuffer)||d&&he(d.buffer,SharedArrayBuffer)))return R(d,u,l);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const b=d.valueOf&&d.valueOf();if(b!=null&&b!==d)return o.from(b,u,l);const N=j(d);if(N)return N;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return o.from(d[Symbol.toPrimitive]("string"),u,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}o.from=function(d,u,l){return h(d,u,l)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function p(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function m(d,u,l){return p(d),d<=0?c(d):u!==void 0?typeof l=="string"?c(d).fill(u,l):c(d).fill(u):c(d)}o.alloc=function(d,u,l){return m(d,u,l)};function E(d){return p(d),c(d<0?0:H(d)|0)}o.allocUnsafe=function(d){return E(d)},o.allocUnsafeSlow=function(d){return E(d)};function A(d,u){if((typeof u!="string"||u==="")&&(u="utf8"),!o.isEncoding(u))throw new TypeError("Unknown encoding: "+u);const l=F(d,u)|0;let b=c(l);const N=b.write(d,u);return N!==l&&(b=b.slice(0,N)),b}function I(d){const u=d.length<0?0:H(d.length)|0,l=c(u);for(let b=0;b<u;b+=1)l[b]=d[b]&255;return l}function S(d){if(he(d,Uint8Array)){const u=new Uint8Array(d);return R(u.buffer,u.byteOffset,u.byteLength)}return I(d)}function R(d,u,l){if(u<0||d.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<u+(l||0))throw new RangeError('"length" is outside of buffer bounds');let b;return u===void 0&&l===void 0?b=new Uint8Array(d):l===void 0?b=new Uint8Array(d,u):b=new Uint8Array(d,u,l),Object.setPrototypeOf(b,o.prototype),b}function j(d){if(o.isBuffer(d)){const u=H(d.length)|0,l=c(u);return l.length===0||d.copy(l,0,0,u),l}if(d.length!==void 0)return typeof d.length!="number"||ye(d.length)?c(0):I(d);if(d.type==="Buffer"&&Array.isArray(d.data))return I(d.data)}function H(d){if(d>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return d|0}function T(d){return+d!=d&&(d=0),o.alloc(+d)}o.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==o.prototype},o.compare=function(u,l){if(he(u,Uint8Array)&&(u=o.from(u,u.offset,u.byteLength)),he(l,Uint8Array)&&(l=o.from(l,l.offset,l.byteLength)),!o.isBuffer(u)||!o.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===l)return 0;let b=u.length,N=l.length;for(let M=0,K=Math.min(b,N);M<K;++M)if(u[M]!==l[M]){b=u[M],N=l[M];break}return b<N?-1:N<b?1:0},o.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(u,l){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return o.alloc(0);let b;if(l===void 0)for(l=0,b=0;b<u.length;++b)l+=u[b].length;const N=o.allocUnsafe(l);let M=0;for(b=0;b<u.length;++b){let K=u[b];if(he(K,Uint8Array))M+K.length>N.length?(o.isBuffer(K)||(K=o.from(K)),K.copy(N,M)):Uint8Array.prototype.set.call(N,K,M);else if(o.isBuffer(K))K.copy(N,M);else throw new TypeError('"list" argument must be an Array of Buffers');M+=K.length}return N};function F(d,u){if(o.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||he(d,ArrayBuffer))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);const l=d.length,b=arguments.length>2&&arguments[2]===!0;if(!b&&l===0)return 0;let N=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return De(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return Ee(d).length;default:if(N)return b?-1:De(d).length;u=(""+u).toLowerCase(),N=!0}}o.byteLength=F;function v(d,u,l){let b=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,u>>>=0,l<=u))return"";for(d||(d="utf8");;)switch(d){case"hex":return q(this,u,l);case"utf8":case"utf-8":return x(this,u,l);case"ascii":return J(this,u,l);case"latin1":case"binary":return G(this,u,l);case"base64":return W(this,u,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,u,l);default:if(b)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),b=!0}}o.prototype._isBuffer=!0;function D(d,u,l){const b=d[u];d[u]=d[l],d[l]=b}o.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<u;l+=2)D(this,l,l+1);return this},o.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<u;l+=4)D(this,l,l+3),D(this,l+1,l+2);return this},o.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<u;l+=8)D(this,l,l+7),D(this,l+1,l+6),D(this,l+2,l+5),D(this,l+3,l+4);return this},o.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?x(this,0,u):v.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(u){if(!o.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:o.compare(this,u)===0},o.prototype.inspect=function(){let u="";const l=e.INSPECT_MAX_BYTES;return u=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(u+=" ... "),"<Buffer "+u+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(u,l,b,N,M){if(he(u,Uint8Array)&&(u=o.from(u,u.offset,u.byteLength)),!o.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(l===void 0&&(l=0),b===void 0&&(b=u?u.length:0),N===void 0&&(N=0),M===void 0&&(M=this.length),l<0||b>u.length||N<0||M>this.length)throw new RangeError("out of range index");if(N>=M&&l>=b)return 0;if(N>=M)return-1;if(l>=b)return 1;if(l>>>=0,b>>>=0,N>>>=0,M>>>=0,this===u)return 0;let K=M-N,se=b-l;const ce=Math.min(K,se),ve=this.slice(N,M),Ie=u.slice(l,b);for(let xe=0;xe<ce;++xe)if(ve[xe]!==Ie[xe]){K=ve[xe],se=Ie[xe];break}return K<se?-1:se<K?1:0};function y(d,u,l,b,N){if(d.length===0)return-1;if(typeof l=="string"?(b=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,ye(l)&&(l=N?0:d.length-1),l<0&&(l=d.length+l),l>=d.length){if(N)return-1;l=d.length-1}else if(l<0)if(N)l=0;else return-1;if(typeof u=="string"&&(u=o.from(u,b)),o.isBuffer(u))return u.length===0?-1:a(d,u,l,b,N);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?N?Uint8Array.prototype.indexOf.call(d,u,l):Uint8Array.prototype.lastIndexOf.call(d,u,l):a(d,[u],l,b,N);throw new TypeError("val must be string, number or Buffer")}function a(d,u,l,b,N){let M=1,K=d.length,se=u.length;if(b!==void 0&&(b=String(b).toLowerCase(),b==="ucs2"||b==="ucs-2"||b==="utf16le"||b==="utf-16le")){if(d.length<2||u.length<2)return-1;M=2,K/=2,se/=2,l/=2}function ce(Ie,xe){return M===1?Ie[xe]:Ie.readUInt16BE(xe*M)}let ve;if(N){let Ie=-1;for(ve=l;ve<K;ve++)if(ce(d,ve)===ce(u,Ie===-1?0:ve-Ie)){if(Ie===-1&&(Ie=ve),ve-Ie+1===se)return Ie*M}else Ie!==-1&&(ve-=ve-Ie),Ie=-1}else for(l+se>K&&(l=K-se),ve=l;ve>=0;ve--){let Ie=!0;for(let xe=0;xe<se;xe++)if(ce(d,ve+xe)!==ce(u,xe)){Ie=!1;break}if(Ie)return ve}return-1}o.prototype.includes=function(u,l,b){return this.indexOf(u,l,b)!==-1},o.prototype.indexOf=function(u,l,b){return y(this,u,l,b,!0)},o.prototype.lastIndexOf=function(u,l,b){return y(this,u,l,b,!1)};function g(d,u,l,b){l=Number(l)||0;const N=d.length-l;b?(b=Number(b),b>N&&(b=N)):b=N;const M=u.length;b>M/2&&(b=M/2);let K;for(K=0;K<b;++K){const se=parseInt(u.substr(K*2,2),16);if(ye(se))return K;d[l+K]=se}return K}function z(d,u,l,b){return be(De(u,d.length-l),d,l,b)}function w(d,u,l,b){return be(je(u),d,l,b)}function C(d,u,l,b){return be(Ee(u),d,l,b)}function U(d,u,l,b){return be($e(u,d.length-l),d,l,b)}o.prototype.write=function(u,l,b,N){if(l===void 0)N="utf8",b=this.length,l=0;else if(b===void 0&&typeof l=="string")N=l,b=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(b)?(b=b>>>0,N===void 0&&(N="utf8")):(N=b,b=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const M=this.length-l;if((b===void 0||b>M)&&(b=M),u.length>0&&(b<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");N||(N="utf8");let K=!1;for(;;)switch(N){case"hex":return g(this,u,l,b);case"utf8":case"utf-8":return z(this,u,l,b);case"ascii":case"latin1":case"binary":return w(this,u,l,b);case"base64":return C(this,u,l,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,u,l,b);default:if(K)throw new TypeError("Unknown encoding: "+N);N=(""+N).toLowerCase(),K=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function W(d,u,l){return u===0&&l===d.length?t.fromByteArray(d):t.fromByteArray(d.slice(u,l))}function x(d,u,l){l=Math.min(d.length,l);const b=[];let N=u;for(;N<l;){const M=d[N];let K=null,se=M>239?4:M>223?3:M>191?2:1;if(N+se<=l){let ce,ve,Ie,xe;switch(se){case 1:M<128&&(K=M);break;case 2:ce=d[N+1],(ce&192)===128&&(xe=(M&31)<<6|ce&63,xe>127&&(K=xe));break;case 3:ce=d[N+1],ve=d[N+2],(ce&192)===128&&(ve&192)===128&&(xe=(M&15)<<12|(ce&63)<<6|ve&63,xe>2047&&(xe<55296||xe>57343)&&(K=xe));break;case 4:ce=d[N+1],ve=d[N+2],Ie=d[N+3],(ce&192)===128&&(ve&192)===128&&(Ie&192)===128&&(xe=(M&15)<<18|(ce&63)<<12|(ve&63)<<6|Ie&63,xe>65535&&xe<1114112&&(K=xe))}}K===null?(K=65533,se=1):K>65535&&(K-=65536,b.push(K>>>10&1023|55296),K=56320|K&1023),b.push(K),N+=se}return Y(b)}const O=4096;function Y(d){const u=d.length;if(u<=O)return String.fromCharCode.apply(String,d);let l="",b=0;for(;b<u;)l+=String.fromCharCode.apply(String,d.slice(b,b+=O));return l}function J(d,u,l){let b="";l=Math.min(d.length,l);for(let N=u;N<l;++N)b+=String.fromCharCode(d[N]&127);return b}function G(d,u,l){let b="";l=Math.min(d.length,l);for(let N=u;N<l;++N)b+=String.fromCharCode(d[N]);return b}function q(d,u,l){const b=d.length;(!u||u<0)&&(u=0),(!l||l<0||l>b)&&(l=b);let N="";for(let M=u;M<l;++M)N+=we[d[M]];return N}function V(d,u,l){const b=d.slice(u,l);let N="";for(let M=0;M<b.length-1;M+=2)N+=String.fromCharCode(b[M]+b[M+1]*256);return N}o.prototype.slice=function(u,l){const b=this.length;u=~~u,l=l===void 0?b:~~l,u<0?(u+=b,u<0&&(u=0)):u>b&&(u=b),l<0?(l+=b,l<0&&(l=0)):l>b&&(l=b),l<u&&(l=u);const N=this.subarray(u,l);return Object.setPrototypeOf(N,o.prototype),N};function X(d,u,l){if(d%1!==0||d<0)throw new RangeError("offset is not uint");if(d+u>l)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(u,l,b){u=u>>>0,l=l>>>0,b||X(u,l,this.length);let N=this[u],M=1,K=0;for(;++K<l&&(M*=256);)N+=this[u+K]*M;return N},o.prototype.readUintBE=o.prototype.readUIntBE=function(u,l,b){u=u>>>0,l=l>>>0,b||X(u,l,this.length);let N=this[u+--l],M=1;for(;l>0&&(M*=256);)N+=this[u+--l]*M;return N},o.prototype.readUint8=o.prototype.readUInt8=function(u,l){return u=u>>>0,l||X(u,1,this.length),this[u]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(u,l){return u=u>>>0,l||X(u,2,this.length),this[u]|this[u+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(u,l){return u=u>>>0,l||X(u,2,this.length),this[u]<<8|this[u+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(u,l){return u=u>>>0,l||X(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(u,l){return u=u>>>0,l||X(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},o.prototype.readBigUInt64LE=fe(function(u){u=u>>>0,re(u,"offset");const l=this[u],b=this[u+7];(l===void 0||b===void 0)&&de(u,this.length-8);const N=l+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,M=this[++u]+this[++u]*2**8+this[++u]*2**16+b*2**24;return BigInt(N)+(BigInt(M)<<BigInt(32))}),o.prototype.readBigUInt64BE=fe(function(u){u=u>>>0,re(u,"offset");const l=this[u],b=this[u+7];(l===void 0||b===void 0)&&de(u,this.length-8);const N=l*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],M=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+b;return(BigInt(N)<<BigInt(32))+BigInt(M)}),o.prototype.readIntLE=function(u,l,b){u=u>>>0,l=l>>>0,b||X(u,l,this.length);let N=this[u],M=1,K=0;for(;++K<l&&(M*=256);)N+=this[u+K]*M;return M*=128,N>=M&&(N-=Math.pow(2,8*l)),N},o.prototype.readIntBE=function(u,l,b){u=u>>>0,l=l>>>0,b||X(u,l,this.length);let N=l,M=1,K=this[u+--N];for(;N>0&&(M*=256);)K+=this[u+--N]*M;return M*=128,K>=M&&(K-=Math.pow(2,8*l)),K},o.prototype.readInt8=function(u,l){return u=u>>>0,l||X(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},o.prototype.readInt16LE=function(u,l){u=u>>>0,l||X(u,2,this.length);const b=this[u]|this[u+1]<<8;return b&32768?b|4294901760:b},o.prototype.readInt16BE=function(u,l){u=u>>>0,l||X(u,2,this.length);const b=this[u+1]|this[u]<<8;return b&32768?b|4294901760:b},o.prototype.readInt32LE=function(u,l){return u=u>>>0,l||X(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},o.prototype.readInt32BE=function(u,l){return u=u>>>0,l||X(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},o.prototype.readBigInt64LE=fe(function(u){u=u>>>0,re(u,"offset");const l=this[u],b=this[u+7];(l===void 0||b===void 0)&&de(u,this.length-8);const N=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(b<<24);return(BigInt(N)<<BigInt(32))+BigInt(l+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),o.prototype.readBigInt64BE=fe(function(u){u=u>>>0,re(u,"offset");const l=this[u],b=this[u+7];(l===void 0||b===void 0)&&de(u,this.length-8);const N=(l<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(N)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+b)}),o.prototype.readFloatLE=function(u,l){return u=u>>>0,l||X(u,4,this.length),r.read(this,u,!0,23,4)},o.prototype.readFloatBE=function(u,l){return u=u>>>0,l||X(u,4,this.length),r.read(this,u,!1,23,4)},o.prototype.readDoubleLE=function(u,l){return u=u>>>0,l||X(u,8,this.length),r.read(this,u,!0,52,8)},o.prototype.readDoubleBE=function(u,l){return u=u>>>0,l||X(u,8,this.length),r.read(this,u,!1,52,8)};function te(d,u,l,b,N,M){if(!o.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>N||u<M)throw new RangeError('"value" argument is out of bounds');if(l+b>d.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(u,l,b,N){if(u=+u,l=l>>>0,b=b>>>0,!N){const se=Math.pow(2,8*b)-1;te(this,u,l,b,se,0)}let M=1,K=0;for(this[l]=u&255;++K<b&&(M*=256);)this[l+K]=u/M&255;return l+b},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(u,l,b,N){if(u=+u,l=l>>>0,b=b>>>0,!N){const se=Math.pow(2,8*b)-1;te(this,u,l,b,se,0)}let M=b-1,K=1;for(this[l+M]=u&255;--M>=0&&(K*=256);)this[l+M]=u/K&255;return l+b},o.prototype.writeUint8=o.prototype.writeUInt8=function(u,l,b){return u=+u,l=l>>>0,b||te(this,u,l,1,255,0),this[l]=u&255,l+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(u,l,b){return u=+u,l=l>>>0,b||te(this,u,l,2,65535,0),this[l]=u&255,this[l+1]=u>>>8,l+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(u,l,b){return u=+u,l=l>>>0,b||te(this,u,l,2,65535,0),this[l]=u>>>8,this[l+1]=u&255,l+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(u,l,b){return u=+u,l=l>>>0,b||te(this,u,l,4,4294967295,0),this[l+3]=u>>>24,this[l+2]=u>>>16,this[l+1]=u>>>8,this[l]=u&255,l+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(u,l,b){return u=+u,l=l>>>0,b||te(this,u,l,4,4294967295,0),this[l]=u>>>24,this[l+1]=u>>>16,this[l+2]=u>>>8,this[l+3]=u&255,l+4};function Q(d,u,l,b,N){ee(u,b,N,d,l,7);let M=Number(u&BigInt(4294967295));d[l++]=M,M=M>>8,d[l++]=M,M=M>>8,d[l++]=M,M=M>>8,d[l++]=M;let K=Number(u>>BigInt(32)&BigInt(4294967295));return d[l++]=K,K=K>>8,d[l++]=K,K=K>>8,d[l++]=K,K=K>>8,d[l++]=K,l}function ae(d,u,l,b,N){ee(u,b,N,d,l,7);let M=Number(u&BigInt(4294967295));d[l+7]=M,M=M>>8,d[l+6]=M,M=M>>8,d[l+5]=M,M=M>>8,d[l+4]=M;let K=Number(u>>BigInt(32)&BigInt(4294967295));return d[l+3]=K,K=K>>8,d[l+2]=K,K=K>>8,d[l+1]=K,K=K>>8,d[l]=K,l+8}o.prototype.writeBigUInt64LE=fe(function(u,l=0){return Q(this,u,l,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=fe(function(u,l=0){return ae(this,u,l,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(u,l,b,N){if(u=+u,l=l>>>0,!N){const ce=Math.pow(2,8*b-1);te(this,u,l,b,ce-1,-ce)}let M=0,K=1,se=0;for(this[l]=u&255;++M<b&&(K*=256);)u<0&&se===0&&this[l+M-1]!==0&&(se=1),this[l+M]=(u/K>>0)-se&255;return l+b},o.prototype.writeIntBE=function(u,l,b,N){if(u=+u,l=l>>>0,!N){const ce=Math.pow(2,8*b-1);te(this,u,l,b,ce-1,-ce)}let M=b-1,K=1,se=0;for(this[l+M]=u&255;--M>=0&&(K*=256);)u<0&&se===0&&this[l+M+1]!==0&&(se=1),this[l+M]=(u/K>>0)-se&255;return l+b},o.prototype.writeInt8=function(u,l,b){return u=+u,l=l>>>0,b||te(this,u,l,1,127,-128),u<0&&(u=255+u+1),this[l]=u&255,l+1},o.prototype.writeInt16LE=function(u,l,b){return u=+u,l=l>>>0,b||te(this,u,l,2,32767,-32768),this[l]=u&255,this[l+1]=u>>>8,l+2},o.prototype.writeInt16BE=function(u,l,b){return u=+u,l=l>>>0,b||te(this,u,l,2,32767,-32768),this[l]=u>>>8,this[l+1]=u&255,l+2},o.prototype.writeInt32LE=function(u,l,b){return u=+u,l=l>>>0,b||te(this,u,l,4,2147483647,-2147483648),this[l]=u&255,this[l+1]=u>>>8,this[l+2]=u>>>16,this[l+3]=u>>>24,l+4},o.prototype.writeInt32BE=function(u,l,b){return u=+u,l=l>>>0,b||te(this,u,l,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[l]=u>>>24,this[l+1]=u>>>16,this[l+2]=u>>>8,this[l+3]=u&255,l+4},o.prototype.writeBigInt64LE=fe(function(u,l=0){return Q(this,u,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=fe(function(u,l=0){return ae(this,u,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ie(d,u,l,b,N,M){if(l+b>d.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function le(d,u,l,b,N){return u=+u,l=l>>>0,N||ie(d,u,l,4),r.write(d,u,l,b,23,4),l+4}o.prototype.writeFloatLE=function(u,l,b){return le(this,u,l,!0,b)},o.prototype.writeFloatBE=function(u,l,b){return le(this,u,l,!1,b)};function k(d,u,l,b,N){return u=+u,l=l>>>0,N||ie(d,u,l,8),r.write(d,u,l,b,52,8),l+8}o.prototype.writeDoubleLE=function(u,l,b){return k(this,u,l,!0,b)},o.prototype.writeDoubleBE=function(u,l,b){return k(this,u,l,!1,b)},o.prototype.copy=function(u,l,b,N){if(!o.isBuffer(u))throw new TypeError("argument should be a Buffer");if(b||(b=0),!N&&N!==0&&(N=this.length),l>=u.length&&(l=u.length),l||(l=0),N>0&&N<b&&(N=b),N===b||u.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(b<0||b>=this.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("sourceEnd out of bounds");N>this.length&&(N=this.length),u.length-l<N-b&&(N=u.length-l+b);const M=N-b;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(l,b,N):Uint8Array.prototype.set.call(u,this.subarray(b,N),l),M},o.prototype.fill=function(u,l,b,N){if(typeof u=="string"){if(typeof l=="string"?(N=l,l=0,b=this.length):typeof b=="string"&&(N=b,b=this.length),N!==void 0&&typeof N!="string")throw new TypeError("encoding must be a string");if(typeof N=="string"&&!o.isEncoding(N))throw new TypeError("Unknown encoding: "+N);if(u.length===1){const K=u.charCodeAt(0);(N==="utf8"&&K<128||N==="latin1")&&(u=K)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(l<0||this.length<l||this.length<b)throw new RangeError("Out of range index");if(b<=l)return this;l=l>>>0,b=b===void 0?this.length:b>>>0,u||(u=0);let M;if(typeof u=="number")for(M=l;M<b;++M)this[M]=u;else{const K=o.isBuffer(u)?u:o.from(u,N),se=K.length;if(se===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(M=0;M<b-l;++M)this[M+l]=K[M%se]}return this};const B={};function L(d,u,l){B[d]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${d}]`,this.stack,delete this.name}get code(){return d}set code(N){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:N,writable:!0})}toString(){return`${this.name} [${d}]: ${this.message}`}}}L("ERR_BUFFER_OUT_OF_BOUNDS",function(d){return d?`${d} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),L("ERR_INVALID_ARG_TYPE",function(d,u){return`The "${d}" argument must be of type number. Received type ${typeof u}`},TypeError),L("ERR_OUT_OF_RANGE",function(d,u,l){let b=`The value of "${d}" is out of range.`,N=l;return Number.isInteger(l)&&Math.abs(l)>2**32?N=f(String(l)):typeof l=="bigint"&&(N=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(N=f(N)),N+="n"),b+=` It must be ${u}. Received ${N}`,b},RangeError);function f(d){let u="",l=d.length;const b=d[0]==="-"?1:0;for(;l>=b+4;l-=3)u=`_${d.slice(l-3,l)}${u}`;return`${d.slice(0,l)}${u}`}function P(d,u,l){re(u,"offset"),(d[u]===void 0||d[u+l]===void 0)&&de(u,d.length-(l+1))}function ee(d,u,l,b,N,M){if(d>l||d<u){const K=typeof u=="bigint"?"n":"";let se;throw M>3?u===0||u===BigInt(0)?se=`>= 0${K} and < 2${K} ** ${(M+1)*8}${K}`:se=`>= -(2${K} ** ${(M+1)*8-1}${K}) and < 2 ** ${(M+1)*8-1}${K}`:se=`>= ${u}${K} and <= ${l}${K}`,new B.ERR_OUT_OF_RANGE("value",se,d)}P(b,N,M)}function re(d,u){if(typeof d!="number")throw new B.ERR_INVALID_ARG_TYPE(u,"number",d)}function de(d,u,l){throw Math.floor(d)!==d?(re(d,l),new B.ERR_OUT_OF_RANGE(l||"offset","an integer",d)):u<0?new B.ERR_BUFFER_OUT_OF_BOUNDS:new B.ERR_OUT_OF_RANGE(l||"offset",`>= ${l?1:0} and <= ${u}`,d)}const Se=/[^+/0-9A-Za-z-_]/g;function _e(d){if(d=d.split("=")[0],d=d.trim().replace(Se,""),d.length<2)return"";for(;d.length%4!==0;)d=d+"=";return d}function De(d,u){u=u||1/0;let l;const b=d.length;let N=null;const M=[];for(let K=0;K<b;++K){if(l=d.charCodeAt(K),l>55295&&l<57344){if(!N){if(l>56319){(u-=3)>-1&&M.push(239,191,189);continue}else if(K+1===b){(u-=3)>-1&&M.push(239,191,189);continue}N=l;continue}if(l<56320){(u-=3)>-1&&M.push(239,191,189),N=l;continue}l=(N-55296<<10|l-56320)+65536}else N&&(u-=3)>-1&&M.push(239,191,189);if(N=null,l<128){if((u-=1)<0)break;M.push(l)}else if(l<2048){if((u-=2)<0)break;M.push(l>>6|192,l&63|128)}else if(l<65536){if((u-=3)<0)break;M.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((u-=4)<0)break;M.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return M}function je(d){const u=[];for(let l=0;l<d.length;++l)u.push(d.charCodeAt(l)&255);return u}function $e(d,u){let l,b,N;const M=[];for(let K=0;K<d.length&&!((u-=2)<0);++K)l=d.charCodeAt(K),b=l>>8,N=l%256,M.push(N),M.push(b);return M}function Ee(d){return t.toByteArray(_e(d))}function be(d,u,l,b){let N;for(N=0;N<b&&!(N+l>=u.length||N>=d.length);++N)u[N+l]=d[N];return N}function he(d,u){return d instanceof u||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===u.name}function ye(d){return d!==d}const we=function(){const d="0123456789abcdef",u=new Array(256);for(let l=0;l<16;++l){const b=l*16;for(let N=0;N<16;++N)u[b+N]=d[l]+d[N]}return u}();function fe(d){return typeof BigInt>"u"?pe:d}function pe(){throw new Error("BigInt not supported")}})(Sl);let ws;const dr={ethereumClient:void 0,setEthereumClient(e){ws=e},client(){if(ws)return ws;throw new Error("ClientCtrl has no client set")}},ft=ar({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),Lr={state:ft,subscribe(e){return yr(ft,()=>e(ft))},push(e,t){e!==ft.view&&(ft.view=e,t&&(ft.data=t),ft.history.push(e))},reset(e){ft.view=e,ft.history=[e]},replace(e){ft.history.length>1&&(ft.history[ft.history.length-1]=e,ft.view=e)},goBack(){if(ft.history.length>1){ft.history.pop();const[e]=ft.history.slice(-1);ft.view=e}},setData(e){ft.data=e}},wt={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",W3M_VERSION:"W3M_VERSION",W3M_PREFER_INJECTED_URL_FLAG:"w3mPreferInjected",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return wt.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const e=navigator.userAgent.toLowerCase();return wt.isMobile()&&(e.includes("iphone")||e.includes("ipad"))},isHttpUrl(e){return e.startsWith("http://")||e.startsWith("https://")},isArray(e){return Array.isArray(e)&&e.length>0},formatNativeUrl(e,t,r){if(wt.isHttpUrl(e))return this.formatUniversalUrl(e,t,r);let n=e;n.includes("://")||(n=e.replaceAll("/","").replaceAll(":",""),n=`${n}://`),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(t);return`${n}wc?uri=${i}`},formatUniversalUrl(e,t,r){if(!wt.isHttpUrl(e))return this.formatNativeUrl(e,t,r);let n=e;e.endsWith("/")&&(n=e.slice(0,-1)),this.setWalletConnectDeepLink(n,r);const i=encodeURIComponent(t);return`${n}/wc?uri=${i}`},async wait(e){return new Promise(t=>{setTimeout(t,e)})},openHref(e,t){window.open(e,t,"noreferrer noopener")},setWalletConnectDeepLink(e,t){localStorage.setItem(wt.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:t}))},setWalletConnectAndroidDeepLink(e){const[t]=e.split("?");localStorage.setItem(wt.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:"Android"}))},removeWalletConnectDeepLink(){localStorage.removeItem(wt.WALLETCONNECT_DEEPLINK_CHOICE)},setWeb3ModalVersionInStorage(){typeof localStorage<"u"&&localStorage.setItem(wt.W3M_VERSION,"2.4.1")},getWalletRouterData(){var e;const t=(e=Lr.state.data)==null?void 0:e.Wallet;if(!t)throw new Error('Missing "Wallet" view data');return t},getSwitchNetworkRouterData(){var e;const t=(e=Lr.state.data)==null?void 0:e.SwitchNetwork;if(!t)throw new Error('Missing "SwitchNetwork" view data');return t},isPreferInjectedFlag(){return typeof location<"u"?new URLSearchParams(location.search).has(wt.W3M_PREFER_INJECTED_URL_FLAG):!1}},m_=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),Dt=ar({enabled:m_,userSessionId:"",events:[],connectedWalletId:void 0}),b_={state:Dt,subscribe(e){return yr(Dt.events,()=>e(c_(Dt.events[Dt.events.length-1])))},initialize(){Dt.enabled&&typeof crypto<"u"&&(Dt.userSessionId=crypto.randomUUID())},setConnectedWalletId(e){Dt.connectedWalletId=e},click(e){if(Dt.enabled){const t={type:"CLICK",name:e.name,userSessionId:Dt.userSessionId,timestamp:Date.now(),data:e};Dt.events.push(t)}},track(e){if(Dt.enabled){const t={type:"TRACK",name:e.name,userSessionId:Dt.userSessionId,timestamp:Date.now(),data:e};Dt.events.push(t)}},view(e){if(Dt.enabled){const t={type:"VIEW",name:e.name,userSessionId:Dt.userSessionId,timestamp:Date.now(),data:e};Dt.events.push(t)}}},mt=ar({selectedChain:void 0,chains:void 0,standaloneChains:void 0,standaloneUri:void 0,isStandalone:!1,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1,isPreferInjected:!1,walletConnectVersion:1}),ht={state:mt,subscribe(e){return yr(mt,()=>e(mt))},setChains(e){mt.chains=e},setStandaloneChains(e){mt.standaloneChains=e},setStandaloneUri(e){mt.standaloneUri=e},getSelectedChain(){const e=dr.client().getNetwork().chain;return e&&(mt.selectedChain=e),mt.selectedChain},setSelectedChain(e){mt.selectedChain=e},setIsStandalone(e){mt.isStandalone=e},setIsCustomDesktop(e){mt.isCustomDesktop=e},setIsCustomMobile(e){mt.isCustomMobile=e},setIsDataLoaded(e){mt.isDataLoaded=e},setIsUiLoaded(e){mt.isUiLoaded=e},setWalletConnectVersion(e){mt.walletConnectVersion=e},setIsPreferInjected(e){mt.isPreferInjected=e},setIsAuth(e){mt.isAuth=e}},ii=ar({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chainImages:void 0,tokenImages:void 0,tokenContracts:void 0,standaloneChains:void 0,enableStandaloneMode:!1,enableAuthMode:!1,enableNetworkView:!1,enableAccountView:!0,enableExplorer:!0,defaultChain:void 0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),Sr={state:ii,subscribe(e){return yr(ii,()=>e(ii))},setConfig(e){var t,r,n,i;b_.initialize(),ht.setStandaloneChains(e.standaloneChains),ht.setIsStandalone(!!((t=e.standaloneChains)!=null&&t.length)||!!e.enableStandaloneMode),ht.setIsAuth(!!e.enableAuthMode),ht.setIsCustomMobile(!!((r=e.mobileWallets)!=null&&r.length)),ht.setIsCustomDesktop(!!((n=e.desktopWallets)!=null&&n.length)),ht.setWalletConnectVersion((i=e.walletConnectVersion)!=null?i:1),ht.state.isStandalone||(ht.setChains(dr.client().chains),ht.setIsPreferInjected(dr.client().isInjectedProviderInstalled()&&wt.isPreferInjectedFlag())),e.defaultChain&&ht.setSelectedChain(e.defaultChain),wt.setWeb3ModalVersionInStorage(),Object.assign(ii,e)}},He=ar({address:void 0,profileName:void 0,profileAvatar:void 0,profileLoading:!1,balanceLoading:!1,balance:void 0,isConnected:!1}),w_={state:He,subscribe(e){return yr(He,()=>e(He))},getAccount(){const e=dr.client().getAccount();He.address=e.address,He.isConnected=e.isConnected},async fetchProfile(e,t){var r;try{He.profileLoading=!0;const n=t??He.address,i=(r=ht.state.chains)==null?void 0:r.find(s=>s.id===1);if(n&&i){const s=await dr.client().fetchEnsName({address:n,chainId:1});if(s){const c=await dr.client().fetchEnsAvatar({name:s,chainId:1});c&&await e(c),He.profileAvatar=c}He.profileName=s}}finally{He.profileLoading=!1}},async fetchBalance(e){try{const{chain:t}=dr.client().getNetwork(),{tokenContracts:r}=Sr.state;let n;t&&r&&(n=r[t.id]),He.balanceLoading=!0;const i=e??He.address;if(i){const s=await dr.client().fetchBalance({address:i,token:n});He.balance={amount:s.formatted,symbol:s.symbol}}}finally{He.balanceLoading=!1}},setAddress(e){He.address=e},setIsConnected(e){He.isConnected=e},resetBalance(){He.balance=void 0},resetAccount(){He.address=void 0,He.isConnected=!1,He.profileName=void 0,He.profileAvatar=void 0,He.balance=void 0}},$s="https://explorer-api.walletconnect.com";async function si(e,t){const r=new URL(e,$s);return r.searchParams.append("projectId",Sr.state.projectId),Object.entries(t).forEach(([n,i])=>{i&&r.searchParams.append(n,String(i))}),(await fetch(r)).json()}const _r={async getDesktopListings(e){return si("/w3m/v1/getDesktopListings",e)},async getMobileListings(e){return si("/w3m/v1/getMobileListings",e)},async getInjectedListings(e){return si("/w3m/v1/getInjectedListings",e)},async getAllListings(e){return si("/w3m/v1/getAllListings",e)},getWalletImageUrl(e){return`${$s}/w3m/v1/getWalletImage/${e}?projectId=${Sr.state.projectId}`},getAssetImageUrl(e){return`${$s}/w3m/v1/getAssetImage/${e}?projectId=${Sr.state.projectId}`}};var __=Object.defineProperty,bc=Object.getOwnPropertySymbols,E_=Object.prototype.hasOwnProperty,v_=Object.prototype.propertyIsEnumerable,wc=(e,t,r)=>t in e?__(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,x_=(e,t)=>{for(var r in t||(t={}))E_.call(t,r)&&wc(e,r,t[r]);if(bc)for(var r of bc(t))v_.call(t,r)&&wc(e,r,t[r]);return e};const _c=wt.isMobile(),Ht=ar({wallets:{listings:[],total:0,page:1},injectedWallets:[],search:{listings:[],total:0,page:1},recomendedWallets:[]}),iE={state:Ht,async getRecomendedWallets(){const{explorerRecommendedWalletIds:e,explorerExcludedWalletIds:t}=Sr.state;if(e==="NONE"||t==="ALL"&&!e)return Ht.recomendedWallets;if(wt.isArray(e)){const r={recommendedIds:e.join(",")},{listings:n}=await _r.getAllListings(r),i=Object.values(n);i.sort((s,c)=>{const o=e.indexOf(s.id),h=e.indexOf(c.id);return o-h}),Ht.recomendedWallets=i}else{const{standaloneChains:r,walletConnectVersion:n,isAuth:i}=ht.state,s=r==null?void 0:r.join(","),c=wt.isArray(t),o={page:1,sdks:i?"auth_v1":void 0,entries:wt.RECOMMENDED_WALLET_AMOUNT,chains:s,version:n,excludedIds:c?t.join(","):void 0},{listings:h}=_c?await _r.getMobileListings(o):await _r.getDesktopListings(o);Ht.recomendedWallets=Object.values(h)}return Ht.recomendedWallets},async getWallets(e){const t=x_({},e),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:n}=Sr.state,{recomendedWallets:i}=Ht;if(n==="ALL")return Ht.wallets;t.search||(i.length?t.excludedIds=i.map(E=>E.id).join(","):wt.isArray(r)&&(t.excludedIds=r.join(","))),wt.isArray(n)&&(t.excludedIds=[t.excludedIds,n].filter(Boolean).join(",")),ht.state.isAuth&&(t.sdks="auth_v1");const{page:s,search:c}=e,{listings:o,total:h}=_c?await _r.getMobileListings(t):await _r.getDesktopListings(t),p=Object.values(o),m=c?"search":"wallets";return Ht[m]={listings:[...Ht[m].listings,...p],total:h,page:s??1},{listings:p,total:h}},async getInjectedWallets(){const{listings:e}=await _r.getInjectedListings({}),t=Object.values(e);return Ht.injectedWallets=t,Ht.injectedWallets},getWalletImageUrl(e){return _r.getWalletImageUrl(e)},getAssetImageUrl(e){return _r.getAssetImageUrl(e)},resetSearch(){Ht.search={listings:[],total:0,page:1}}},On=ar({pairingUri:"",pairingError:!1}),Ec={state:On,subscribe(e){return yr(On,()=>e(On))},setPairingUri(e){On.pairingUri=e},setPairingError(e){On.pairingError=e}},Yr=ar({open:!1}),_s={state:Yr,subscribe(e){return yr(Yr,()=>e(Yr))},async open(e){return new Promise(t=>{const{isStandalone:r,isUiLoaded:n,isDataLoaded:i,isPreferInjected:s,selectedChain:c}=ht.state,{pairingUri:o}=Ec.state,{isConnected:h}=w_.state,{enableNetworkView:p}=Sr.state;if(r)ht.setStandaloneUri(e==null?void 0:e.uri),ht.setStandaloneChains(e==null?void 0:e.standaloneChains),Lr.reset("ConnectWallet");else if(e!=null&&e.route)Lr.reset(e.route);else if(h)Lr.reset("Account");else if(p)Lr.reset("SelectNetwork");else if(s){dr.client().connectConnector("injected",c==null?void 0:c.id).catch(m=>console.error(m)),t();return}else Lr.reset("ConnectWallet");if(n&&i&&(r||o||h))Yr.open=!0,t();else{const m=setInterval(()=>{const E=ht.state,A=Ec.state;E.isUiLoaded&&E.isDataLoaded&&(E.isStandalone||A.pairingUri||h)&&(clearInterval(m),Yr.open=!0,t())},200)}})},close(){Yr.open=!1}};var S_=Object.defineProperty,vc=Object.getOwnPropertySymbols,D_=Object.prototype.hasOwnProperty,I_=Object.prototype.propertyIsEnumerable,xc=(e,t,r)=>t in e?S_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O_=(e,t)=>{for(var r in t||(t={}))D_.call(t,r)&&xc(e,r,t[r]);if(vc)for(var r of vc(t))I_.call(t,r)&&xc(e,r,t[r]);return e};function A_(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const An=ar({themeMode:A_()?"dark":"light"}),Sc={state:An,subscribe(e){return yr(An,()=>e(An))},setThemeConfig(e){const{themeMode:t,themeVariables:r}=e;t&&(An.themeMode=t),r&&(An.themeVariables=O_({},r))}},Fr=ar({open:!1,message:"",variant:"success"}),sE={state:Fr,subscribe(e){return yr(Fr,()=>e(Fr))},openToast(e,t){Fr.open=!0,Fr.message=e,Fr.variant=t},closeToast(){Fr.open=!1}};typeof window<"u"&&(window.Buffer||(window.Buffer=Sl.Buffer),window.global||(window.global=window),window.process||(window.process={env:{}}));var C_=Object.defineProperty,Dc=Object.getOwnPropertySymbols,T_=Object.prototype.hasOwnProperty,R_=Object.prototype.propertyIsEnumerable,Ic=(e,t,r)=>t in e?C_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,P_=(e,t)=>{for(var r in t||(t={}))T_.call(t,r)&&Ic(e,r,t[r]);if(Dc)for(var r of Dc(t))R_.call(t,r)&&Ic(e,r,t[r]);return e};class N_{constructor(t){this.openModal=_s.open,this.closeModal=_s.close,this.subscribeModal=_s.subscribe,this.setTheme=Sc.setThemeConfig,Sc.setThemeConfig(t),Sr.setConfig(P_({enableStandaloneMode:!0},t)),this.initUi()}async initUi(){if(typeof window<"u"){await r_(()=>import("./index-deaf1713.js"),["assets/index-deaf1713.js","assets/vendor-5c2c506d.js"]);const t=document.createElement("w3m-modal");document.body.insertAdjacentElement("beforeend",t),ht.setIsUiLoaded(!0)}}}const F_="f8ecda7a059571686392adfb46ff2b1b",L_="wss://relay.walletconnect.com",Il="chia:testnet";var bt=(e=>(e.ChainId="chip0002_chainId",e.Connect="chip0002_connect",e.GetPublicKeys="chip0002_getPublicKeys",e.FilterUnlockedCoins="chip0002_filterUnlockedCoins",e.GetAssetCoins="chip0002_getAssetCoins",e.GetAssetBalance="chip0002_getAssetBalance",e.SignCoinSpends="chip0002_signCoinSpends",e.SignMessage="chip0002_signMessage",e.SendTransaction="chip0002_sendTransaction",e.Transfer="chia_transfer",e.TakeOffer="chia_takeOffer",e.CreateOffer="chia_createOffer",e.CancelOffer="chia_cancelOffer",e.GetNfts="chia_getNfts",e.Send="chia_send",e.GetAddress="chia_getAddress",e))(bt||{});const U_={chia:{methods:Object.values(bt),chains:[Il],events:[]}},$_={name:"Test App",description:"A test application for WalletConnect.",url:"#",icons:["https://walletconnect.com/walletconnect-logo.png"]},Ol=Te.createContext({});function M_({projectId:e,relayUrl:t,chainId:r,children:n}){const[i,s]=Te.useState(),[c,o]=Te.useState(),[h,p]=Te.useState([]),[m,E]=Te.useState(),[A,I]=Te.useState(),[S,R]=Te.useState(!1),[j,H]=Te.useState([]),T=()=>{E(void 0),H([])},F=Te.useCallback(w=>{const C=Object.values(w.namespaces).map(U=>U.accounts).flat();E(w),H(C),I(C[0].split(":")[2])},[]),v=Te.useCallback(async w=>{if(!c)throw new Error("WalletConnect is not initialized");if(!i)throw new Error("Web3Modal is not initialized");try{const{uri:C,approval:U}=await c.connect({pairingTopic:w==null?void 0:w.topic,requiredNamespaces:U_});if(C){i.openModal({uri:C});const W=await U();F(W),p(c.pairing.getAll({active:!0}))}}catch(C){C&&console.error(C)}finally{i.closeModal()}},[c,F,i]),D=Te.useCallback(async()=>{if(!c)throw new Error("WalletConnect is not initialized");if(!m)throw new Error("Session is not connected");await c.disconnect({topic:m.topic,reason:rt("USER_DISCONNECTED")}),T()},[c,m]),y=Te.useCallback(async w=>{if(!w)throw new Error("WalletConnect is not initialized");w.on("session_update",({topic:C,params:U})=>{const{namespaces:W}=U,O={...w.session.get(C),namespaces:W};F(O)}),w.on("session_delete",()=>T()),w.on("session_event",(...C)=>console.log(C))},[F]),a=Te.useCallback(async w=>{if(!w)throw new Error("WalletConnect is not initialized.");if(p(w.pairing.getAll({active:!0})),!m&&w.session.length){const C=w.session.keys.length-1,U=w.session.get(w.session.keys[C]);return F(U),U}},[m,F]),g=Te.useCallback(async()=>{try{R(!0);const w=await wo.init({relayUrl:t,projectId:e,metadata:$_}),C=new N_({projectId:e,standaloneChains:[r],walletConnectVersion:2});o(w),s(C),await y(w),await a(w)}finally{R(!1)}},[a,y,r,e,t]);Te.useEffect(()=>{c||g()},[c,g]);const z=Te.useMemo(()=>({pairings:h,isInitializing:S,accounts:j,client:c,web3Modal:i,session:m,fingerprint:A,connect:v,disconnect:D}),[h,S,j,c,i,m,A,v,D]);return $t.jsx(Ol.Provider,{value:{chainId:r,...z},children:n})}function Al(){const e=Te.useContext(Ol);if(!e)throw new Error("Calls to `useWalletConnect` must be used within a `WalletConnectProvider`.");return e}const Cl=Te.createContext({});function B_({children:e}){const{client:t,session:r,chainId:n,fingerprint:i}=Al();async function s(c,o){if(!t)throw new Error("WalletConnect is not initialized");if(!r)throw new Error("Session is not connected");if(!i)throw new Error("Fingerprint is not loaded.");return await(t==null?void 0:t.request({topic:r.topic,chainId:n,request:{method:c,params:o}}))}return $t.jsx(Cl.Provider,{value:{chainId:c=>s(bt.ChainId,c),connect:c=>s(bt.Connect,c),getPublicKeys:c=>s(bt.GetPublicKeys,c),filterUnlockedCoins:c=>s(bt.FilterUnlockedCoins,c),getAssetCoins:c=>s(bt.GetAssetCoins,c),getAssetBalance:c=>s(bt.GetAssetBalance,c),signCoinSpends:c=>s(bt.SignCoinSpends,c),signMessage:c=>s(bt.SignMessage,c),sendTransaction:c=>s(bt.SendTransaction,c),createOffer:c=>s(bt.CreateOffer,c),takeOffer:c=>s(bt.TakeOffer,c),cancelOffer:c=>s(bt.CancelOffer,c),getNfts:c=>s(bt.GetNfts,c),send:c=>s(bt.Send,c),getAddress:c=>s(bt.GetAddress,c)},children:e})}function j_(){const e=Te.useContext(Cl);if(!e)throw new Error("Calls to `useJsonRpc` must be used within a `JsonRpcProvider`.");return e}function k_(){const{client:e,session:t,pairings:r,connect:n,disconnect:i}=Al(),s=j_();return Te.useEffect(()=>{window.gd_useWalletConnect=c=>{const o=c.split(";"),h=o[0];c!="session;"&&console.log("Received a command: "+h);try{switch(h){case"client":return e;case"session":return t;case"pairings":return r;case"connect":if(!e)throw new Error("WalletConnect client is not initialized.");return r.length===1?n({topic:r[0].topic}):r.length>1?console.warn("Multiple pairings detected. Modal handling is not implemented.",r):n(),null;case"disconnect":return i(),localStorage.clear(),window.location.href="",null;case"send":if(!e||!t)throw new Error("WalletConnect session is not active.");if(o.length<3)throw new Error("Invalid inputs. Format: send;<recipient_address>;<amount>;<fee>");const p=o[1],m=parseInt(o[2]),E=parseInt(o[3]);if(!p||isNaN(m)||isNaN(E))throw new Error("Invalid recipient address, amount, or fee. Please check your input.");return s.send({address:p,amount:m,fee:E,assetId:void 0,memos:void 0}).then(S=>S).catch(S=>{throw console.error("Error sending XCH:",S),S});case"chainId":return s.chainId({}).then(S=>String(S)).catch(S=>{throw console.error("Error fetching Chain ID:",S),S});case"fetch_nfts":const A=0,I=10;return s.getNfts({collectionId:void 0,offset:A,limit:I}).then(S=>{const R=S.nfts,j=JSON.stringify(R,null,2);return console.log(j),j}).catch(S=>{throw console.error("Error fetching NFT:",S),S});default:return console.error(`Invalid term provided to gd_useWalletConnect: "${c}"`),null}}catch(p){return console.error("Error in gd_useWalletConnect:",p),null}}},[e,t,r,n,i]),null}function z_(){return $t.jsx(k_,{})}const K_=nu(document.querySelector("#root"));K_.render($t.jsx(Te.StrictMode,{children:$t.jsx(M_,{projectId:F_,relayUrl:L_,chainId:Il,children:$t.jsxs(B_,{children:[$t.jsx(p0,{}),$t.jsx(z_,{})]})})}));export{dr as C,b_ as H,w_ as K,Ec as _,Sc as a,Lr as b,wt as c,ht as d,iE as n,sE as o,_s as s,Sr as y};
