import{r as $e,a as Xc,g as Po,c as yt,b as Fo}from"./vendor-818099cb.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function r(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(n){if(n.ep)return;n.ep=!0;const c=r(n);fetch(n.href,c)}})();var Uo={exports:{}},vi={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zc=$e,Qc=Symbol.for("react.element"),eu=Symbol.for("react.fragment"),tu=Object.prototype.hasOwnProperty,ru=Zc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iu={key:!0,ref:!0,__self:!0,__source:!0};function Lo(t,e,r){var i,n={},c=null,h=null;r!==void 0&&(c=""+r),e.key!==void 0&&(c=""+e.key),e.ref!==void 0&&(h=e.ref);for(i in e)tu.call(e,i)&&!iu.hasOwnProperty(i)&&(n[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)n[i]===void 0&&(n[i]=e[i]);return{$$typeof:Qc,type:t,key:c,ref:h,props:n,_owner:ru.current}}vi.Fragment=eu;vi.jsx=Lo;vi.jsxs=Lo;Uo.exports=vi;var dr=Uo.exports,Mo,Zn=Xc;Mo=Zn.createRoot,Zn.hydrateRoot;var bn={exports:{}},xr=typeof Reflect=="object"?Reflect:null,Qn=xr&&typeof xr.apply=="function"?xr.apply:function(e,r,i){return Function.prototype.apply.call(e,r,i)},di;xr&&typeof xr.ownKeys=="function"?di=xr.ownKeys:Object.getOwnPropertySymbols?di=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:di=function(e){return Object.getOwnPropertyNames(e)};function nu(t){console&&console.warn&&console.warn(t)}var Bo=Number.isNaN||function(e){return e!==e};function Ae(){Ae.init.call(this)}bn.exports=Ae;bn.exports.once=cu;Ae.EventEmitter=Ae;Ae.prototype._events=void 0;Ae.prototype._eventsCount=0;Ae.prototype._maxListeners=void 0;var es=10;function Di(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Ae,"defaultMaxListeners",{enumerable:!0,get:function(){return es},set:function(t){if(typeof t!="number"||t<0||Bo(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");es=t}});Ae.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ae.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Bo(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function $o(t){return t._maxListeners===void 0?Ae.defaultMaxListeners:t._maxListeners}Ae.prototype.getMaxListeners=function(){return $o(this)};Ae.prototype.emit=function(e){for(var r=[],i=1;i<arguments.length;i++)r.push(arguments[i]);var n=e==="error",c=this._events;if(c!==void 0)n=n&&c.error===void 0;else if(!n)return!1;if(n){var h;if(r.length>0&&(h=r[0]),h instanceof Error)throw h;var a=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw a.context=h,a}var d=c[e];if(d===void 0)return!1;if(typeof d=="function")Qn(d,this,r);else for(var y=d.length,m=Vo(d,y),i=0;i<y;++i)Qn(m[i],this,r);return!0};function jo(t,e,r,i){var n,c,h;if(Di(r),c=t._events,c===void 0?(c=t._events=Object.create(null),t._eventsCount=0):(c.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),c=t._events),h=c[e]),h===void 0)h=c[e]=r,++t._eventsCount;else if(typeof h=="function"?h=c[e]=i?[r,h]:[h,r]:i?h.unshift(r):h.push(r),n=$o(t),n>0&&h.length>n&&!h.warned){h.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=h.length,nu(a)}return t}Ae.prototype.addListener=function(e,r){return jo(this,e,r,!1)};Ae.prototype.on=Ae.prototype.addListener;Ae.prototype.prependListener=function(e,r){return jo(this,e,r,!0)};function su(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function zo(t,e,r){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},n=su.bind(i);return n.listener=r,i.wrapFn=n,n}Ae.prototype.once=function(e,r){return Di(r),this.on(e,zo(this,e,r)),this};Ae.prototype.prependOnceListener=function(e,r){return Di(r),this.prependListener(e,zo(this,e,r)),this};Ae.prototype.removeListener=function(e,r){var i,n,c,h,a;if(Di(r),n=this._events,n===void 0)return this;if(i=n[e],i===void 0)return this;if(i===r||i.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,i.listener||r));else if(typeof i!="function"){for(c=-1,h=i.length-1;h>=0;h--)if(i[h]===r||i[h].listener===r){a=i[h].listener,c=h;break}if(c<0)return this;c===0?i.shift():ou(i,c),i.length===1&&(n[e]=i[0]),n.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};Ae.prototype.off=Ae.prototype.removeListener;Ae.prototype.removeAllListeners=function(e){var r,i,n;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var c=Object.keys(i),h;for(n=0;n<c.length;++n)h=c[n],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=i[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(n=r.length-1;n>=0;n--)this.removeListener(e,r[n]);return this};function Ko(t,e,r){var i=t._events;if(i===void 0)return[];var n=i[e];return n===void 0?[]:typeof n=="function"?r?[n.listener||n]:[n]:r?au(n):Vo(n,n.length)}Ae.prototype.listeners=function(e){return Ko(this,e,!0)};Ae.prototype.rawListeners=function(e){return Ko(this,e,!1)};Ae.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):qo.call(t,e)};Ae.prototype.listenerCount=qo;function qo(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Ae.prototype.eventNames=function(){return this._eventsCount>0?di(this._events):[]};function Vo(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function ou(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function au(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function cu(t,e){return new Promise(function(r,i){function n(h){t.removeListener(e,c),i(h)}function c(){typeof t.removeListener=="function"&&t.removeListener("error",n),r([].slice.call(arguments))}Ho(t,e,c,{once:!0}),e!=="error"&&uu(t,n,{once:!0})})}function uu(t,e,r){typeof t.on=="function"&&Ho(t,"error",e,r)}function Ho(t,e,r,i){if(typeof t.on=="function")i.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function n(c){i.once&&t.removeEventListener(e,n),r(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Ft=bn.exports;const ko=Po(Ft);var Si={},Wo={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(t){var e,r,i,n,c,h,a,d,y,m,I,M,N,T,j,q,X,C,R,v,x,w,o;(function(p){var z=typeof yt=="object"?yt:typeof self=="object"?self:typeof this=="object"?this:{};p(b(z,b(t.exports)));function b(S,F){return S!==z&&(typeof Object.create=="function"?Object.defineProperty(S,"__esModule",{value:!0}):S.__esModule=!0),function(H,E){return S[H]=F?F(H,E):E}}})(function(p){var z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,S){b.__proto__=S}||function(b,S){for(var F in S)S.hasOwnProperty(F)&&(b[F]=S[F])};e=function(b,S){z(b,S);function F(){this.constructor=b}b.prototype=S===null?Object.create(S):(F.prototype=S.prototype,new F)},r=Object.assign||function(b){for(var S,F=1,H=arguments.length;F<H;F++){S=arguments[F];for(var E in S)Object.prototype.hasOwnProperty.call(S,E)&&(b[E]=S[E])}return b},i=function(b,S){var F={};for(var H in b)Object.prototype.hasOwnProperty.call(b,H)&&S.indexOf(H)<0&&(F[H]=b[H]);if(b!=null&&typeof Object.getOwnPropertySymbols=="function")for(var E=0,H=Object.getOwnPropertySymbols(b);E<H.length;E++)S.indexOf(H[E])<0&&Object.prototype.propertyIsEnumerable.call(b,H[E])&&(F[H[E]]=b[H[E]]);return F},n=function(b,S,F,H){var E=arguments.length,D=E<3?S:H===null?H=Object.getOwnPropertyDescriptor(S,F):H,G;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(b,S,F,H);else for(var Y=b.length-1;Y>=0;Y--)(G=b[Y])&&(D=(E<3?G(D):E>3?G(S,F,D):G(S,F))||D);return E>3&&D&&Object.defineProperty(S,F,D),D},c=function(b,S){return function(F,H){S(F,H,b)}},h=function(b,S){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(b,S)},a=function(b,S,F,H){function E(D){return D instanceof F?D:new F(function(G){G(D)})}return new(F||(F=Promise))(function(D,G){function Y(k){try{V(H.next(k))}catch(J){G(J)}}function W(k){try{V(H.throw(k))}catch(J){G(J)}}function V(k){k.done?D(k.value):E(k.value).then(Y,W)}V((H=H.apply(b,S||[])).next())})},d=function(b,S){var F={label:0,sent:function(){if(D[0]&1)throw D[1];return D[1]},trys:[],ops:[]},H,E,D,G;return G={next:Y(0),throw:Y(1),return:Y(2)},typeof Symbol=="function"&&(G[Symbol.iterator]=function(){return this}),G;function Y(V){return function(k){return W([V,k])}}function W(V){if(H)throw new TypeError("Generator is already executing.");for(;F;)try{if(H=1,E&&(D=V[0]&2?E.return:V[0]?E.throw||((D=E.return)&&D.call(E),0):E.next)&&!(D=D.call(E,V[1])).done)return D;switch(E=0,D&&(V=[V[0]&2,D.value]),V[0]){case 0:case 1:D=V;break;case 4:return F.label++,{value:V[1],done:!1};case 5:F.label++,E=V[1],V=[0];continue;case 7:V=F.ops.pop(),F.trys.pop();continue;default:if(D=F.trys,!(D=D.length>0&&D[D.length-1])&&(V[0]===6||V[0]===2)){F=0;continue}if(V[0]===3&&(!D||V[1]>D[0]&&V[1]<D[3])){F.label=V[1];break}if(V[0]===6&&F.label<D[1]){F.label=D[1],D=V;break}if(D&&F.label<D[2]){F.label=D[2],F.ops.push(V);break}D[2]&&F.ops.pop(),F.trys.pop();continue}V=S.call(b,F)}catch(k){V=[6,k],E=0}finally{H=D=0}if(V[0]&5)throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}},o=function(b,S,F,H){H===void 0&&(H=F),b[H]=S[F]},y=function(b,S){for(var F in b)F!=="default"&&!S.hasOwnProperty(F)&&(S[F]=b[F])},m=function(b){var S=typeof Symbol=="function"&&Symbol.iterator,F=S&&b[S],H=0;if(F)return F.call(b);if(b&&typeof b.length=="number")return{next:function(){return b&&H>=b.length&&(b=void 0),{value:b&&b[H++],done:!b}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")},I=function(b,S){var F=typeof Symbol=="function"&&b[Symbol.iterator];if(!F)return b;var H=F.call(b),E,D=[],G;try{for(;(S===void 0||S-- >0)&&!(E=H.next()).done;)D.push(E.value)}catch(Y){G={error:Y}}finally{try{E&&!E.done&&(F=H.return)&&F.call(H)}finally{if(G)throw G.error}}return D},M=function(){for(var b=[],S=0;S<arguments.length;S++)b=b.concat(I(arguments[S]));return b},N=function(){for(var b=0,S=0,F=arguments.length;S<F;S++)b+=arguments[S].length;for(var H=Array(b),E=0,S=0;S<F;S++)for(var D=arguments[S],G=0,Y=D.length;G<Y;G++,E++)H[E]=D[G];return H},T=function(b){return this instanceof T?(this.v=b,this):new T(b)},j=function(b,S,F){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var H=F.apply(b,S||[]),E,D=[];return E={},G("next"),G("throw"),G("return"),E[Symbol.asyncIterator]=function(){return this},E;function G(te){H[te]&&(E[te]=function(Q){return new Promise(function(ae,ne){D.push([te,Q,ae,ne])>1||Y(te,Q)})})}function Y(te,Q){try{W(H[te](Q))}catch(ae){J(D[0][3],ae)}}function W(te){te.value instanceof T?Promise.resolve(te.value.v).then(V,k):J(D[0][2],te)}function V(te){Y("next",te)}function k(te){Y("throw",te)}function J(te,Q){te(Q),D.shift(),D.length&&Y(D[0][0],D[0][1])}},q=function(b){var S,F;return S={},H("next"),H("throw",function(E){throw E}),H("return"),S[Symbol.iterator]=function(){return this},S;function H(E,D){S[E]=b[E]?function(G){return(F=!F)?{value:T(b[E](G)),done:E==="return"}:D?D(G):G}:D}},X=function(b){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var S=b[Symbol.asyncIterator],F;return S?S.call(b):(b=typeof m=="function"?m(b):b[Symbol.iterator](),F={},H("next"),H("throw"),H("return"),F[Symbol.asyncIterator]=function(){return this},F);function H(D){F[D]=b[D]&&function(G){return new Promise(function(Y,W){G=b[D](G),E(Y,W,G.done,G.value)})}}function E(D,G,Y,W){Promise.resolve(W).then(function(V){D({value:V,done:Y})},G)}},C=function(b,S){return Object.defineProperty?Object.defineProperty(b,"raw",{value:S}):b.raw=S,b},R=function(b){if(b&&b.__esModule)return b;var S={};if(b!=null)for(var F in b)Object.hasOwnProperty.call(b,F)&&(S[F]=b[F]);return S.default=b,S},v=function(b){return b&&b.__esModule?b:{default:b}},x=function(b,S){if(!S.has(b))throw new TypeError("attempted to get private field on non-instance");return S.get(b)},w=function(b,S,F){if(!S.has(b))throw new TypeError("attempted to set private field on non-instance");return S.set(b,F),F},p("__extends",e),p("__assign",r),p("__rest",i),p("__decorate",n),p("__param",c),p("__metadata",h),p("__awaiter",a),p("__generator",d),p("__exportStar",y),p("__createBinding",o),p("__values",m),p("__read",I),p("__spread",M),p("__spreadArrays",N),p("__await",T),p("__asyncGenerator",j),p("__asyncDelegator",q),p("__asyncValues",X),p("__makeTemplateObject",C),p("__importStar",R),p("__importDefault",v),p("__classPrivateFieldGet",x),p("__classPrivateFieldSet",w)})})(Wo);var Nt=Wo.exports,Yr={};Object.defineProperty(Yr,"__esModule",{value:!0});function lu(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}Yr.safeJsonParse=lu;function hu(t){return typeof t=="string"?t:JSON.stringify(t,(e,r)=>typeof r>"u"?null:r)}Yr.safeJsonStringify=hu;var Rr={exports:{}},ts;function fu(){return ts||(ts=1,function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,i){this[r]=String(i)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(i){r[i]=void 0,delete r[i]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof yt<"u"&&yt.localStorage?Rr.exports=yt.localStorage:typeof window<"u"&&window.localStorage?Rr.exports=window.localStorage:Rr.exports=new e}()),Rr.exports}var Li={},Pr={},rs;function du(){if(rs)return Pr;rs=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.IKeyValueStorage=void 0;class t{}return Pr.IKeyValueStorage=t,Pr}var Fr={},is;function pu(){if(is)return Fr;is=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.parseEntry=void 0;const t=Yr;function e(r){var i;return[r[0],t.safeJsonParse((i=r[1])!==null&&i!==void 0?i:"")]}return Fr.parseEntry=e,Fr}var ns;function gu(){return ns||(ns=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Nt;e.__exportStar(du(),t),e.__exportStar(pu(),t)}(Li)),Li}Object.defineProperty(Si,"__esModule",{value:!0});Si.KeyValueStorage=void 0;const Dr=Nt,ss=Yr,yu=Dr.__importDefault(fu()),wu=gu();class Go{constructor(){this.localStorage=yu.default}getKeys(){return Dr.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return Dr.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(wu.parseEntry)})}getItem(e){return Dr.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(e);if(r!==null)return ss.safeJsonParse(r)})}setItem(e,r){return Dr.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,ss.safeJsonStringify(r))})}removeItem(e){return Dr.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}Si.KeyValueStorage=Go;var bu=Si.default=Go,Jr={},Ur={},ue={},Mi={},Lr={},os;function mu(){if(os)return Lr;os=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return Lr.delay=t,Lr}var ar={},Bi={},cr={},as;function _u(){return as||(as=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.ONE_THOUSAND=cr.ONE_HUNDRED=void 0,cr.ONE_HUNDRED=100,cr.ONE_THOUSAND=1e3),cr}var $i={},cs;function Eu(){return cs||(cs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}($i)),$i}var us;function Yo(){return us||(us=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Nt;e.__exportStar(_u(),t),e.__exportStar(Eu(),t)}(Bi)),Bi}var ls;function vu(){if(ls)return ar;ls=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.fromMiliseconds=ar.toMiliseconds=void 0;const t=Yo();function e(i){return i*t.ONE_THOUSAND}ar.toMiliseconds=e;function r(i){return Math.floor(i/t.ONE_THOUSAND)}return ar.fromMiliseconds=r,ar}var hs;function Du(){return hs||(hs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Nt;e.__exportStar(mu(),t),e.__exportStar(vu(),t)}(Mi)),Mi}var _r={},fs;function Su(){if(fs)return _r;fs=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const i=this.get(r);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const n=Date.now()-i.started;this.timestamps.set(r,{started:i.started,elapsed:n})}get(r){const i=this.timestamps.get(r);if(typeof i>"u")throw new Error(`No timestamp found for label: ${r}`);return i}elapsed(r){const i=this.get(r);return i.elapsed||Date.now()-i.started}}return _r.Watch=t,_r.default=t,_r}var ji={},Mr={},ds;function xu(){if(ds)return Mr;ds=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.IWatch=void 0;class t{}return Mr.IWatch=t,Mr}var ps;function Iu(){return ps||(ps=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Nt.__exportStar(xu(),t)}(ji)),ji}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Nt;e.__exportStar(Du(),t),e.__exportStar(Su(),t),e.__exportStar(Iu(),t),e.__exportStar(Yo(),t)})(ue);var zi={},Br={};let yr=class{};const Ou=Object.freeze(Object.defineProperty({__proto__:null,IEvents:yr},Symbol.toStringTag,{value:"Module"})),Au=Fo(Ou);var gs;function Cu(){if(gs)return Br;gs=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.IHeartBeat=void 0;const t=Au;class e extends t.IEvents{constructor(i){super()}}return Br.IHeartBeat=e,Br}var ys;function Jo(){return ys||(ys=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Nt.__exportStar(Cu(),t)}(zi)),zi}var Ki={},ur={},ws;function Tu(){if(ws)return ur;ws=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.HEARTBEAT_EVENTS=ur.HEARTBEAT_INTERVAL=void 0;const t=ue;return ur.HEARTBEAT_INTERVAL=t.FIVE_SECONDS,ur.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},ur}var bs;function Xo(){return bs||(bs=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),Nt.__exportStar(Tu(),t)}(Ki)),Ki}var ms;function Nu(){if(ms)return Ur;ms=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.HeartBeat=void 0;const t=Nt,e=Ft,r=ue,i=Jo(),n=Xo();class c extends i.IHeartBeat{constructor(a){super(a),this.events=new e.EventEmitter,this.interval=n.HEARTBEAT_INTERVAL,this.interval=(a==null?void 0:a.interval)||n.HEARTBEAT_INTERVAL}static init(a){return t.__awaiter(this,void 0,void 0,function*(){const d=new c(a);return yield d.init(),d})}init(){return t.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(a,d){this.events.on(a,d)}once(a,d){this.events.once(a,d)}off(a,d){this.events.off(a,d)}removeListener(a,d){this.events.removeListener(a,d)}initialize(){return t.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(n.HEARTBEAT_EVENTS.pulse)}}return Ur.HeartBeat=c,Ur}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Nt;e.__exportStar(Nu(),t),e.__exportStar(Jo(),t),e.__exportStar(Xo(),t)})(Jr);var Oe={},qi,_s;function Ru(){if(_s)return qi;_s=1;function t(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}qi=e;function e(r,i,n){var c=n&&n.stringify||t,h=1;if(typeof r=="object"&&r!==null){var a=i.length+h;if(a===1)return r;var d=new Array(a);d[0]=c(r);for(var y=1;y<a;y++)d[y]=c(i[y]);return d.join(" ")}if(typeof r!="string")return r;var m=i.length;if(m===0)return r;for(var I="",M=1-h,N=-1,T=r&&r.length||0,j=0;j<T;){if(r.charCodeAt(j)===37&&j+1<T){switch(N=N>-1?N:0,r.charCodeAt(j+1)){case 100:case 102:if(M>=m||i[M]==null)break;N<j&&(I+=r.slice(N,j)),I+=Number(i[M]),N=j+2,j++;break;case 105:if(M>=m||i[M]==null)break;N<j&&(I+=r.slice(N,j)),I+=Math.floor(Number(i[M])),N=j+2,j++;break;case 79:case 111:case 106:if(M>=m||i[M]===void 0)break;N<j&&(I+=r.slice(N,j));var q=typeof i[M];if(q==="string"){I+="'"+i[M]+"'",N=j+2,j++;break}if(q==="function"){I+=i[M].name||"<anonymous>",N=j+2,j++;break}I+=c(i[M]),N=j+2,j++;break;case 115:if(M>=m)break;N<j&&(I+=r.slice(N,j)),I+=String(i[M]),N=j+2,j++;break;case 37:N<j&&(I+=r.slice(N,j)),I+="%",N=j+2,j++,M--;break}++M}++j}return N===-1?r:(N<T&&(I+=r.slice(N)),I)}return qi}var Vi,Es;function Pu(){if(Es)return Vi;Es=1;const t=Ru();Vi=n;const e=x().console||{},r={mapHttpRequest:T,mapHttpResponse:T,wrapRequestSerializer:j,wrapResponseSerializer:j,wrapErrorSerializer:j,req:T,res:T,err:M};function i(w,o){return Array.isArray(w)?w.filter(function(z){return z!=="!stdSerializers.err"}):w===!0?Object.keys(o):!1}function n(w){w=w||{},w.browser=w.browser||{};const o=w.browser.transmit;if(o&&typeof o.send!="function")throw Error("pino: transmit option must have a send function");const p=w.browser.write||e;w.browser.write&&(w.browser.asObject=!0);const z=w.serializers||{},b=i(w.browser.serialize,z);let S=w.browser.serialize;Array.isArray(w.browser.serialize)&&w.browser.serialize.indexOf("!stdSerializers.err")>-1&&(S=!1);const F=["error","fatal","warn","info","debug","trace"];typeof p=="function"&&(p.error=p.fatal=p.warn=p.info=p.debug=p.trace=p),w.enabled===!1&&(w.level="silent");const H=w.level||"info",E=Object.create(p);E.log||(E.log=q),Object.defineProperty(E,"levelVal",{get:G}),Object.defineProperty(E,"level",{get:Y,set:W});const D={transmit:o,serialize:b,asObject:w.browser.asObject,levels:F,timestamp:N(w)};E.levels=n.levels,E.level=H,E.setMaxListeners=E.getMaxListeners=E.emit=E.addListener=E.on=E.prependListener=E.once=E.prependOnceListener=E.removeListener=E.removeAllListeners=E.listeners=E.listenerCount=E.eventNames=E.write=E.flush=q,E.serializers=z,E._serialize=b,E._stdErrSerialize=S,E.child=V,o&&(E._logEvent=I());function G(){return this.level==="silent"?1/0:this.levels.values[this.level]}function Y(){return this._level}function W(k){if(k!=="silent"&&!this.levels.values[k])throw Error("unknown level "+k);this._level=k,c(D,E,"error","log"),c(D,E,"fatal","error"),c(D,E,"warn","error"),c(D,E,"info","log"),c(D,E,"debug","log"),c(D,E,"trace","log")}function V(k,J){if(!k)throw new Error("missing bindings for child Pino");J=J||{},b&&k.serializers&&(J.serializers=k.serializers);const te=J.serializers;if(b&&te){var Q=Object.assign({},z,te),ae=w.browser.serialize===!0?Object.keys(Q):b;delete k.serializers,d([k],ae,Q,this._stdErrSerialize)}function ne(le){this._childLevel=(le._childLevel|0)+1,this.error=y(le,k,"error"),this.fatal=y(le,k,"fatal"),this.warn=y(le,k,"warn"),this.info=y(le,k,"info"),this.debug=y(le,k,"debug"),this.trace=y(le,k,"trace"),Q&&(this.serializers=Q,this._serialize=ae),o&&(this._logEvent=I([].concat(le._logEvent.bindings,k)))}return ne.prototype=this,new ne(this)}return E}n.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},n.stdSerializers=r,n.stdTimeFunctions=Object.assign({},{nullTime:X,epochTime:C,unixTime:R,isoTime:v});function c(w,o,p,z){const b=Object.getPrototypeOf(o);o[p]=o.levelVal>o.levels.values[p]?q:b[p]?b[p]:e[p]||e[z]||q,h(w,o,p)}function h(w,o,p){!w.transmit&&o[p]===q||(o[p]=function(z){return function(){const S=w.timestamp(),F=new Array(arguments.length),H=Object.getPrototypeOf&&Object.getPrototypeOf(this)===e?e:this;for(var E=0;E<F.length;E++)F[E]=arguments[E];if(w.serialize&&!w.asObject&&d(F,this._serialize,this.serializers,this._stdErrSerialize),w.asObject?z.call(H,a(this,p,F,S)):z.apply(H,F),w.transmit){const D=w.transmit.level||o.level,G=n.levels.values[D],Y=n.levels.values[p];if(Y<G)return;m(this,{ts:S,methodLevel:p,methodValue:Y,transmitLevel:D,transmitValue:n.levels.values[w.transmit.level||o.level],send:w.transmit.send,val:o.levelVal},F)}}}(o[p]))}function a(w,o,p,z){w._serialize&&d(p,w._serialize,w.serializers,w._stdErrSerialize);const b=p.slice();let S=b[0];const F={};z&&(F.time=z),F.level=n.levels.values[o];let H=(w._childLevel|0)+1;if(H<1&&(H=1),S!==null&&typeof S=="object"){for(;H--&&typeof b[0]=="object";)Object.assign(F,b.shift());S=b.length?t(b.shift(),b):void 0}else typeof S=="string"&&(S=t(b.shift(),b));return S!==void 0&&(F.msg=S),F}function d(w,o,p,z){for(const b in w)if(z&&w[b]instanceof Error)w[b]=n.stdSerializers.err(w[b]);else if(typeof w[b]=="object"&&!Array.isArray(w[b]))for(const S in w[b])o&&o.indexOf(S)>-1&&S in p&&(w[b][S]=p[S](w[b][S]))}function y(w,o,p){return function(){const z=new Array(1+arguments.length);z[0]=o;for(var b=1;b<z.length;b++)z[b]=arguments[b-1];return w[p].apply(this,z)}}function m(w,o,p){const z=o.send,b=o.ts,S=o.methodLevel,F=o.methodValue,H=o.val,E=w._logEvent.bindings;d(p,w._serialize||Object.keys(w.serializers),w.serializers,w._stdErrSerialize===void 0?!0:w._stdErrSerialize),w._logEvent.ts=b,w._logEvent.messages=p.filter(function(D){return E.indexOf(D)===-1}),w._logEvent.level.label=S,w._logEvent.level.value=F,z(S,w._logEvent,H),w._logEvent=I(E)}function I(w){return{ts:0,messages:[],bindings:w||[],level:{label:"",value:0}}}function M(w){const o={type:w.constructor.name,msg:w.message,stack:w.stack};for(const p in w)o[p]===void 0&&(o[p]=w[p]);return o}function N(w){return typeof w.timestamp=="function"?w.timestamp:w.timestamp===!1?X:C}function T(){return{}}function j(w){return w}function q(){}function X(){return!1}function C(){return Date.now()}function R(){return Math.round(Date.now()/1e3)}function v(){return new Date(Date.now()).toISOString()}function x(){function w(o){return typeof o<"u"&&o}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return w(self)||w(window)||w(this)||{}}}return Vi}var lr={},vs;function Zo(){return vs||(vs=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.PINO_CUSTOM_CONTEXT_KEY=lr.PINO_LOGGER_DEFAULTS=void 0,lr.PINO_LOGGER_DEFAULTS={level:"info"},lr.PINO_CUSTOM_CONTEXT_KEY="custom_context"),lr}var gt={},Ds;function Fu(){if(Ds)return gt;Ds=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.generateChildLogger=gt.formatChildLoggerContext=gt.getLoggerContext=gt.setBrowserLoggerContext=gt.getBrowserLoggerContext=gt.getDefaultLoggerOptions=void 0;const t=Zo();function e(a){return Object.assign(Object.assign({},a),{level:(a==null?void 0:a.level)||t.PINO_LOGGER_DEFAULTS.level})}gt.getDefaultLoggerOptions=e;function r(a,d=t.PINO_CUSTOM_CONTEXT_KEY){return a[d]||""}gt.getBrowserLoggerContext=r;function i(a,d,y=t.PINO_CUSTOM_CONTEXT_KEY){return a[y]=d,a}gt.setBrowserLoggerContext=i;function n(a,d=t.PINO_CUSTOM_CONTEXT_KEY){let y="";return typeof a.bindings>"u"?y=r(a,d):y=a.bindings().context||"",y}gt.getLoggerContext=n;function c(a,d,y=t.PINO_CUSTOM_CONTEXT_KEY){const m=n(a,y);return m.trim()?`${m}/${d}`:d}gt.formatChildLoggerContext=c;function h(a,d,y=t.PINO_CUSTOM_CONTEXT_KEY){const m=c(a,d,y),I=a.child({context:m});return i(I,m,y)}return gt.generateChildLogger=h,gt}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const e=Nt,r=e.__importDefault(Pu());Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return r.default}}),e.__exportStar(Zo(),t),e.__exportStar(Fu(),t)})(Oe);class Uu extends yr{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}let Lu=class extends yr{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}},Mu=class{constructor(e,r){this.logger=e,this.core=r}},Bu=class extends yr{constructor(e,r){super(),this.relayer=e,this.logger=r}},$u=class extends yr{constructor(e){super()}},ju=class{constructor(e,r,i,n){this.core=e,this.logger=r,this.name=i}},zu=class extends yr{constructor(e,r){super(),this.relayer=e,this.logger=r}},Ku=class extends yr{constructor(e,r){super(),this.core=e,this.logger=r}},qu=class{constructor(e,r){this.projectId=e,this.logger=r}},Vu=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},Hu=class{constructor(e){this.client=e}};const ku=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),Wu=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(i,n)=>typeof n=="string"&&n.match(/^\d+n$/)?BigInt(n.substring(0,n.length-1)):n)};function Qo(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Wu(t)}catch{return t}}function mn(t){return typeof t=="string"?t:ku(t)||""}var _n={},Ir={},xi={},Ii={};Object.defineProperty(Ii,"__esModule",{value:!0});Ii.BrowserRandomSource=void 0;const Ss=65536;class Gu{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(e);for(let i=0;i<r.length;i+=Ss)this._crypto.getRandomValues(r.subarray(i,i+Math.min(r.length-i,Ss)));return r}}Ii.BrowserRandomSource=Gu;function Yu(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Oi={},St={};Object.defineProperty(St,"__esModule",{value:!0});function Ju(t){for(var e=0;e<t.length;e++)t[e]=0;return t}St.wipe=Ju;const Xu={},Zu=Object.freeze(Object.defineProperty({__proto__:null,default:Xu},Symbol.toStringTag,{value:"Module"})),Qu=Fo(Zu);Object.defineProperty(Oi,"__esModule",{value:!0});Oi.NodeRandomSource=void 0;const el=St;class tl{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Yu<"u"){const e=Qu;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const i=new Uint8Array(e);for(let n=0;n<i.length;n++)i[n]=r[n];return(0,el.wipe)(r),i}}Oi.NodeRandomSource=tl;Object.defineProperty(xi,"__esModule",{value:!0});xi.SystemRandomSource=void 0;const rl=Ii,il=Oi;class nl{constructor(){if(this.isAvailable=!1,this.name="",this._source=new rl.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new il.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}xi.SystemRandomSource=nl;var ge={},ea={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(a,d){var y=a>>>16&65535,m=a&65535,I=d>>>16&65535,M=d&65535;return m*M+(y*M+m*I<<16>>>0)|0}t.mul=Math.imul||e;function r(a,d){return a+d|0}t.add=r;function i(a,d){return a-d|0}t.sub=i;function n(a,d){return a<<d|a>>>32-d}t.rotl=n;function c(a,d){return a<<32-d|a>>>d}t.rotr=c;function h(a){return typeof a=="number"&&isFinite(a)&&Math.floor(a)===a}t.isInteger=Number.isInteger||h,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(a){return t.isInteger(a)&&a>=-t.MAX_SAFE_INTEGER&&a<=t.MAX_SAFE_INTEGER}})(ea);Object.defineProperty(ge,"__esModule",{value:!0});var ta=ea;function sl(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}ge.readInt16BE=sl;function ol(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}ge.readUint16BE=ol;function al(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}ge.readInt16LE=al;function cl(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}ge.readUint16LE=cl;function ra(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}ge.writeUint16BE=ra;ge.writeInt16BE=ra;function ia(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}ge.writeUint16LE=ia;ge.writeInt16LE=ia;function rn(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}ge.readInt32BE=rn;function nn(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}ge.readUint32BE=nn;function sn(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}ge.readInt32LE=sn;function on(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}ge.readUint32LE=on;function yi(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}ge.writeUint32BE=yi;ge.writeInt32BE=yi;function wi(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}ge.writeUint32LE=wi;ge.writeInt32LE=wi;function ul(t,e){e===void 0&&(e=0);var r=rn(t,e),i=rn(t,e+4);return r*4294967296+i-(i>>31)*4294967296}ge.readInt64BE=ul;function ll(t,e){e===void 0&&(e=0);var r=nn(t,e),i=nn(t,e+4);return r*4294967296+i}ge.readUint64BE=ll;function hl(t,e){e===void 0&&(e=0);var r=sn(t,e),i=sn(t,e+4);return i*4294967296+r-(r>>31)*4294967296}ge.readInt64LE=hl;function fl(t,e){e===void 0&&(e=0);var r=on(t,e),i=on(t,e+4);return i*4294967296+r}ge.readUint64LE=fl;function na(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),yi(t/4294967296>>>0,e,r),yi(t>>>0,e,r+4),e}ge.writeUint64BE=na;ge.writeInt64BE=na;function sa(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),wi(t>>>0,e,r),wi(t/4294967296>>>0,e,r+4),e}ge.writeUint64LE=sa;ge.writeInt64LE=sa;function dl(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,n=1,c=t/8+r-1;c>=r;c--)i+=e[c]*n,n*=256;return i}ge.readUintBE=dl;function pl(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,n=1,c=r;c<r+t/8;c++)i+=e[c]*n,n*=256;return i}ge.readUintLE=pl;function gl(t,e,r,i){if(r===void 0&&(r=new Uint8Array(t/8)),i===void 0&&(i=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!ta.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var n=1,c=t/8+i-1;c>=i;c--)r[c]=e/n&255,n*=256;return r}ge.writeUintBE=gl;function yl(t,e,r,i){if(r===void 0&&(r=new Uint8Array(t/8)),i===void 0&&(i=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!ta.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var n=1,c=i;c<i+t/8;c++)r[c]=e/n&255,n*=256;return r}ge.writeUintLE=yl;function wl(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}ge.readFloat32BE=wl;function bl(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}ge.readFloat32LE=bl;function ml(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}ge.readFloat64BE=ml;function _l(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}ge.readFloat64LE=_l;function El(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(r,t),e}ge.writeFloat32BE=El;function vl(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat32(r,t,!0),e}ge.writeFloat32LE=vl;function Dl(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(r,t),e}ge.writeFloat64BE=Dl;function Sl(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.setFloat64(r,t,!0),e}ge.writeFloat64LE=Sl;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=xi,r=ge,i=St;t.defaultRandomSource=new e.SystemRandomSource;function n(y,m=t.defaultRandomSource){return m.randomBytes(y)}t.randomBytes=n;function c(y=t.defaultRandomSource){const m=n(4,y),I=(0,r.readUint32LE)(m);return(0,i.wipe)(m),I}t.randomUint32=c;const h="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function a(y,m=h,I=t.defaultRandomSource){if(m.length<2)throw new Error("randomString charset is too short");if(m.length>256)throw new Error("randomString charset is too long");let M="";const N=m.length,T=256-256%N;for(;y>0;){const j=n(Math.ceil(y*256/T),I);for(let q=0;q<j.length&&y>0;q++){const X=j[q];X<T&&(M+=m.charAt(X%N),y--)}(0,i.wipe)(j)}return M}t.randomString=a;function d(y,m=h,I=t.defaultRandomSource){const M=Math.ceil(y/(Math.log(m.length)/Math.LN2));return a(M,m,I)}t.randomStringForEntropy=d})(Ir);var oa={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ge,r=St;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var i=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},a.prototype.update=function(d,y){if(y===void 0&&(y=d.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var m=0;if(this._bytesHashed+=y,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&y>0;)this._buffer[this._bufferLength++]=d[m++],y--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(y>=this.blockSize&&(m=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,d,m,y),y%=this.blockSize);y>0;)this._buffer[this._bufferLength++]=d[m++],y--;return this},a.prototype.finish=function(d){if(!this._finished){var y=this._bytesHashed,m=this._bufferLength,I=y/536870912|0,M=y<<3,N=y%128<112?128:256;this._buffer[m]=128;for(var T=m+1;T<N-8;T++)this._buffer[T]=0;e.writeUint32BE(I,this._buffer,N-8),e.writeUint32BE(M,this._buffer,N-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,N),this._finished=!0}for(var T=0;T<this.digestLength/8;T++)e.writeUint32BE(this._stateHi[T],d,T*8),e.writeUint32BE(this._stateLo[T],d,T*8+4);return this},a.prototype.digest=function(){var d=new Uint8Array(this.digestLength);return this.finish(d),d},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(d){return this._stateHi.set(d.stateHi),this._stateLo.set(d.stateLo),this._bufferLength=d.bufferLength,d.buffer&&this._buffer.set(d.buffer),this._bytesHashed=d.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(d){r.wipe(d.stateHi),r.wipe(d.stateLo),d.buffer&&r.wipe(d.buffer),d.bufferLength=0,d.bytesHashed=0},a}();t.SHA512=i;var n=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(a,d,y,m,I,M,N){for(var T=y[0],j=y[1],q=y[2],X=y[3],C=y[4],R=y[5],v=y[6],x=y[7],w=m[0],o=m[1],p=m[2],z=m[3],b=m[4],S=m[5],F=m[6],H=m[7],E,D,G,Y,W,V,k,J;N>=128;){for(var te=0;te<16;te++){var Q=8*te+M;a[te]=e.readUint32BE(I,Q),d[te]=e.readUint32BE(I,Q+4)}for(var te=0;te<80;te++){var ae=T,ne=j,le=q,$=X,B=C,P=R,l=v,O=x,ee=w,re=o,de=p,Se=z,_e=b,xe=S,Pe=F,Ne=H;if(E=x,D=H,W=D&65535,V=D>>>16,k=E&65535,J=E>>>16,E=(C>>>14|b<<32-14)^(C>>>18|b<<32-18)^(b>>>41-32|C<<32-(41-32)),D=(b>>>14|C<<32-14)^(b>>>18|C<<32-18)^(C>>>41-32|b<<32-(41-32)),W+=D&65535,V+=D>>>16,k+=E&65535,J+=E>>>16,E=C&R^~C&v,D=b&S^~b&F,W+=D&65535,V+=D>>>16,k+=E&65535,J+=E>>>16,E=n[te*2],D=n[te*2+1],W+=D&65535,V+=D>>>16,k+=E&65535,J+=E>>>16,E=a[te%16],D=d[te%16],W+=D&65535,V+=D>>>16,k+=E&65535,J+=E>>>16,V+=W>>>16,k+=V>>>16,J+=k>>>16,G=k&65535|J<<16,Y=W&65535|V<<16,E=G,D=Y,W=D&65535,V=D>>>16,k=E&65535,J=E>>>16,E=(T>>>28|w<<32-28)^(w>>>34-32|T<<32-(34-32))^(w>>>39-32|T<<32-(39-32)),D=(w>>>28|T<<32-28)^(T>>>34-32|w<<32-(34-32))^(T>>>39-32|w<<32-(39-32)),W+=D&65535,V+=D>>>16,k+=E&65535,J+=E>>>16,E=T&j^T&q^j&q,D=w&o^w&p^o&p,W+=D&65535,V+=D>>>16,k+=E&65535,J+=E>>>16,V+=W>>>16,k+=V>>>16,J+=k>>>16,O=k&65535|J<<16,Ne=W&65535|V<<16,E=$,D=Se,W=D&65535,V=D>>>16,k=E&65535,J=E>>>16,E=G,D=Y,W+=D&65535,V+=D>>>16,k+=E&65535,J+=E>>>16,V+=W>>>16,k+=V>>>16,J+=k>>>16,$=k&65535|J<<16,Se=W&65535|V<<16,j=ae,q=ne,X=le,C=$,R=B,v=P,x=l,T=O,o=ee,p=re,z=de,b=Se,S=_e,F=xe,H=Pe,w=Ne,te%16===15)for(var Q=0;Q<16;Q++)E=a[Q],D=d[Q],W=D&65535,V=D>>>16,k=E&65535,J=E>>>16,E=a[(Q+9)%16],D=d[(Q+9)%16],W+=D&65535,V+=D>>>16,k+=E&65535,J+=E>>>16,G=a[(Q+1)%16],Y=d[(Q+1)%16],E=(G>>>1|Y<<32-1)^(G>>>8|Y<<32-8)^G>>>7,D=(Y>>>1|G<<32-1)^(Y>>>8|G<<32-8)^(Y>>>7|G<<32-7),W+=D&65535,V+=D>>>16,k+=E&65535,J+=E>>>16,G=a[(Q+14)%16],Y=d[(Q+14)%16],E=(G>>>19|Y<<32-19)^(Y>>>61-32|G<<32-(61-32))^G>>>6,D=(Y>>>19|G<<32-19)^(G>>>61-32|Y<<32-(61-32))^(Y>>>6|G<<32-6),W+=D&65535,V+=D>>>16,k+=E&65535,J+=E>>>16,V+=W>>>16,k+=V>>>16,J+=k>>>16,a[Q]=k&65535|J<<16,d[Q]=W&65535|V<<16}E=T,D=w,W=D&65535,V=D>>>16,k=E&65535,J=E>>>16,E=y[0],D=m[0],W+=D&65535,V+=D>>>16,k+=E&65535,J+=E>>>16,V+=W>>>16,k+=V>>>16,J+=k>>>16,y[0]=T=k&65535|J<<16,m[0]=w=W&65535|V<<16,E=j,D=o,W=D&65535,V=D>>>16,k=E&65535,J=E>>>16,E=y[1],D=m[1],W+=D&65535,V+=D>>>16,k+=E&65535,J+=E>>>16,V+=W>>>16,k+=V>>>16,J+=k>>>16,y[1]=j=k&65535|J<<16,m[1]=o=W&65535|V<<16,E=q,D=p,W=D&65535,V=D>>>16,k=E&65535,J=E>>>16,E=y[2],D=m[2],W+=D&65535,V+=D>>>16,k+=E&65535,J+=E>>>16,V+=W>>>16,k+=V>>>16,J+=k>>>16,y[2]=q=k&65535|J<<16,m[2]=p=W&65535|V<<16,E=X,D=z,W=D&65535,V=D>>>16,k=E&65535,J=E>>>16,E=y[3],D=m[3],W+=D&65535,V+=D>>>16,k+=E&65535,J+=E>>>16,V+=W>>>16,k+=V>>>16,J+=k>>>16,y[3]=X=k&65535|J<<16,m[3]=z=W&65535|V<<16,E=C,D=b,W=D&65535,V=D>>>16,k=E&65535,J=E>>>16,E=y[4],D=m[4],W+=D&65535,V+=D>>>16,k+=E&65535,J+=E>>>16,V+=W>>>16,k+=V>>>16,J+=k>>>16,y[4]=C=k&65535|J<<16,m[4]=b=W&65535|V<<16,E=R,D=S,W=D&65535,V=D>>>16,k=E&65535,J=E>>>16,E=y[5],D=m[5],W+=D&65535,V+=D>>>16,k+=E&65535,J+=E>>>16,V+=W>>>16,k+=V>>>16,J+=k>>>16,y[5]=R=k&65535|J<<16,m[5]=S=W&65535|V<<16,E=v,D=F,W=D&65535,V=D>>>16,k=E&65535,J=E>>>16,E=y[6],D=m[6],W+=D&65535,V+=D>>>16,k+=E&65535,J+=E>>>16,V+=W>>>16,k+=V>>>16,J+=k>>>16,y[6]=v=k&65535|J<<16,m[6]=F=W&65535|V<<16,E=x,D=H,W=D&65535,V=D>>>16,k=E&65535,J=E>>>16,E=y[7],D=m[7],W+=D&65535,V+=D>>>16,k+=E&65535,J+=E>>>16,V+=W>>>16,k+=V>>>16,J+=k>>>16,y[7]=x=k&65535|J<<16,m[7]=H=W&65535|V<<16,M+=128,N-=128}return M}function h(a){var d=new i;d.update(a);var y=d.digest();return d.clean(),y}t.hash=h})(oa);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=Ir,r=oa,i=St;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function n($){const B=new Float64Array(16);if($)for(let P=0;P<$.length;P++)B[P]=$[P];return B}const c=new Uint8Array(32);c[0]=9;const h=n(),a=n([1]),d=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),y=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),m=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),I=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),M=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function N($,B){for(let P=0;P<16;P++)$[P]=B[P]|0}function T($){let B=1;for(let P=0;P<16;P++){let l=$[P]+B+65535;B=Math.floor(l/65536),$[P]=l-B*65536}$[0]+=B-1+37*(B-1)}function j($,B,P){const l=~(P-1);for(let O=0;O<16;O++){const ee=l&($[O]^B[O]);$[O]^=ee,B[O]^=ee}}function q($,B){const P=n(),l=n();for(let O=0;O<16;O++)l[O]=B[O];T(l),T(l),T(l);for(let O=0;O<2;O++){P[0]=l[0]-65517;for(let re=1;re<15;re++)P[re]=l[re]-65535-(P[re-1]>>16&1),P[re-1]&=65535;P[15]=l[15]-32767-(P[14]>>16&1);const ee=P[15]>>16&1;P[14]&=65535,j(l,P,1-ee)}for(let O=0;O<16;O++)$[2*O]=l[O]&255,$[2*O+1]=l[O]>>8}function X($,B){let P=0;for(let l=0;l<32;l++)P|=$[l]^B[l];return(1&P-1>>>8)-1}function C($,B){const P=new Uint8Array(32),l=new Uint8Array(32);return q(P,$),q(l,B),X(P,l)}function R($){const B=new Uint8Array(32);return q(B,$),B[0]&1}function v($,B){for(let P=0;P<16;P++)$[P]=B[2*P]+(B[2*P+1]<<8);$[15]&=32767}function x($,B,P){for(let l=0;l<16;l++)$[l]=B[l]+P[l]}function w($,B,P){for(let l=0;l<16;l++)$[l]=B[l]-P[l]}function o($,B,P){let l,O,ee=0,re=0,de=0,Se=0,_e=0,xe=0,Pe=0,Ne=0,Ee=0,be=0,fe=0,ye=0,me=0,he=0,pe=0,f=0,s=0,u=0,g=0,A=0,L=0,K=0,se=0,ce=0,ve=0,Ie=0,De=0,vt=0,ir=0,Cr=0,ri=0,je=P[0],Ue=P[1],ze=P[2],Ke=P[3],qe=P[4],Le=P[5],Ge=P[6],Ye=P[7],Je=P[8],Xe=P[9],Ze=P[10],ke=P[11],Ve=P[12],Re=P[13],Qe=P[14],et=P[15];l=B[0],ee+=l*je,re+=l*Ue,de+=l*ze,Se+=l*Ke,_e+=l*qe,xe+=l*Le,Pe+=l*Ge,Ne+=l*Ye,Ee+=l*Je,be+=l*Xe,fe+=l*Ze,ye+=l*ke,me+=l*Ve,he+=l*Re,pe+=l*Qe,f+=l*et,l=B[1],re+=l*je,de+=l*Ue,Se+=l*ze,_e+=l*Ke,xe+=l*qe,Pe+=l*Le,Ne+=l*Ge,Ee+=l*Ye,be+=l*Je,fe+=l*Xe,ye+=l*Ze,me+=l*ke,he+=l*Ve,pe+=l*Re,f+=l*Qe,s+=l*et,l=B[2],de+=l*je,Se+=l*Ue,_e+=l*ze,xe+=l*Ke,Pe+=l*qe,Ne+=l*Le,Ee+=l*Ge,be+=l*Ye,fe+=l*Je,ye+=l*Xe,me+=l*Ze,he+=l*ke,pe+=l*Ve,f+=l*Re,s+=l*Qe,u+=l*et,l=B[3],Se+=l*je,_e+=l*Ue,xe+=l*ze,Pe+=l*Ke,Ne+=l*qe,Ee+=l*Le,be+=l*Ge,fe+=l*Ye,ye+=l*Je,me+=l*Xe,he+=l*Ze,pe+=l*ke,f+=l*Ve,s+=l*Re,u+=l*Qe,g+=l*et,l=B[4],_e+=l*je,xe+=l*Ue,Pe+=l*ze,Ne+=l*Ke,Ee+=l*qe,be+=l*Le,fe+=l*Ge,ye+=l*Ye,me+=l*Je,he+=l*Xe,pe+=l*Ze,f+=l*ke,s+=l*Ve,u+=l*Re,g+=l*Qe,A+=l*et,l=B[5],xe+=l*je,Pe+=l*Ue,Ne+=l*ze,Ee+=l*Ke,be+=l*qe,fe+=l*Le,ye+=l*Ge,me+=l*Ye,he+=l*Je,pe+=l*Xe,f+=l*Ze,s+=l*ke,u+=l*Ve,g+=l*Re,A+=l*Qe,L+=l*et,l=B[6],Pe+=l*je,Ne+=l*Ue,Ee+=l*ze,be+=l*Ke,fe+=l*qe,ye+=l*Le,me+=l*Ge,he+=l*Ye,pe+=l*Je,f+=l*Xe,s+=l*Ze,u+=l*ke,g+=l*Ve,A+=l*Re,L+=l*Qe,K+=l*et,l=B[7],Ne+=l*je,Ee+=l*Ue,be+=l*ze,fe+=l*Ke,ye+=l*qe,me+=l*Le,he+=l*Ge,pe+=l*Ye,f+=l*Je,s+=l*Xe,u+=l*Ze,g+=l*ke,A+=l*Ve,L+=l*Re,K+=l*Qe,se+=l*et,l=B[8],Ee+=l*je,be+=l*Ue,fe+=l*ze,ye+=l*Ke,me+=l*qe,he+=l*Le,pe+=l*Ge,f+=l*Ye,s+=l*Je,u+=l*Xe,g+=l*Ze,A+=l*ke,L+=l*Ve,K+=l*Re,se+=l*Qe,ce+=l*et,l=B[9],be+=l*je,fe+=l*Ue,ye+=l*ze,me+=l*Ke,he+=l*qe,pe+=l*Le,f+=l*Ge,s+=l*Ye,u+=l*Je,g+=l*Xe,A+=l*Ze,L+=l*ke,K+=l*Ve,se+=l*Re,ce+=l*Qe,ve+=l*et,l=B[10],fe+=l*je,ye+=l*Ue,me+=l*ze,he+=l*Ke,pe+=l*qe,f+=l*Le,s+=l*Ge,u+=l*Ye,g+=l*Je,A+=l*Xe,L+=l*Ze,K+=l*ke,se+=l*Ve,ce+=l*Re,ve+=l*Qe,Ie+=l*et,l=B[11],ye+=l*je,me+=l*Ue,he+=l*ze,pe+=l*Ke,f+=l*qe,s+=l*Le,u+=l*Ge,g+=l*Ye,A+=l*Je,L+=l*Xe,K+=l*Ze,se+=l*ke,ce+=l*Ve,ve+=l*Re,Ie+=l*Qe,De+=l*et,l=B[12],me+=l*je,he+=l*Ue,pe+=l*ze,f+=l*Ke,s+=l*qe,u+=l*Le,g+=l*Ge,A+=l*Ye,L+=l*Je,K+=l*Xe,se+=l*Ze,ce+=l*ke,ve+=l*Ve,Ie+=l*Re,De+=l*Qe,vt+=l*et,l=B[13],he+=l*je,pe+=l*Ue,f+=l*ze,s+=l*Ke,u+=l*qe,g+=l*Le,A+=l*Ge,L+=l*Ye,K+=l*Je,se+=l*Xe,ce+=l*Ze,ve+=l*ke,Ie+=l*Ve,De+=l*Re,vt+=l*Qe,ir+=l*et,l=B[14],pe+=l*je,f+=l*Ue,s+=l*ze,u+=l*Ke,g+=l*qe,A+=l*Le,L+=l*Ge,K+=l*Ye,se+=l*Je,ce+=l*Xe,ve+=l*Ze,Ie+=l*ke,De+=l*Ve,vt+=l*Re,ir+=l*Qe,Cr+=l*et,l=B[15],f+=l*je,s+=l*Ue,u+=l*ze,g+=l*Ke,A+=l*qe,L+=l*Le,K+=l*Ge,se+=l*Ye,ce+=l*Je,ve+=l*Xe,Ie+=l*Ze,De+=l*ke,vt+=l*Ve,ir+=l*Re,Cr+=l*Qe,ri+=l*et,ee+=38*s,re+=38*u,de+=38*g,Se+=38*A,_e+=38*L,xe+=38*K,Pe+=38*se,Ne+=38*ce,Ee+=38*ve,be+=38*Ie,fe+=38*De,ye+=38*vt,me+=38*ir,he+=38*Cr,pe+=38*ri,O=1,l=ee+O+65535,O=Math.floor(l/65536),ee=l-O*65536,l=re+O+65535,O=Math.floor(l/65536),re=l-O*65536,l=de+O+65535,O=Math.floor(l/65536),de=l-O*65536,l=Se+O+65535,O=Math.floor(l/65536),Se=l-O*65536,l=_e+O+65535,O=Math.floor(l/65536),_e=l-O*65536,l=xe+O+65535,O=Math.floor(l/65536),xe=l-O*65536,l=Pe+O+65535,O=Math.floor(l/65536),Pe=l-O*65536,l=Ne+O+65535,O=Math.floor(l/65536),Ne=l-O*65536,l=Ee+O+65535,O=Math.floor(l/65536),Ee=l-O*65536,l=be+O+65535,O=Math.floor(l/65536),be=l-O*65536,l=fe+O+65535,O=Math.floor(l/65536),fe=l-O*65536,l=ye+O+65535,O=Math.floor(l/65536),ye=l-O*65536,l=me+O+65535,O=Math.floor(l/65536),me=l-O*65536,l=he+O+65535,O=Math.floor(l/65536),he=l-O*65536,l=pe+O+65535,O=Math.floor(l/65536),pe=l-O*65536,l=f+O+65535,O=Math.floor(l/65536),f=l-O*65536,ee+=O-1+37*(O-1),O=1,l=ee+O+65535,O=Math.floor(l/65536),ee=l-O*65536,l=re+O+65535,O=Math.floor(l/65536),re=l-O*65536,l=de+O+65535,O=Math.floor(l/65536),de=l-O*65536,l=Se+O+65535,O=Math.floor(l/65536),Se=l-O*65536,l=_e+O+65535,O=Math.floor(l/65536),_e=l-O*65536,l=xe+O+65535,O=Math.floor(l/65536),xe=l-O*65536,l=Pe+O+65535,O=Math.floor(l/65536),Pe=l-O*65536,l=Ne+O+65535,O=Math.floor(l/65536),Ne=l-O*65536,l=Ee+O+65535,O=Math.floor(l/65536),Ee=l-O*65536,l=be+O+65535,O=Math.floor(l/65536),be=l-O*65536,l=fe+O+65535,O=Math.floor(l/65536),fe=l-O*65536,l=ye+O+65535,O=Math.floor(l/65536),ye=l-O*65536,l=me+O+65535,O=Math.floor(l/65536),me=l-O*65536,l=he+O+65535,O=Math.floor(l/65536),he=l-O*65536,l=pe+O+65535,O=Math.floor(l/65536),pe=l-O*65536,l=f+O+65535,O=Math.floor(l/65536),f=l-O*65536,ee+=O-1+37*(O-1),$[0]=ee,$[1]=re,$[2]=de,$[3]=Se,$[4]=_e,$[5]=xe,$[6]=Pe,$[7]=Ne,$[8]=Ee,$[9]=be,$[10]=fe,$[11]=ye,$[12]=me,$[13]=he,$[14]=pe,$[15]=f}function p($,B){o($,B,B)}function z($,B){const P=n();let l;for(l=0;l<16;l++)P[l]=B[l];for(l=253;l>=0;l--)p(P,P),l!==2&&l!==4&&o(P,P,B);for(l=0;l<16;l++)$[l]=P[l]}function b($,B){const P=n();let l;for(l=0;l<16;l++)P[l]=B[l];for(l=250;l>=0;l--)p(P,P),l!==1&&o(P,P,B);for(l=0;l<16;l++)$[l]=P[l]}function S($,B){const P=n(),l=n(),O=n(),ee=n(),re=n(),de=n(),Se=n(),_e=n(),xe=n();w(P,$[1],$[0]),w(xe,B[1],B[0]),o(P,P,xe),x(l,$[0],$[1]),x(xe,B[0],B[1]),o(l,l,xe),o(O,$[3],B[3]),o(O,O,y),o(ee,$[2],B[2]),x(ee,ee,ee),w(re,l,P),w(de,ee,O),x(Se,ee,O),x(_e,l,P),o($[0],re,de),o($[1],_e,Se),o($[2],Se,de),o($[3],re,_e)}function F($,B,P){for(let l=0;l<4;l++)j($[l],B[l],P)}function H($,B){const P=n(),l=n(),O=n();z(O,B[2]),o(P,B[0],O),o(l,B[1],O),q($,l),$[31]^=R(P)<<7}function E($,B,P){N($[0],h),N($[1],a),N($[2],a),N($[3],h);for(let l=255;l>=0;--l){const O=P[l/8|0]>>(l&7)&1;F($,B,O),S(B,$),S($,$),F($,B,O)}}function D($,B){const P=[n(),n(),n(),n()];N(P[0],m),N(P[1],I),N(P[2],a),o(P[3],m,I),E($,P,B)}function G($){if($.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const B=(0,r.hash)($);B[0]&=248,B[31]&=127,B[31]|=64;const P=new Uint8Array(32),l=[n(),n(),n(),n()];D(l,B),H(P,l);const O=new Uint8Array(64);return O.set($),O.set(P,32),{publicKey:P,secretKey:O}}t.generateKeyPairFromSeed=G;function Y($){const B=(0,e.randomBytes)(32,$),P=G(B);return(0,i.wipe)(B),P}t.generateKeyPair=Y;function W($){if($.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array($.subarray(32))}t.extractPublicKeyFromSecretKey=W;const V=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function k($,B){let P,l,O,ee;for(l=63;l>=32;--l){for(P=0,O=l-32,ee=l-12;O<ee;++O)B[O]+=P-16*B[l]*V[O-(l-32)],P=Math.floor((B[O]+128)/256),B[O]-=P*256;B[O]+=P,B[l]=0}for(P=0,O=0;O<32;O++)B[O]+=P-(B[31]>>4)*V[O],P=B[O]>>8,B[O]&=255;for(O=0;O<32;O++)B[O]-=P*V[O];for(l=0;l<32;l++)B[l+1]+=B[l]>>8,$[l]=B[l]&255}function J($){const B=new Float64Array(64);for(let P=0;P<64;P++)B[P]=$[P];for(let P=0;P<64;P++)$[P]=0;k($,B)}function te($,B){const P=new Float64Array(64),l=[n(),n(),n(),n()],O=(0,r.hash)($.subarray(0,32));O[0]&=248,O[31]&=127,O[31]|=64;const ee=new Uint8Array(64);ee.set(O.subarray(32),32);const re=new r.SHA512;re.update(ee.subarray(32)),re.update(B);const de=re.digest();re.clean(),J(de),D(l,de),H(ee,l),re.reset(),re.update(ee.subarray(0,32)),re.update($.subarray(32)),re.update(B);const Se=re.digest();J(Se);for(let _e=0;_e<32;_e++)P[_e]=de[_e];for(let _e=0;_e<32;_e++)for(let xe=0;xe<32;xe++)P[_e+xe]+=Se[_e]*O[xe];return k(ee.subarray(32),P),ee}t.sign=te;function Q($,B){const P=n(),l=n(),O=n(),ee=n(),re=n(),de=n(),Se=n();return N($[2],a),v($[1],B),p(O,$[1]),o(ee,O,d),w(O,O,$[2]),x(ee,$[2],ee),p(re,ee),p(de,re),o(Se,de,re),o(P,Se,O),o(P,P,ee),b(P,P),o(P,P,O),o(P,P,ee),o(P,P,ee),o($[0],P,ee),p(l,$[0]),o(l,l,ee),C(l,O)&&o($[0],$[0],M),p(l,$[0]),o(l,l,ee),C(l,O)?-1:(R($[0])===B[31]>>7&&w($[0],h,$[0]),o($[3],$[0],$[1]),0)}function ae($,B,P){const l=new Uint8Array(32),O=[n(),n(),n(),n()],ee=[n(),n(),n(),n()];if(P.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(Q(ee,$))return!1;const re=new r.SHA512;re.update(P.subarray(0,32)),re.update($),re.update(B);const de=re.digest();return J(de),E(O,ee,de),D(ee,P.subarray(32)),S(O,ee),H(l,O),!X(P,l)}t.verify=ae;function ne($){let B=[n(),n(),n(),n()];if(Q(B,$))throw new Error("Ed25519: invalid public key");let P=n(),l=n(),O=B[1];x(P,a,O),w(l,a,O),z(l,l),o(P,P,l);let ee=new Uint8Array(32);return q(ee,P),ee}t.convertPublicKeyToX25519=ne;function le($){const B=(0,r.hash)($.subarray(0,32));B[0]&=248,B[31]&=127,B[31]|=64;const P=new Uint8Array(B.subarray(0,32));return(0,i.wipe)(B),P}t.convertSecretKeyToX25519=le})(_n);const xl="EdDSA",Il="JWT",aa=".",ca="base64url",Ol="utf8",Al="utf8",Cl=":",Tl="did",Nl="key",xs="base58btc",Rl="z",Pl="K36",Fl=32;function En(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function ua(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?En(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function an(t,e){e||(e=t.reduce((n,c)=>n+c.length,0));const r=ua(e);let i=0;for(const n of t)r.set(n,i),i+=n.length;return En(r)}function Ul(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var c=t.charAt(n),h=c.charCodeAt(0);if(r[h]!==255)throw new TypeError(c+" is ambiguous");r[h]=n}var a=t.length,d=t.charAt(0),y=Math.log(a)/Math.log(256),m=Math.log(256)/Math.log(a);function I(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length===0)return"";for(var j=0,q=0,X=0,C=T.length;X!==C&&T[X]===0;)X++,j++;for(var R=(C-X)*m+1>>>0,v=new Uint8Array(R);X!==C;){for(var x=T[X],w=0,o=R-1;(x!==0||w<q)&&o!==-1;o--,w++)x+=256*v[o]>>>0,v[o]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");q=w,X++}for(var p=R-q;p!==R&&v[p]===0;)p++;for(var z=d.repeat(j);p<R;++p)z+=t.charAt(v[p]);return z}function M(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return new Uint8Array;var j=0;if(T[j]!==" "){for(var q=0,X=0;T[j]===d;)q++,j++;for(var C=(T.length-j)*y+1>>>0,R=new Uint8Array(C);T[j];){var v=r[T.charCodeAt(j)];if(v===255)return;for(var x=0,w=C-1;(v!==0||x<X)&&w!==-1;w--,x++)v+=a*R[w]>>>0,R[w]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");X=x,j++}if(T[j]!==" "){for(var o=C-X;o!==C&&R[o]===0;)o++;for(var p=new Uint8Array(q+(C-o)),z=q;o!==C;)p[z++]=R[o++];return p}}}function N(T){var j=M(T);if(j)return j;throw new Error(`Non-${e} character`)}return{encode:I,decodeUnsafe:M,decode:N}}var Ll=Ul,Ml=Ll;const Bl=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},$l=t=>new TextEncoder().encode(t),jl=t=>new TextDecoder().decode(t);class zl{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Kl{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return la(this,e)}}class ql{constructor(e){this.decoders=e}or(e){return la(this,e)}decode(e){const r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const la=(t,e)=>new ql({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Vl{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new zl(e,r,i),this.decoder=new Kl(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Ai=({name:t,prefix:e,encode:r,decode:i})=>new Vl(t,e,r,i),Xr=({prefix:t,name:e,alphabet:r})=>{const{encode:i,decode:n}=Ml(r,e);return Ai({prefix:t,name:e,encode:i,decode:c=>Bl(n(c))})},Hl=(t,e,r,i)=>{const n={};for(let m=0;m<e.length;++m)n[e[m]]=m;let c=t.length;for(;t[c-1]==="=";)--c;const h=new Uint8Array(c*r/8|0);let a=0,d=0,y=0;for(let m=0;m<c;++m){const I=n[t[m]];if(I===void 0)throw new SyntaxError(`Non-${i} character`);d=d<<r|I,a+=r,a>=8&&(a-=8,h[y++]=255&d>>a)}if(a>=r||255&d<<8-a)throw new SyntaxError("Unexpected end of data");return h},kl=(t,e,r)=>{const i=e[e.length-1]==="=",n=(1<<r)-1;let c="",h=0,a=0;for(let d=0;d<t.length;++d)for(a=a<<8|t[d],h+=8;h>r;)h-=r,c+=e[n&a>>h];if(h&&(c+=e[n&a<<r-h]),i)for(;c.length*r&7;)c+="=";return c},lt=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>Ai({prefix:e,name:t,encode(n){return kl(n,i,r)},decode(n){return Hl(n,i,r,t)}}),Wl=Ai({prefix:"\0",name:"identity",encode:t=>jl(t),decode:t=>$l(t)}),Gl=Object.freeze(Object.defineProperty({__proto__:null,identity:Wl},Symbol.toStringTag,{value:"Module"})),Yl=lt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Jl=Object.freeze(Object.defineProperty({__proto__:null,base2:Yl},Symbol.toStringTag,{value:"Module"})),Xl=lt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Zl=Object.freeze(Object.defineProperty({__proto__:null,base8:Xl},Symbol.toStringTag,{value:"Module"})),Ql=Xr({prefix:"9",name:"base10",alphabet:"0123456789"}),eh=Object.freeze(Object.defineProperty({__proto__:null,base10:Ql},Symbol.toStringTag,{value:"Module"})),th=lt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),rh=lt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),ih=Object.freeze(Object.defineProperty({__proto__:null,base16:th,base16upper:rh},Symbol.toStringTag,{value:"Module"})),nh=lt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),sh=lt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),oh=lt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ah=lt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ch=lt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),uh=lt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),lh=lt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hh=lt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),fh=lt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),dh=Object.freeze(Object.defineProperty({__proto__:null,base32:nh,base32hex:ch,base32hexpad:lh,base32hexpadupper:hh,base32hexupper:uh,base32pad:oh,base32padupper:ah,base32upper:sh,base32z:fh},Symbol.toStringTag,{value:"Module"})),ph=Xr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),gh=Xr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),yh=Object.freeze(Object.defineProperty({__proto__:null,base36:ph,base36upper:gh},Symbol.toStringTag,{value:"Module"})),wh=Xr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),bh=Xr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),mh=Object.freeze(Object.defineProperty({__proto__:null,base58btc:wh,base58flickr:bh},Symbol.toStringTag,{value:"Module"})),_h=lt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Eh=lt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),vh=lt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Dh=lt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Sh=Object.freeze(Object.defineProperty({__proto__:null,base64:_h,base64pad:Eh,base64url:vh,base64urlpad:Dh},Symbol.toStringTag,{value:"Module"})),ha=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),xh=ha.reduce((t,e,r)=>(t[r]=e,t),[]),Ih=ha.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Oh(t){return t.reduce((e,r)=>(e+=xh[r],e),"")}function Ah(t){const e=[];for(const r of t){const i=Ih[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}const Ch=Ai({prefix:"🚀",name:"base256emoji",encode:Oh,decode:Ah}),Th=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Ch},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const Is={...Gl,...Jl,...Zl,...eh,...ih,...dh,...yh,...mh,...Sh,...Th};function fa(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}const Os=fa("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Hi=fa("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=ua(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),da={utf8:Os,"utf-8":Os,hex:Is.base16,latin1:Hi,ascii:Hi,binary:Hi,...Is};function mt(t,e="utf8"){const r=da[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function Et(t,e="utf8"){const r=da[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?En(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function bi(t){return mt(Et(mn(t),Ol),ca)}function pa(t){const e=Et(Pl,xs),r=Rl+mt(an([e,t]),xs);return[Tl,Nl,r].join(Cl)}function Nh(t){return mt(t,ca)}function Rh(t){return Et([bi(t.header),bi(t.payload)].join(aa),Al)}function Ph(t){return[bi(t.header),bi(t.payload),Nh(t.signature)].join(aa)}function As(t=Ir.randomBytes(Fl)){return _n.generateKeyPairFromSeed(t)}async function Fh(t,e,r,i,n=ue.fromMiliseconds(Date.now())){const c={alg:xl,typ:Il},h=pa(i.publicKey),a=n+r,d={iss:h,sub:t,aud:e,iat:n,exp:a},y=Rh({header:c,payload:d}),m=_n.sign(i.secretKey,y);return Ph({header:c,payload:d,signature:m})}var vn={},Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});var dt=ge,cn=St,Uh=20;function Lh(t,e,r){for(var i=1634760805,n=857760878,c=2036477234,h=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],d=r[7]<<24|r[6]<<16|r[5]<<8|r[4],y=r[11]<<24|r[10]<<16|r[9]<<8|r[8],m=r[15]<<24|r[14]<<16|r[13]<<8|r[12],I=r[19]<<24|r[18]<<16|r[17]<<8|r[16],M=r[23]<<24|r[22]<<16|r[21]<<8|r[20],N=r[27]<<24|r[26]<<16|r[25]<<8|r[24],T=r[31]<<24|r[30]<<16|r[29]<<8|r[28],j=e[3]<<24|e[2]<<16|e[1]<<8|e[0],q=e[7]<<24|e[6]<<16|e[5]<<8|e[4],X=e[11]<<24|e[10]<<16|e[9]<<8|e[8],C=e[15]<<24|e[14]<<16|e[13]<<8|e[12],R=i,v=n,x=c,w=h,o=a,p=d,z=y,b=m,S=I,F=M,H=N,E=T,D=j,G=q,Y=X,W=C,V=0;V<Uh;V+=2)R=R+o|0,D^=R,D=D>>>32-16|D<<16,S=S+D|0,o^=S,o=o>>>32-12|o<<12,v=v+p|0,G^=v,G=G>>>32-16|G<<16,F=F+G|0,p^=F,p=p>>>32-12|p<<12,x=x+z|0,Y^=x,Y=Y>>>32-16|Y<<16,H=H+Y|0,z^=H,z=z>>>32-12|z<<12,w=w+b|0,W^=w,W=W>>>32-16|W<<16,E=E+W|0,b^=E,b=b>>>32-12|b<<12,x=x+z|0,Y^=x,Y=Y>>>32-8|Y<<8,H=H+Y|0,z^=H,z=z>>>32-7|z<<7,w=w+b|0,W^=w,W=W>>>32-8|W<<8,E=E+W|0,b^=E,b=b>>>32-7|b<<7,v=v+p|0,G^=v,G=G>>>32-8|G<<8,F=F+G|0,p^=F,p=p>>>32-7|p<<7,R=R+o|0,D^=R,D=D>>>32-8|D<<8,S=S+D|0,o^=S,o=o>>>32-7|o<<7,R=R+p|0,W^=R,W=W>>>32-16|W<<16,H=H+W|0,p^=H,p=p>>>32-12|p<<12,v=v+z|0,D^=v,D=D>>>32-16|D<<16,E=E+D|0,z^=E,z=z>>>32-12|z<<12,x=x+b|0,G^=x,G=G>>>32-16|G<<16,S=S+G|0,b^=S,b=b>>>32-12|b<<12,w=w+o|0,Y^=w,Y=Y>>>32-16|Y<<16,F=F+Y|0,o^=F,o=o>>>32-12|o<<12,x=x+b|0,G^=x,G=G>>>32-8|G<<8,S=S+G|0,b^=S,b=b>>>32-7|b<<7,w=w+o|0,Y^=w,Y=Y>>>32-8|Y<<8,F=F+Y|0,o^=F,o=o>>>32-7|o<<7,v=v+z|0,D^=v,D=D>>>32-8|D<<8,E=E+D|0,z^=E,z=z>>>32-7|z<<7,R=R+p|0,W^=R,W=W>>>32-8|W<<8,H=H+W|0,p^=H,p=p>>>32-7|p<<7;dt.writeUint32LE(R+i|0,t,0),dt.writeUint32LE(v+n|0,t,4),dt.writeUint32LE(x+c|0,t,8),dt.writeUint32LE(w+h|0,t,12),dt.writeUint32LE(o+a|0,t,16),dt.writeUint32LE(p+d|0,t,20),dt.writeUint32LE(z+y|0,t,24),dt.writeUint32LE(b+m|0,t,28),dt.writeUint32LE(S+I|0,t,32),dt.writeUint32LE(F+M|0,t,36),dt.writeUint32LE(H+N|0,t,40),dt.writeUint32LE(E+T|0,t,44),dt.writeUint32LE(D+j|0,t,48),dt.writeUint32LE(G+q|0,t,52),dt.writeUint32LE(Y+X|0,t,56),dt.writeUint32LE(W+C|0,t,60)}function ga(t,e,r,i,n){if(n===void 0&&(n=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<r.length)throw new Error("ChaCha: destination is shorter than source");var c,h;if(n===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=new Uint8Array(16),h=c.length-e.length,c.set(e,h)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");c=e,h=n}for(var a=new Uint8Array(64),d=0;d<r.length;d+=64){Lh(a,c,t);for(var y=d;y<d+64&&y<r.length;y++)i[y]=r[y]^a[y-d];Bh(c,0,h)}return cn.wipe(a),n===0&&cn.wipe(c),i}Ci.streamXOR=ga;function Mh(t,e,r,i){return i===void 0&&(i=0),cn.wipe(r),ga(t,e,r,r,i)}Ci.stream=Mh;function Bh(t,e,r){for(var i=1;r--;)i=i+(t[e]&255)|0,t[e]=i&255,i>>>=8,e++;if(i>0)throw new Error("ChaCha: counter overflow")}var ya={},rr={};Object.defineProperty(rr,"__esModule",{value:!0});function $h(t,e,r){return~(t-1)&e|t-1&r}rr.select=$h;function jh(t,e){return(t|0)-(e|0)-1>>>31&1}rr.lessOrEqual=jh;function wa(t,e){if(t.length!==e.length)return 0;for(var r=0,i=0;i<t.length;i++)r|=t[i]^e[i];return 1&r-1>>>8}rr.compare=wa;function zh(t,e){return t.length===0||e.length===0?!1:wa(t,e)!==0}rr.equal=zh;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=rr,r=St;t.DIGEST_LENGTH=16;var i=function(){function h(a){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var d=a[0]|a[1]<<8;this._r[0]=d&8191;var y=a[2]|a[3]<<8;this._r[1]=(d>>>13|y<<3)&8191;var m=a[4]|a[5]<<8;this._r[2]=(y>>>10|m<<6)&7939;var I=a[6]|a[7]<<8;this._r[3]=(m>>>7|I<<9)&8191;var M=a[8]|a[9]<<8;this._r[4]=(I>>>4|M<<12)&255,this._r[5]=M>>>1&8190;var N=a[10]|a[11]<<8;this._r[6]=(M>>>14|N<<2)&8191;var T=a[12]|a[13]<<8;this._r[7]=(N>>>11|T<<5)&8065;var j=a[14]|a[15]<<8;this._r[8]=(T>>>8|j<<8)&8191,this._r[9]=j>>>5&127,this._pad[0]=a[16]|a[17]<<8,this._pad[1]=a[18]|a[19]<<8,this._pad[2]=a[20]|a[21]<<8,this._pad[3]=a[22]|a[23]<<8,this._pad[4]=a[24]|a[25]<<8,this._pad[5]=a[26]|a[27]<<8,this._pad[6]=a[28]|a[29]<<8,this._pad[7]=a[30]|a[31]<<8}return h.prototype._blocks=function(a,d,y){for(var m=this._fin?0:2048,I=this._h[0],M=this._h[1],N=this._h[2],T=this._h[3],j=this._h[4],q=this._h[5],X=this._h[6],C=this._h[7],R=this._h[8],v=this._h[9],x=this._r[0],w=this._r[1],o=this._r[2],p=this._r[3],z=this._r[4],b=this._r[5],S=this._r[6],F=this._r[7],H=this._r[8],E=this._r[9];y>=16;){var D=a[d+0]|a[d+1]<<8;I+=D&8191;var G=a[d+2]|a[d+3]<<8;M+=(D>>>13|G<<3)&8191;var Y=a[d+4]|a[d+5]<<8;N+=(G>>>10|Y<<6)&8191;var W=a[d+6]|a[d+7]<<8;T+=(Y>>>7|W<<9)&8191;var V=a[d+8]|a[d+9]<<8;j+=(W>>>4|V<<12)&8191,q+=V>>>1&8191;var k=a[d+10]|a[d+11]<<8;X+=(V>>>14|k<<2)&8191;var J=a[d+12]|a[d+13]<<8;C+=(k>>>11|J<<5)&8191;var te=a[d+14]|a[d+15]<<8;R+=(J>>>8|te<<8)&8191,v+=te>>>5|m;var Q=0,ae=Q;ae+=I*x,ae+=M*(5*E),ae+=N*(5*H),ae+=T*(5*F),ae+=j*(5*S),Q=ae>>>13,ae&=8191,ae+=q*(5*b),ae+=X*(5*z),ae+=C*(5*p),ae+=R*(5*o),ae+=v*(5*w),Q+=ae>>>13,ae&=8191;var ne=Q;ne+=I*w,ne+=M*x,ne+=N*(5*E),ne+=T*(5*H),ne+=j*(5*F),Q=ne>>>13,ne&=8191,ne+=q*(5*S),ne+=X*(5*b),ne+=C*(5*z),ne+=R*(5*p),ne+=v*(5*o),Q+=ne>>>13,ne&=8191;var le=Q;le+=I*o,le+=M*w,le+=N*x,le+=T*(5*E),le+=j*(5*H),Q=le>>>13,le&=8191,le+=q*(5*F),le+=X*(5*S),le+=C*(5*b),le+=R*(5*z),le+=v*(5*p),Q+=le>>>13,le&=8191;var $=Q;$+=I*p,$+=M*o,$+=N*w,$+=T*x,$+=j*(5*E),Q=$>>>13,$&=8191,$+=q*(5*H),$+=X*(5*F),$+=C*(5*S),$+=R*(5*b),$+=v*(5*z),Q+=$>>>13,$&=8191;var B=Q;B+=I*z,B+=M*p,B+=N*o,B+=T*w,B+=j*x,Q=B>>>13,B&=8191,B+=q*(5*E),B+=X*(5*H),B+=C*(5*F),B+=R*(5*S),B+=v*(5*b),Q+=B>>>13,B&=8191;var P=Q;P+=I*b,P+=M*z,P+=N*p,P+=T*o,P+=j*w,Q=P>>>13,P&=8191,P+=q*x,P+=X*(5*E),P+=C*(5*H),P+=R*(5*F),P+=v*(5*S),Q+=P>>>13,P&=8191;var l=Q;l+=I*S,l+=M*b,l+=N*z,l+=T*p,l+=j*o,Q=l>>>13,l&=8191,l+=q*w,l+=X*x,l+=C*(5*E),l+=R*(5*H),l+=v*(5*F),Q+=l>>>13,l&=8191;var O=Q;O+=I*F,O+=M*S,O+=N*b,O+=T*z,O+=j*p,Q=O>>>13,O&=8191,O+=q*o,O+=X*w,O+=C*x,O+=R*(5*E),O+=v*(5*H),Q+=O>>>13,O&=8191;var ee=Q;ee+=I*H,ee+=M*F,ee+=N*S,ee+=T*b,ee+=j*z,Q=ee>>>13,ee&=8191,ee+=q*p,ee+=X*o,ee+=C*w,ee+=R*x,ee+=v*(5*E),Q+=ee>>>13,ee&=8191;var re=Q;re+=I*E,re+=M*H,re+=N*F,re+=T*S,re+=j*b,Q=re>>>13,re&=8191,re+=q*z,re+=X*p,re+=C*o,re+=R*w,re+=v*x,Q+=re>>>13,re&=8191,Q=(Q<<2)+Q|0,Q=Q+ae|0,ae=Q&8191,Q=Q>>>13,ne+=Q,I=ae,M=ne,N=le,T=$,j=B,q=P,X=l,C=O,R=ee,v=re,d+=16,y-=16}this._h[0]=I,this._h[1]=M,this._h[2]=N,this._h[3]=T,this._h[4]=j,this._h[5]=q,this._h[6]=X,this._h[7]=C,this._h[8]=R,this._h[9]=v},h.prototype.finish=function(a,d){d===void 0&&(d=0);var y=new Uint16Array(10),m,I,M,N;if(this._leftover){for(N=this._leftover,this._buffer[N++]=1;N<16;N++)this._buffer[N]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(m=this._h[1]>>>13,this._h[1]&=8191,N=2;N<10;N++)this._h[N]+=m,m=this._h[N]>>>13,this._h[N]&=8191;for(this._h[0]+=m*5,m=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=m,m=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=m,y[0]=this._h[0]+5,m=y[0]>>>13,y[0]&=8191,N=1;N<10;N++)y[N]=this._h[N]+m,m=y[N]>>>13,y[N]&=8191;for(y[9]-=8192,I=(m^1)-1,N=0;N<10;N++)y[N]&=I;for(I=~I,N=0;N<10;N++)this._h[N]=this._h[N]&I|y[N];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,M=this._h[0]+this._pad[0],this._h[0]=M&65535,N=1;N<8;N++)M=(this._h[N]+this._pad[N]|0)+(M>>>16)|0,this._h[N]=M&65535;return a[d+0]=this._h[0]>>>0,a[d+1]=this._h[0]>>>8,a[d+2]=this._h[1]>>>0,a[d+3]=this._h[1]>>>8,a[d+4]=this._h[2]>>>0,a[d+5]=this._h[2]>>>8,a[d+6]=this._h[3]>>>0,a[d+7]=this._h[3]>>>8,a[d+8]=this._h[4]>>>0,a[d+9]=this._h[4]>>>8,a[d+10]=this._h[5]>>>0,a[d+11]=this._h[5]>>>8,a[d+12]=this._h[6]>>>0,a[d+13]=this._h[6]>>>8,a[d+14]=this._h[7]>>>0,a[d+15]=this._h[7]>>>8,this._finished=!0,this},h.prototype.update=function(a){var d=0,y=a.length,m;if(this._leftover){m=16-this._leftover,m>y&&(m=y);for(var I=0;I<m;I++)this._buffer[this._leftover+I]=a[d+I];if(y-=m,d+=m,this._leftover+=m,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(y>=16&&(m=y-y%16,this._blocks(a,d,m),d+=m,y-=m),y){for(var I=0;I<y;I++)this._buffer[this._leftover+I]=a[d+I];this._leftover+=y}return this},h.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var a=new Uint8Array(16);return this.finish(a),a},h.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},h}();t.Poly1305=i;function n(h,a){var d=new i(h);d.update(a);var y=d.digest();return d.clean(),y}t.oneTimeAuth=n;function c(h,a){return h.length!==t.DIGEST_LENGTH||a.length!==t.DIGEST_LENGTH?!1:e.equal(h,a)}t.equal=c})(ya);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=Ci,r=ya,i=St,n=ge,c=rr;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var h=new Uint8Array(16),a=function(){function d(y){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,y.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(y)}return d.prototype.seal=function(y,m,I,M){if(y.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var N=new Uint8Array(16);N.set(y,N.length-y.length);var T=new Uint8Array(32);e.stream(this._key,N,T,4);var j=m.length+this.tagLength,q;if(M){if(M.length!==j)throw new Error("ChaCha20Poly1305: incorrect destination length");q=M}else q=new Uint8Array(j);return e.streamXOR(this._key,N,m,q,4),this._authenticate(q.subarray(q.length-this.tagLength,q.length),T,q.subarray(0,q.length-this.tagLength),I),i.wipe(N),q},d.prototype.open=function(y,m,I,M){if(y.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(m.length<this.tagLength)return null;var N=new Uint8Array(16);N.set(y,N.length-y.length);var T=new Uint8Array(32);e.stream(this._key,N,T,4);var j=new Uint8Array(this.tagLength);if(this._authenticate(j,T,m.subarray(0,m.length-this.tagLength),I),!c.equal(j,m.subarray(m.length-this.tagLength,m.length)))return null;var q=m.length-this.tagLength,X;if(M){if(M.length!==q)throw new Error("ChaCha20Poly1305: incorrect destination length");X=M}else X=new Uint8Array(q);return e.streamXOR(this._key,N,m.subarray(0,m.length-this.tagLength),X,4),i.wipe(N),X},d.prototype.clean=function(){return i.wipe(this._key),this},d.prototype._authenticate=function(y,m,I,M){var N=new r.Poly1305(m);M&&(N.update(M),M.length%16>0&&N.update(h.subarray(M.length%16))),N.update(I),I.length%16>0&&N.update(h.subarray(I.length%16));var T=new Uint8Array(8);M&&n.writeUint64LE(M.length,T),N.update(T),n.writeUint64LE(I.length,T),N.update(T);for(var j=N.digest(),q=0;q<j.length;q++)y[q]=j[q];N.clean(),i.wipe(j),i.wipe(T)},d}();t.ChaCha20Poly1305=a})(vn);var ba={},Zr={},Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});function Kh(t){return typeof t.saveState<"u"&&typeof t.restoreState<"u"&&typeof t.cleanSavedState<"u"}Dn.isSerializableHash=Kh;Object.defineProperty(Zr,"__esModule",{value:!0});var Ut=Dn,qh=rr,Vh=St,ma=function(){function t(e,r){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(i).clean():i.set(r);for(var n=0;n<i.length;n++)i[n]^=54;this._inner.update(i);for(var n=0;n<i.length;n++)i[n]^=106;this._outer.update(i),Ut.isSerializableHash(this._inner)&&Ut.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Vh.wipe(i)}return t.prototype.reset=function(){if(!Ut.isSerializableHash(this._inner)||!Ut.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){Ut.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),Ut.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(e){return this._inner.update(e),this},t.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},t.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},t.prototype.saveState=function(){if(!Ut.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(e){if(!Ut.isSerializableHash(this._inner)||!Ut.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(e){if(!Ut.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},t}();Zr.HMAC=ma;function Hh(t,e,r){var i=new ma(t,e);i.update(r);var n=i.digest();return i.clean(),n}Zr.hmac=Hh;Zr.equal=qh.equal;Object.defineProperty(ba,"__esModule",{value:!0});var Cs=Zr,Ts=St,kh=function(){function t(e,r,i,n){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=n;var c=Cs.hmac(this._hash,i,r);this._hmac=new Cs.HMAC(e,c),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(e){for(var r=new Uint8Array(e),i=0;i<r.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[i]=this._buffer[this._bufpos++];return r},t.prototype.clean=function(){this._hmac.clean(),Ts.wipe(this._buffer),Ts.wipe(this._counter),this._bufpos=0},t}(),Wh=ba.HKDF=kh,Ti={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=ge,r=St;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var i=function(){function a(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return a.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},a.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},a.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},a.prototype.update=function(d,y){if(y===void 0&&(y=d.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var m=0;if(this._bytesHashed+=y,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&y>0;)this._buffer[this._bufferLength++]=d[m++],y--;this._bufferLength===this.blockSize&&(c(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(y>=this.blockSize&&(m=c(this._temp,this._state,d,m,y),y%=this.blockSize);y>0;)this._buffer[this._bufferLength++]=d[m++],y--;return this},a.prototype.finish=function(d){if(!this._finished){var y=this._bytesHashed,m=this._bufferLength,I=y/536870912|0,M=y<<3,N=y%64<56?64:128;this._buffer[m]=128;for(var T=m+1;T<N-8;T++)this._buffer[T]=0;e.writeUint32BE(I,this._buffer,N-8),e.writeUint32BE(M,this._buffer,N-4),c(this._temp,this._state,this._buffer,0,N),this._finished=!0}for(var T=0;T<this.digestLength/4;T++)e.writeUint32BE(this._state[T],d,T*4);return this},a.prototype.digest=function(){var d=new Uint8Array(this.digestLength);return this.finish(d),d},a.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},a.prototype.restoreState=function(d){return this._state.set(d.state),this._bufferLength=d.bufferLength,d.buffer&&this._buffer.set(d.buffer),this._bytesHashed=d.bytesHashed,this._finished=!1,this},a.prototype.cleanSavedState=function(d){r.wipe(d.state),d.buffer&&r.wipe(d.buffer),d.bufferLength=0,d.bytesHashed=0},a}();t.SHA256=i;var n=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function c(a,d,y,m,I){for(;I>=64;){for(var M=d[0],N=d[1],T=d[2],j=d[3],q=d[4],X=d[5],C=d[6],R=d[7],v=0;v<16;v++){var x=m+v*4;a[v]=e.readUint32BE(y,x)}for(var v=16;v<64;v++){var w=a[v-2],o=(w>>>17|w<<32-17)^(w>>>19|w<<32-19)^w>>>10;w=a[v-15];var p=(w>>>7|w<<32-7)^(w>>>18|w<<32-18)^w>>>3;a[v]=(o+a[v-7]|0)+(p+a[v-16]|0)}for(var v=0;v<64;v++){var o=(((q>>>6|q<<26)^(q>>>11|q<<21)^(q>>>25|q<<7))+(q&X^~q&C)|0)+(R+(n[v]+a[v]|0)|0)|0,p=((M>>>2|M<<32-2)^(M>>>13|M<<32-13)^(M>>>22|M<<32-22))+(M&N^M&T^N&T)|0;R=C,C=X,X=q,q=j+o|0,j=T,T=N,N=M,M=o+p|0}d[0]+=M,d[1]+=N,d[2]+=T,d[3]+=j,d[4]+=q,d[5]+=X,d[6]+=C,d[7]+=R,m+=64,I-=64}return m}function h(a){var d=new i;d.update(a);var y=d.digest();return d.clean(),y}t.hash=h})(Ti);var Sn={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=Ir,r=St;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function i(v){const x=new Float64Array(16);if(v)for(let w=0;w<v.length;w++)x[w]=v[w];return x}const n=new Uint8Array(32);n[0]=9;const c=i([56129,1]);function h(v){let x=1;for(let w=0;w<16;w++){let o=v[w]+x+65535;x=Math.floor(o/65536),v[w]=o-x*65536}v[0]+=x-1+37*(x-1)}function a(v,x,w){const o=~(w-1);for(let p=0;p<16;p++){const z=o&(v[p]^x[p]);v[p]^=z,x[p]^=z}}function d(v,x){const w=i(),o=i();for(let p=0;p<16;p++)o[p]=x[p];h(o),h(o),h(o);for(let p=0;p<2;p++){w[0]=o[0]-65517;for(let b=1;b<15;b++)w[b]=o[b]-65535-(w[b-1]>>16&1),w[b-1]&=65535;w[15]=o[15]-32767-(w[14]>>16&1);const z=w[15]>>16&1;w[14]&=65535,a(o,w,1-z)}for(let p=0;p<16;p++)v[2*p]=o[p]&255,v[2*p+1]=o[p]>>8}function y(v,x){for(let w=0;w<16;w++)v[w]=x[2*w]+(x[2*w+1]<<8);v[15]&=32767}function m(v,x,w){for(let o=0;o<16;o++)v[o]=x[o]+w[o]}function I(v,x,w){for(let o=0;o<16;o++)v[o]=x[o]-w[o]}function M(v,x,w){let o,p,z=0,b=0,S=0,F=0,H=0,E=0,D=0,G=0,Y=0,W=0,V=0,k=0,J=0,te=0,Q=0,ae=0,ne=0,le=0,$=0,B=0,P=0,l=0,O=0,ee=0,re=0,de=0,Se=0,_e=0,xe=0,Pe=0,Ne=0,Ee=w[0],be=w[1],fe=w[2],ye=w[3],me=w[4],he=w[5],pe=w[6],f=w[7],s=w[8],u=w[9],g=w[10],A=w[11],L=w[12],K=w[13],se=w[14],ce=w[15];o=x[0],z+=o*Ee,b+=o*be,S+=o*fe,F+=o*ye,H+=o*me,E+=o*he,D+=o*pe,G+=o*f,Y+=o*s,W+=o*u,V+=o*g,k+=o*A,J+=o*L,te+=o*K,Q+=o*se,ae+=o*ce,o=x[1],b+=o*Ee,S+=o*be,F+=o*fe,H+=o*ye,E+=o*me,D+=o*he,G+=o*pe,Y+=o*f,W+=o*s,V+=o*u,k+=o*g,J+=o*A,te+=o*L,Q+=o*K,ae+=o*se,ne+=o*ce,o=x[2],S+=o*Ee,F+=o*be,H+=o*fe,E+=o*ye,D+=o*me,G+=o*he,Y+=o*pe,W+=o*f,V+=o*s,k+=o*u,J+=o*g,te+=o*A,Q+=o*L,ae+=o*K,ne+=o*se,le+=o*ce,o=x[3],F+=o*Ee,H+=o*be,E+=o*fe,D+=o*ye,G+=o*me,Y+=o*he,W+=o*pe,V+=o*f,k+=o*s,J+=o*u,te+=o*g,Q+=o*A,ae+=o*L,ne+=o*K,le+=o*se,$+=o*ce,o=x[4],H+=o*Ee,E+=o*be,D+=o*fe,G+=o*ye,Y+=o*me,W+=o*he,V+=o*pe,k+=o*f,J+=o*s,te+=o*u,Q+=o*g,ae+=o*A,ne+=o*L,le+=o*K,$+=o*se,B+=o*ce,o=x[5],E+=o*Ee,D+=o*be,G+=o*fe,Y+=o*ye,W+=o*me,V+=o*he,k+=o*pe,J+=o*f,te+=o*s,Q+=o*u,ae+=o*g,ne+=o*A,le+=o*L,$+=o*K,B+=o*se,P+=o*ce,o=x[6],D+=o*Ee,G+=o*be,Y+=o*fe,W+=o*ye,V+=o*me,k+=o*he,J+=o*pe,te+=o*f,Q+=o*s,ae+=o*u,ne+=o*g,le+=o*A,$+=o*L,B+=o*K,P+=o*se,l+=o*ce,o=x[7],G+=o*Ee,Y+=o*be,W+=o*fe,V+=o*ye,k+=o*me,J+=o*he,te+=o*pe,Q+=o*f,ae+=o*s,ne+=o*u,le+=o*g,$+=o*A,B+=o*L,P+=o*K,l+=o*se,O+=o*ce,o=x[8],Y+=o*Ee,W+=o*be,V+=o*fe,k+=o*ye,J+=o*me,te+=o*he,Q+=o*pe,ae+=o*f,ne+=o*s,le+=o*u,$+=o*g,B+=o*A,P+=o*L,l+=o*K,O+=o*se,ee+=o*ce,o=x[9],W+=o*Ee,V+=o*be,k+=o*fe,J+=o*ye,te+=o*me,Q+=o*he,ae+=o*pe,ne+=o*f,le+=o*s,$+=o*u,B+=o*g,P+=o*A,l+=o*L,O+=o*K,ee+=o*se,re+=o*ce,o=x[10],V+=o*Ee,k+=o*be,J+=o*fe,te+=o*ye,Q+=o*me,ae+=o*he,ne+=o*pe,le+=o*f,$+=o*s,B+=o*u,P+=o*g,l+=o*A,O+=o*L,ee+=o*K,re+=o*se,de+=o*ce,o=x[11],k+=o*Ee,J+=o*be,te+=o*fe,Q+=o*ye,ae+=o*me,ne+=o*he,le+=o*pe,$+=o*f,B+=o*s,P+=o*u,l+=o*g,O+=o*A,ee+=o*L,re+=o*K,de+=o*se,Se+=o*ce,o=x[12],J+=o*Ee,te+=o*be,Q+=o*fe,ae+=o*ye,ne+=o*me,le+=o*he,$+=o*pe,B+=o*f,P+=o*s,l+=o*u,O+=o*g,ee+=o*A,re+=o*L,de+=o*K,Se+=o*se,_e+=o*ce,o=x[13],te+=o*Ee,Q+=o*be,ae+=o*fe,ne+=o*ye,le+=o*me,$+=o*he,B+=o*pe,P+=o*f,l+=o*s,O+=o*u,ee+=o*g,re+=o*A,de+=o*L,Se+=o*K,_e+=o*se,xe+=o*ce,o=x[14],Q+=o*Ee,ae+=o*be,ne+=o*fe,le+=o*ye,$+=o*me,B+=o*he,P+=o*pe,l+=o*f,O+=o*s,ee+=o*u,re+=o*g,de+=o*A,Se+=o*L,_e+=o*K,xe+=o*se,Pe+=o*ce,o=x[15],ae+=o*Ee,ne+=o*be,le+=o*fe,$+=o*ye,B+=o*me,P+=o*he,l+=o*pe,O+=o*f,ee+=o*s,re+=o*u,de+=o*g,Se+=o*A,_e+=o*L,xe+=o*K,Pe+=o*se,Ne+=o*ce,z+=38*ne,b+=38*le,S+=38*$,F+=38*B,H+=38*P,E+=38*l,D+=38*O,G+=38*ee,Y+=38*re,W+=38*de,V+=38*Se,k+=38*_e,J+=38*xe,te+=38*Pe,Q+=38*Ne,p=1,o=z+p+65535,p=Math.floor(o/65536),z=o-p*65536,o=b+p+65535,p=Math.floor(o/65536),b=o-p*65536,o=S+p+65535,p=Math.floor(o/65536),S=o-p*65536,o=F+p+65535,p=Math.floor(o/65536),F=o-p*65536,o=H+p+65535,p=Math.floor(o/65536),H=o-p*65536,o=E+p+65535,p=Math.floor(o/65536),E=o-p*65536,o=D+p+65535,p=Math.floor(o/65536),D=o-p*65536,o=G+p+65535,p=Math.floor(o/65536),G=o-p*65536,o=Y+p+65535,p=Math.floor(o/65536),Y=o-p*65536,o=W+p+65535,p=Math.floor(o/65536),W=o-p*65536,o=V+p+65535,p=Math.floor(o/65536),V=o-p*65536,o=k+p+65535,p=Math.floor(o/65536),k=o-p*65536,o=J+p+65535,p=Math.floor(o/65536),J=o-p*65536,o=te+p+65535,p=Math.floor(o/65536),te=o-p*65536,o=Q+p+65535,p=Math.floor(o/65536),Q=o-p*65536,o=ae+p+65535,p=Math.floor(o/65536),ae=o-p*65536,z+=p-1+37*(p-1),p=1,o=z+p+65535,p=Math.floor(o/65536),z=o-p*65536,o=b+p+65535,p=Math.floor(o/65536),b=o-p*65536,o=S+p+65535,p=Math.floor(o/65536),S=o-p*65536,o=F+p+65535,p=Math.floor(o/65536),F=o-p*65536,o=H+p+65535,p=Math.floor(o/65536),H=o-p*65536,o=E+p+65535,p=Math.floor(o/65536),E=o-p*65536,o=D+p+65535,p=Math.floor(o/65536),D=o-p*65536,o=G+p+65535,p=Math.floor(o/65536),G=o-p*65536,o=Y+p+65535,p=Math.floor(o/65536),Y=o-p*65536,o=W+p+65535,p=Math.floor(o/65536),W=o-p*65536,o=V+p+65535,p=Math.floor(o/65536),V=o-p*65536,o=k+p+65535,p=Math.floor(o/65536),k=o-p*65536,o=J+p+65535,p=Math.floor(o/65536),J=o-p*65536,o=te+p+65535,p=Math.floor(o/65536),te=o-p*65536,o=Q+p+65535,p=Math.floor(o/65536),Q=o-p*65536,o=ae+p+65535,p=Math.floor(o/65536),ae=o-p*65536,z+=p-1+37*(p-1),v[0]=z,v[1]=b,v[2]=S,v[3]=F,v[4]=H,v[5]=E,v[6]=D,v[7]=G,v[8]=Y,v[9]=W,v[10]=V,v[11]=k,v[12]=J,v[13]=te,v[14]=Q,v[15]=ae}function N(v,x){M(v,x,x)}function T(v,x){const w=i();for(let o=0;o<16;o++)w[o]=x[o];for(let o=253;o>=0;o--)N(w,w),o!==2&&o!==4&&M(w,w,x);for(let o=0;o<16;o++)v[o]=w[o]}function j(v,x){const w=new Uint8Array(32),o=new Float64Array(80),p=i(),z=i(),b=i(),S=i(),F=i(),H=i();for(let Y=0;Y<31;Y++)w[Y]=v[Y];w[31]=v[31]&127|64,w[0]&=248,y(o,x);for(let Y=0;Y<16;Y++)z[Y]=o[Y];p[0]=S[0]=1;for(let Y=254;Y>=0;--Y){const W=w[Y>>>3]>>>(Y&7)&1;a(p,z,W),a(b,S,W),m(F,p,b),I(p,p,b),m(b,z,S),I(z,z,S),N(S,F),N(H,p),M(p,b,p),M(b,z,F),m(F,p,b),I(p,p,b),N(z,p),I(b,S,H),M(p,b,c),m(p,p,S),M(b,b,p),M(p,S,H),M(S,z,o),N(z,F),a(p,z,W),a(b,S,W)}for(let Y=0;Y<16;Y++)o[Y+16]=p[Y],o[Y+32]=b[Y],o[Y+48]=z[Y],o[Y+64]=S[Y];const E=o.subarray(32),D=o.subarray(16);T(E,E),M(D,D,E);const G=new Uint8Array(32);return d(G,D),G}t.scalarMult=j;function q(v){return j(v,n)}t.scalarMultBase=q;function X(v){if(v.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const x=new Uint8Array(v);return{publicKey:q(x),secretKey:x}}t.generateKeyPairFromSeed=X;function C(v){const x=(0,e.randomBytes)(32,v),w=X(x);return(0,r.wipe)(x),w}t.generateKeyPair=C;function R(v,x,w=!1){if(v.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(x.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const o=j(v,x);if(w){let p=0;for(let z=0;z<o.length;z++)p|=o[z];if(p===0)throw new Error("X25519: invalid shared key")}return o}t.sharedKey=R})(Sn);var Ns=globalThis&&globalThis.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var i=0,n=e.length,c;i<n;i++)(c||!(i in e))&&(c||(c=Array.prototype.slice.call(e,0,i)),c[i]=e[i]);return t.concat(c||Array.prototype.slice.call(e))},Gh=function(){function t(e,r,i){this.name=e,this.version=r,this.os=i,this.type="browser"}return t}(),Yh=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Jh=function(){function t(e,r,i,n){this.name=e,this.version=r,this.os=i,this.bot=n,this.type="bot-device"}return t}(),Xh=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Zh=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Qh=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,ef=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Rs=3,tf=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Qh]],Ps=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function rf(t){return t?Fs(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Zh:typeof navigator<"u"?Fs(navigator.userAgent):of()}function nf(t){return t!==""&&tf.reduce(function(e,r){var i=r[0],n=r[1];if(e)return e;var c=n.exec(t);return!!c&&[i,c]},!1)}function Fs(t){var e=nf(t);if(!e)return null;var r=e[0],i=e[1];if(r==="searchbot")return new Xh;var n=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);n?n.length<Rs&&(n=Ns(Ns([],n,!0),af(Rs-n.length),!0)):n=[];var c=n.join("."),h=sf(t),a=ef.exec(t);return a&&a[1]?new Jh(r,c,h,a[1]):new Gh(r,c,h)}function sf(t){for(var e=0,r=Ps.length;e<r;e++){var i=Ps[e],n=i[0],c=i[1],h=c.exec(t);if(h)return n}return null}function of(){var t=typeof process<"u"&&process.version;return t?new Yh(process.version.slice(1)):null}function af(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.getLocalStorage=Ce.getLocalStorageOrThrow=Ce.getCrypto=Ce.getCryptoOrThrow=Ea=Ce.getLocation=Ce.getLocationOrThrow=xn=Ce.getNavigator=Ce.getNavigatorOrThrow=_a=Ce.getDocument=Ce.getDocumentOrThrow=Ce.getFromWindowOrThrow=Ce.getFromWindow=void 0;function wr(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Ce.getFromWindow=wr;function Or(t){const e=wr(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Ce.getFromWindowOrThrow=Or;function cf(){return Or("document")}Ce.getDocumentOrThrow=cf;function uf(){return wr("document")}var _a=Ce.getDocument=uf;function lf(){return Or("navigator")}Ce.getNavigatorOrThrow=lf;function hf(){return wr("navigator")}var xn=Ce.getNavigator=hf;function ff(){return Or("location")}Ce.getLocationOrThrow=ff;function df(){return wr("location")}var Ea=Ce.getLocation=df;function pf(){return Or("crypto")}Ce.getCryptoOrThrow=pf;function gf(){return wr("crypto")}Ce.getCrypto=gf;function yf(){return Or("localStorage")}Ce.getLocalStorageOrThrow=yf;function wf(){return wr("localStorage")}Ce.getLocalStorage=wf;var In={};Object.defineProperty(In,"__esModule",{value:!0});var va=In.getWindowMetadata=void 0;const Us=Ce;function bf(){let t,e;try{t=Us.getDocumentOrThrow(),e=Us.getLocationOrThrow()}catch{return null}function r(){const I=t.getElementsByTagName("link"),M=[];for(let N=0;N<I.length;N++){const T=I[N],j=T.getAttribute("rel");if(j&&j.toLowerCase().indexOf("icon")>-1){const q=T.getAttribute("href");if(q)if(q.toLowerCase().indexOf("https:")===-1&&q.toLowerCase().indexOf("http:")===-1&&q.indexOf("//")!==0){let X=e.protocol+"//"+e.host;if(q.indexOf("/")===0)X+=q;else{const C=e.pathname.split("/");C.pop();const R=C.join("/");X+=R+"/"+q}M.push(X)}else if(q.indexOf("//")===0){const X=e.protocol+q;M.push(X)}else M.push(q)}}return M}function i(...I){const M=t.getElementsByTagName("meta");for(let N=0;N<M.length;N++){const T=M[N],j=["itemprop","property","name"].map(q=>T.getAttribute(q)).filter(q=>q?I.includes(q):!1);if(j.length&&j){const q=T.getAttribute("content");if(q)return q}}return""}function n(){let I=i("name","og:site_name","og:title","twitter:title");return I||(I=t.title),I}function c(){return i("description","og:description","twitter:description","keywords")}const h=n(),a=c(),d=e.origin,y=r();return{description:a,url:d,icons:y,name:h}}va=In.getWindowMetadata=bf;var Gr={},mf=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Da="%[a-f0-9]{2}",Ls=new RegExp("("+Da+")|([^%]+?)","gi"),Ms=new RegExp("("+Da+")+","gi");function un(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var r=t.slice(0,e),i=t.slice(e);return Array.prototype.concat.call([],un(r),un(i))}function _f(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(Ls)||[],r=1;r<e.length;r++)t=un(e,r).join(""),e=t.match(Ls)||[];return t}}function Ef(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},r=Ms.exec(t);r;){try{e[r[0]]=decodeURIComponent(r[0])}catch{var i=_f(r[0]);i!==r[0]&&(e[r[0]]=i)}r=Ms.exec(t)}e["%C2"]="�";for(var n=Object.keys(e),c=0;c<n.length;c++){var h=n[c];t=t.replace(new RegExp(h,"g"),e[h])}return t}var vf=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return Ef(t)}},Df=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const r=t.indexOf(e);return r===-1?[t]:[t.slice(0,r),t.slice(r+e.length)]},Sf=function(t,e){for(var r={},i=Object.keys(t),n=Array.isArray(e),c=0;c<i.length;c++){var h=i[c],a=t[h];(n?e.indexOf(h)!==-1:e(h,a,t))&&(r[h]=a)}return r};(function(t){const e=mf,r=vf,i=Df,n=Sf,c=C=>C==null,h=Symbol("encodeFragmentIdentifier");function a(C){switch(C.arrayFormat){case"index":return R=>(v,x)=>{const w=v.length;return x===void 0||C.skipNull&&x===null||C.skipEmptyString&&x===""?v:x===null?[...v,[m(R,C),"[",w,"]"].join("")]:[...v,[m(R,C),"[",m(w,C),"]=",m(x,C)].join("")]};case"bracket":return R=>(v,x)=>x===void 0||C.skipNull&&x===null||C.skipEmptyString&&x===""?v:x===null?[...v,[m(R,C),"[]"].join("")]:[...v,[m(R,C),"[]=",m(x,C)].join("")];case"colon-list-separator":return R=>(v,x)=>x===void 0||C.skipNull&&x===null||C.skipEmptyString&&x===""?v:x===null?[...v,[m(R,C),":list="].join("")]:[...v,[m(R,C),":list=",m(x,C)].join("")];case"comma":case"separator":case"bracket-separator":{const R=C.arrayFormat==="bracket-separator"?"[]=":"=";return v=>(x,w)=>w===void 0||C.skipNull&&w===null||C.skipEmptyString&&w===""?x:(w=w===null?"":w,x.length===0?[[m(v,C),R,m(w,C)].join("")]:[[x,m(w,C)].join(C.arrayFormatSeparator)])}default:return R=>(v,x)=>x===void 0||C.skipNull&&x===null||C.skipEmptyString&&x===""?v:x===null?[...v,m(R,C)]:[...v,[m(R,C),"=",m(x,C)].join("")]}}function d(C){let R;switch(C.arrayFormat){case"index":return(v,x,w)=>{if(R=/\[(\d*)\]$/.exec(v),v=v.replace(/\[\d*\]$/,""),!R){w[v]=x;return}w[v]===void 0&&(w[v]={}),w[v][R[1]]=x};case"bracket":return(v,x,w)=>{if(R=/(\[\])$/.exec(v),v=v.replace(/\[\]$/,""),!R){w[v]=x;return}if(w[v]===void 0){w[v]=[x];return}w[v]=[].concat(w[v],x)};case"colon-list-separator":return(v,x,w)=>{if(R=/(:list)$/.exec(v),v=v.replace(/:list$/,""),!R){w[v]=x;return}if(w[v]===void 0){w[v]=[x];return}w[v]=[].concat(w[v],x)};case"comma":case"separator":return(v,x,w)=>{const o=typeof x=="string"&&x.includes(C.arrayFormatSeparator),p=typeof x=="string"&&!o&&I(x,C).includes(C.arrayFormatSeparator);x=p?I(x,C):x;const z=o||p?x.split(C.arrayFormatSeparator).map(b=>I(b,C)):x===null?x:I(x,C);w[v]=z};case"bracket-separator":return(v,x,w)=>{const o=/(\[\])$/.test(v);if(v=v.replace(/\[\]$/,""),!o){w[v]=x&&I(x,C);return}const p=x===null?[]:x.split(C.arrayFormatSeparator).map(z=>I(z,C));if(w[v]===void 0){w[v]=p;return}w[v]=[].concat(w[v],p)};default:return(v,x,w)=>{if(w[v]===void 0){w[v]=x;return}w[v]=[].concat(w[v],x)}}}function y(C){if(typeof C!="string"||C.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function m(C,R){return R.encode?R.strict?e(C):encodeURIComponent(C):C}function I(C,R){return R.decode?r(C):C}function M(C){return Array.isArray(C)?C.sort():typeof C=="object"?M(Object.keys(C)).sort((R,v)=>Number(R)-Number(v)).map(R=>C[R]):C}function N(C){const R=C.indexOf("#");return R!==-1&&(C=C.slice(0,R)),C}function T(C){let R="";const v=C.indexOf("#");return v!==-1&&(R=C.slice(v)),R}function j(C){C=N(C);const R=C.indexOf("?");return R===-1?"":C.slice(R+1)}function q(C,R){return R.parseNumbers&&!Number.isNaN(Number(C))&&typeof C=="string"&&C.trim()!==""?C=Number(C):R.parseBooleans&&C!==null&&(C.toLowerCase()==="true"||C.toLowerCase()==="false")&&(C=C.toLowerCase()==="true"),C}function X(C,R){R=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},R),y(R.arrayFormatSeparator);const v=d(R),x=Object.create(null);if(typeof C!="string"||(C=C.trim().replace(/^[?#&]/,""),!C))return x;for(const w of C.split("&")){if(w==="")continue;let[o,p]=i(R.decode?w.replace(/\+/g," "):w,"=");p=p===void 0?null:["comma","separator","bracket-separator"].includes(R.arrayFormat)?p:I(p,R),v(I(o,R),p,x)}for(const w of Object.keys(x)){const o=x[w];if(typeof o=="object"&&o!==null)for(const p of Object.keys(o))o[p]=q(o[p],R);else x[w]=q(o,R)}return R.sort===!1?x:(R.sort===!0?Object.keys(x).sort():Object.keys(x).sort(R.sort)).reduce((w,o)=>{const p=x[o];return p&&typeof p=="object"&&!Array.isArray(p)?w[o]=M(p):w[o]=p,w},Object.create(null))}t.extract=j,t.parse=X,t.stringify=(C,R)=>{if(!C)return"";R=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},R),y(R.arrayFormatSeparator);const v=p=>R.skipNull&&c(C[p])||R.skipEmptyString&&C[p]==="",x=a(R),w={};for(const p of Object.keys(C))v(p)||(w[p]=C[p]);const o=Object.keys(w);return R.sort!==!1&&o.sort(R.sort),o.map(p=>{const z=C[p];return z===void 0?"":z===null?m(p,R):Array.isArray(z)?z.length===0&&R.arrayFormat==="bracket-separator"?m(p,R)+"[]":z.reduce(x(p),[]).join("&"):m(p,R)+"="+m(z,R)}).filter(p=>p.length>0).join("&")},t.parseUrl=(C,R)=>{R=Object.assign({decode:!0},R);const[v,x]=i(C,"#");return Object.assign({url:v.split("?")[0]||"",query:X(j(C),R)},R&&R.parseFragmentIdentifier&&x?{fragmentIdentifier:I(x,R)}:{})},t.stringifyUrl=(C,R)=>{R=Object.assign({encode:!0,strict:!0,[h]:!0},R);const v=N(C.url).split("?")[0]||"",x=t.extract(C.url),w=t.parse(x,{sort:!1}),o=Object.assign(w,C.query);let p=t.stringify(o,R);p&&(p=`?${p}`);let z=T(C.url);return C.fragmentIdentifier&&(z=`#${R[h]?m(C.fragmentIdentifier,R):C.fragmentIdentifier}`),`${v}${p}${z}`},t.pick=(C,R,v)=>{v=Object.assign({parseFragmentIdentifier:!0,[h]:!1},v);const{url:x,query:w,fragmentIdentifier:o}=t.parseUrl(C,v);return t.stringifyUrl({url:x,query:n(w,R),fragmentIdentifier:o},v)},t.exclude=(C,R,v)=>{const x=Array.isArray(R)?w=>!R.includes(w):(w,o)=>!R(w,o);return t.pick(C,x,v)}})(Gr);const xf={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};function Sa(t,e){return t.includes(":")?[t]:e.chains||[]}const xa="base10",bt="base16",ln="base64pad",On="utf8",Ia=0,br=1,If=0,Bs=1,hn=12,An=32;function Of(){const t=Sn.generateKeyPair();return{privateKey:mt(t.secretKey,bt),publicKey:mt(t.publicKey,bt)}}function fn(){const t=Ir.randomBytes(An);return mt(t,bt)}function Af(t,e){const r=Sn.sharedKey(Et(t,bt),Et(e,bt)),i=new Wh(Ti.SHA256,r).expand(An);return mt(i,bt)}function Cf(t){const e=Ti.hash(Et(t,bt));return mt(e,bt)}function gr(t){const e=Ti.hash(Et(t,On));return mt(e,bt)}function Tf(t){return Et(`${t}`,xa)}function Qr(t){return Number(mt(t,xa))}function Nf(t){const e=Tf(typeof t.type<"u"?t.type:Ia);if(Qr(e)===br&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Et(t.senderPublicKey,bt):void 0,i=typeof t.iv<"u"?Et(t.iv,bt):Ir.randomBytes(hn),n=new vn.ChaCha20Poly1305(Et(t.symKey,bt)).seal(i,Et(t.message,On));return Pf({type:e,sealed:n,iv:i,senderPublicKey:r})}function Rf(t){const e=new vn.ChaCha20Poly1305(Et(t.symKey,bt)),{sealed:r,iv:i}=mi(t.encoded),n=e.open(i,r);if(n===null)throw new Error("Failed to decrypt");return mt(n,On)}function Pf(t){if(Qr(t.type)===br){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return mt(an([t.type,t.senderPublicKey,t.iv,t.sealed]),ln)}return mt(an([t.type,t.iv,t.sealed]),ln)}function mi(t){const e=Et(t,ln),r=e.slice(If,Bs),i=Bs;if(Qr(r)===br){const a=i+An,d=a+hn,y=e.slice(i,a),m=e.slice(a,d),I=e.slice(d);return{type:r,sealed:I,iv:m,senderPublicKey:y}}const n=i+hn,c=e.slice(i,n),h=e.slice(n);return{type:r,sealed:h,iv:c}}function Ff(t,e){const r=mi(t);return Oa({type:Qr(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?mt(r.senderPublicKey,bt):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function Oa(t){const e=(t==null?void 0:t.type)||Ia;if(e===br){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function $s(t){return t.type===br&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}var Uf=Object.defineProperty,js=Object.getOwnPropertySymbols,Lf=Object.prototype.hasOwnProperty,Mf=Object.prototype.propertyIsEnumerable,zs=(t,e,r)=>e in t?Uf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ks=(t,e)=>{for(var r in e||(e={}))Lf.call(e,r)&&zs(t,r,e[r]);if(js)for(var r of js(e))Mf.call(e,r)&&zs(t,r,e[r]);return t};const Bf="ReactNative",Hr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},$f="js";function Cn(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Aa(){return!_a()&&!!xn()&&navigator.product===Bf}function Tn(){return!Cn()&&!!xn()}function jf(){return Aa()?Hr.reactNative:Cn()?Hr.node:Tn()?Hr.browser:Hr.unknown}function zf(t,e){let r=Gr.parse(t);return r=Ks(Ks({},r),e),t=Gr.stringify(r),t}function Kf(){return va()||{name:"",description:"",url:"",icons:[""]}}function qf(){const t=rf();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Vf(){var t;const e=jf();return e===Hr.browser?[e,((t=Ea())==null?void 0:t.host)||"unknown"].join(":"):e}function Hf(t,e,r){const i=qf(),n=Vf();return[[t,e].join("-"),[$f,r].join("-"),i,n].join("/")}function kf({protocol:t,version:e,relayUrl:r,sdkVersion:i,auth:n,projectId:c,useOnCloseEvent:h}){const a=r.split("?"),d=Hf(t,e,i),y={auth:n,ua:d,projectId:c,useOnCloseEvent:h||void 0},m=zf(a[1]||"",y);return a[0]+"?"+m}function pr(t,e){return t.filter(r=>e.includes(r)).length===t.length}function Ca(t){return Object.fromEntries(t.entries())}function Ta(t){return new Map(Object.entries(t))}function Sr(t=ue.FIVE_MINUTES,e){const r=ue.toMiliseconds(t||ue.FIVE_MINUTES);let i,n,c;return{resolve:h=>{c&&i&&(clearTimeout(c),i(h))},reject:h=>{c&&n&&(clearTimeout(c),n(h))},done:()=>new Promise((h,a)=>{c=setTimeout(()=>{a(new Error(e))},r),i=h,n=a})}}function _i(t,e,r){return new Promise(async(i,n)=>{const c=setTimeout(()=>n(new Error(r)),e);try{const h=await t;i(h)}catch(h){n(h)}clearTimeout(c)})}function Na(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Wf(t){return Na("topic",t)}function Gf(t){return Na("id",t)}function Ra(t){const[e,r]=t.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")i.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))i.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return i}function Bt(t,e){return ue.fromMiliseconds((e||Date.now())+ue.toMiliseconds(t))}function Zt(t){return Date.now()>=ue.toMiliseconds(t)}function He(t,e){return`${t}${e?`:${e}`:""}`}const Yf="irn";function dn(t){return(t==null?void 0:t.relay)||{protocol:Yf}}function pi(t){const e=xf[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var Jf=Object.defineProperty,qs=Object.getOwnPropertySymbols,Xf=Object.prototype.hasOwnProperty,Zf=Object.prototype.propertyIsEnumerable,Vs=(t,e,r)=>e in t?Jf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qf=(t,e)=>{for(var r in e||(e={}))Xf.call(e,r)&&Vs(t,r,e[r]);if(qs)for(var r of qs(e))Zf.call(e,r)&&Vs(t,r,e[r]);return t};function ed(t,e="-"){const r={},i="relay"+e;return Object.keys(t).forEach(n=>{if(n.startsWith(i)){const c=n.replace(i,""),h=t[n];r[c]=h}}),r}function td(t){const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,i=t.substring(0,e),n=t.substring(e+1,r).split("@"),c=typeof r<"u"?t.substring(r):"",h=Gr.parse(c);return{protocol:i,topic:n[0],version:parseInt(n[1],10),symKey:h.symKey,relay:ed(h)}}function rd(t,e="-"){const r="relay",i={};return Object.keys(t).forEach(n=>{const c=r+e+n;t[n]&&(i[c]=t[n])}),i}function id(t){return`${t.protocol}:${t.topic}@${t.version}?`+Gr.stringify(Qf({symKey:t.symKey},rd(t.relay)))}function Ar(t){const e=[];return t.forEach(r=>{const[i,n]=r.split(":");e.push(`${i}:${n}`)}),e}function nd(t){const e=[];return Object.values(t).forEach(r=>{e.push(...Ar(r.accounts))}),e}function sd(t,e){const r=[];return Object.values(t).forEach(i=>{Ar(i.accounts).includes(e)&&r.push(...i.methods)}),r}function od(t,e){const r=[];return Object.values(t).forEach(i=>{Ar(i.accounts).includes(e)&&r.push(...i.events)}),r}function ad(t,e){const r=gi(t,e);if(r)throw new Error(r.message);const i={};for(const[n,c]of Object.entries(t))i[n]={methods:c.methods,events:c.events,chains:c.accounts.map(h=>`${h.split(":")[0]}:${h.split(":")[1]}`)};return i}const cd={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},ud={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ie(t,e){const{message:r,code:i}=ud[t];return{message:e?`${r} ${e}`:r,code:i}}function We(t,e){const{message:r,code:i}=cd[t];return{message:e?`${r} ${e}`:r,code:i}}function ei(t,e){return Array.isArray(t)?typeof e<"u"&&t.length?t.every(e):!0:!1}function kr(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function wt(t){return typeof t>"u"}function st(t,e){return e&&wt(t)?!0:typeof t=="string"&&!!t.trim().length}function Nn(t,e){return e&&wt(t)?!0:typeof t=="number"&&!isNaN(t)}function ld(t,e){const{requiredNamespaces:r}=e,i=Object.keys(t.namespaces),n=Object.keys(r);let c=!0;return pr(n,i)?(i.forEach(h=>{const{accounts:a,methods:d,events:y}=t.namespaces[h],m=Ar(a),I=r[h];(!pr(Sa(h,I),m)||!pr(I.methods,d)||!pr(I.events,y))&&(c=!1)}),c):!1}function Rn(t){return st(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function hd(t){if(st(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Rn(r)}}return!1}function fd(t){if(st(t,!1))try{return typeof new URL(t)<"u"}catch{return!1}return!1}function dd(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function pd(t){return t==null?void 0:t.topic}function gd(t,e){let r=null;return st(t==null?void 0:t.publicKey,!1)||(r=ie("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function Hs(t){let e=!0;return ei(t)?t.length&&(e=t.every(r=>st(r,!1))):e=!1,e}function yd(t,e,r){let i=null;return ei(e)?e.forEach(n=>{i||(!Rn(n)||!n.includes(t))&&(i=We("UNSUPPORTED_CHAINS",`${r}, chain ${n} should be a string and conform to "namespace:chainId" format`))}):i=We("UNSUPPORTED_CHAINS",`${r}, chains ${e} should be an array of strings conforming to "namespace:chainId" format`),i}function wd(t,e){let r=null;return Object.entries(t).forEach(([i,n])=>{if(r)return;const c=yd(i,Sa(i,n),`${e} requiredNamespace`);c&&(r=c)}),r}function bd(t,e){let r=null;return ei(t)?t.forEach(i=>{r||hd(i)||(r=We("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):r=We("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function md(t,e){let r=null;return Object.values(t).forEach(i=>{if(r)return;const n=bd(i==null?void 0:i.accounts,`${e} namespace`);n&&(r=n)}),r}function _d(t,e){let r=null;return Hs(t==null?void 0:t.methods)?Hs(t==null?void 0:t.events)||(r=We("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=We("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function Pa(t,e){let r=null;return Object.values(t).forEach(i=>{if(r)return;const n=_d(i,`${e}, namespace`);n&&(r=n)}),r}function Ed(t,e,r){let i=null;if(t&&kr(t)){const n=Pa(t,e);n&&(i=n);const c=wd(t,e);c&&(i=c)}else i=ie("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return i}function gi(t,e){let r=null;if(t&&kr(t)){const i=Pa(t,e);i&&(r=i);const n=md(t,e);n&&(r=n)}else r=ie("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function Fa(t){return st(t.protocol,!0)}function vd(t,e){let r=!1;return e&&!t?r=!0:t&&ei(t)&&t.length&&t.forEach(i=>{r=Fa(i)}),r}function Dd(t){return typeof t=="number"}function _t(t){return typeof t<"u"&&typeof t!==null}function Sd(t){return!(!t||typeof t!="object"||!t.code||!Nn(t.code,!1)||!t.message||!st(t.message,!1))}function xd(t){return!(wt(t)||!st(t.method,!1))}function Id(t){return!(wt(t)||wt(t.result)&&wt(t.error)||!Nn(t.id,!1)||!st(t.jsonrpc,!1))}function Od(t){return!(wt(t)||!st(t.name,!1))}function ks(t,e){return!(!Rn(e)||!nd(t).includes(e))}function Ad(t,e,r){return st(r,!1)?sd(t,e).includes(r):!1}function Cd(t,e,r){return st(r,!1)?od(t,e).includes(r):!1}function Ws(t,e,r){let i=null;const n=Td(t),c=Nd(e),h=Object.keys(n),a=Object.keys(c),d=Gs(Object.keys(t)),y=Gs(Object.keys(e)),m=d.filter(I=>!y.includes(I));return m.length&&(i=ie("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${m.toString()}
      Received: ${Object.keys(e).toString()}`)),pr(h,a)||(i=ie("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${h.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(I=>{if(!I.includes(":")||i)return;const M=Ar(e[I].accounts);M.includes(I)||(i=ie("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${I}
        Required: ${I}
        Approved: ${M.toString()}`))}),h.forEach(I=>{i||(pr(n[I].methods,c[I].methods)?pr(n[I].events,c[I].events)||(i=ie("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${I}`)):i=ie("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${I}`))}),i}function Td(t){const e={};return Object.keys(t).forEach(r=>{var i;r.includes(":")?e[r]=t[r]:(i=t[r].chains)==null||i.forEach(n=>{e[n]={methods:t[r].methods,events:t[r].events}})}),e}function Gs(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Nd(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const i=Ar(t[r].accounts);i==null||i.forEach(n=>{e[n]={accounts:t[r].accounts.filter(c=>c.includes(`${n}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function Rd(t,e){return Nn(t,!1)&&t<=e.max&&t>=e.min}const Pd="PARSE_ERROR",Fd="INVALID_REQUEST",Ud="METHOD_NOT_FOUND",Ld="INVALID_PARAMS",Ua="INTERNAL_ERROR",Pn="SERVER_ERROR",Md=[-32700,-32600,-32601,-32602,-32603],Wr={[Pd]:{code:-32700,message:"Parse error"},[Fd]:{code:-32600,message:"Invalid Request"},[Ud]:{code:-32601,message:"Method not found"},[Ld]:{code:-32602,message:"Invalid params"},[Ua]:{code:-32603,message:"Internal error"},[Pn]:{code:-32e3,message:"Server error"}},La=Pn;function Bd(t){return Md.includes(t)}function Ys(t){return Object.keys(Wr).includes(t)?Wr[t]:Wr[La]}function $d(t){const e=Object.values(Wr).find(r=>r.code===t);return e||Wr[La]}function jd(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var Ma={},qt={},Js;function zd(){if(Js)return qt;Js=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.isBrowserCryptoAvailable=qt.getSubtleCrypto=qt.getBrowerCrypto=void 0;function t(){return(yt===null||yt===void 0?void 0:yt.crypto)||(yt===null||yt===void 0?void 0:yt.msCrypto)||{}}qt.getBrowerCrypto=t;function e(){const i=t();return i.subtle||i.webkitSubtle}qt.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return qt.isBrowserCryptoAvailable=r,qt}var Vt={},Xs;function Kd(){if(Xs)return Vt;Xs=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.isBrowser=Vt.isNode=Vt.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}Vt.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Vt.isNode=e;function r(){return!t()&&!e()}return Vt.isBrowser=r,Vt}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Nt;e.__exportStar(zd(),t),e.__exportStar(Kd(),t)})(Ma);function Ba(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function qd(t=6){return BigInt(Ba(t))}function Ni(t,e,r){return{id:r||Ba(),jsonrpc:"2.0",method:t,params:e}}function Fn(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Un(t,e,r){return{id:t,jsonrpc:"2.0",error:Vd(e,r)}}function Vd(t,e){return typeof t>"u"?Ys(Ua):(typeof t=="string"&&(t=Object.assign(Object.assign({},Ys(Pn)),{message:t})),typeof e<"u"&&(t.data=e),Bd(t.code)&&(t=$d(t.code)),t)}class Hd{}class kd extends Hd{constructor(){super()}}class Wd extends kd{constructor(e){super()}}const Gd="^wss?:";function Yd(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Jd(t,e){const r=Yd(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function Zs(t){return Jd(t,Gd)}function Xd(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function $a(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Ln(t){return $a(t)&&"method"in t}function Mn(t){return $a(t)&&(Ht(t)||Pt(t))}function Ht(t){return"result"in t}function Pt(t){return"error"in t}let Zd=class extends Wd{constructor(e){super(e),this.events=new Ft.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(Ni(e.method,e.params||[],qd().toString()),r)}async requestStrict(e,r){return new Promise(async(i,n)=>{if(!this.connection.connected)try{await this.open()}catch(c){n(c)}this.events.on(`${e.id}`,c=>{Pt(c)?n(c.error):i(c.result)});try{await this.connection.send(e,r)}catch(c){n(c)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Mn(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Qs=10,Qd=()=>typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:require("ws"),ep=()=>typeof window<"u",tp=Qd();class rp{constructor(e){if(this.url=e,this.events=new Ft.EventEmitter,this.registering=!1,!Zs(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})}async send(e,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(mn(e))}catch(i){this.onError(e.id,i)}}register(e=this.url){if(!Zs(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((i,n)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),n(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return n(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,i)=>{const n=Ma.isReactNative()?void 0:{rejectUnauthorized:!Xd(e)},c=new tp(e,[],n);ep()?c.onerror=h=>{const a=h;i(this.emitError(a.error))}:c.on("error",h=>{i(this.emitError(h))}),c.onopen=()=>{this.onOpen(c),r(c)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Qo(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const i=this.parseError(r),n=i.message||i.toString(),c=Un(e,n);this.events.emit("payload",c)}parseError(e,r=this.url){return jd(e,r,"WS")}resetMaxListeners(){this.events.getMaxListeners()>Qs&&this.events.setMaxListeners(Qs)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for URL: ${this.url}`));return this.events.emit("register_error",r),r}}var Ei={exports:{}};Ei.exports;(function(t,e){var r=200,i="__lodash_hash_undefined__",n=1,c=2,h=9007199254740991,a="[object Arguments]",d="[object Array]",y="[object AsyncFunction]",m="[object Boolean]",I="[object Date]",M="[object Error]",N="[object Function]",T="[object GeneratorFunction]",j="[object Map]",q="[object Number]",X="[object Null]",C="[object Object]",R="[object Promise]",v="[object Proxy]",x="[object RegExp]",w="[object Set]",o="[object String]",p="[object Symbol]",z="[object Undefined]",b="[object WeakMap]",S="[object ArrayBuffer]",F="[object DataView]",H="[object Float32Array]",E="[object Float64Array]",D="[object Int8Array]",G="[object Int16Array]",Y="[object Int32Array]",W="[object Uint8Array]",V="[object Uint8ClampedArray]",k="[object Uint16Array]",J="[object Uint32Array]",te=/[\\^$.*+?()[\]{}|]/g,Q=/^\[object .+?Constructor\]$/,ae=/^(?:0|[1-9]\d*)$/,ne={};ne[H]=ne[E]=ne[D]=ne[G]=ne[Y]=ne[W]=ne[V]=ne[k]=ne[J]=!0,ne[a]=ne[d]=ne[S]=ne[m]=ne[F]=ne[I]=ne[M]=ne[N]=ne[j]=ne[q]=ne[C]=ne[x]=ne[w]=ne[o]=ne[b]=!1;var le=typeof yt=="object"&&yt&&yt.Object===Object&&yt,$=typeof self=="object"&&self&&self.Object===Object&&self,B=le||$||Function("return this")(),P=e&&!e.nodeType&&e,l=P&&!0&&t&&!t.nodeType&&t,O=l&&l.exports===P,ee=O&&le.process,re=function(){try{return ee&&ee.binding&&ee.binding("util")}catch{}}(),de=re&&re.isTypedArray;function Se(_,U){for(var Z=-1,oe=_==null?0:_.length,Te=0,we=[];++Z<oe;){var Me=_[Z];U(Me,Z,_)&&(we[Te++]=Me)}return we}function _e(_,U){for(var Z=-1,oe=U.length,Te=_.length;++Z<oe;)_[Te+Z]=U[Z];return _}function xe(_,U){for(var Z=-1,oe=_==null?0:_.length;++Z<oe;)if(U(_[Z],Z,_))return!0;return!1}function Pe(_,U){for(var Z=-1,oe=Array(_);++Z<_;)oe[Z]=U(Z);return oe}function Ne(_){return function(U){return _(U)}}function Ee(_,U){return _.has(U)}function be(_,U){return _==null?void 0:_[U]}function fe(_){var U=-1,Z=Array(_.size);return _.forEach(function(oe,Te){Z[++U]=[Te,oe]}),Z}function ye(_,U){return function(Z){return _(U(Z))}}function me(_){var U=-1,Z=Array(_.size);return _.forEach(function(oe){Z[++U]=oe}),Z}var he=Array.prototype,pe=Function.prototype,f=Object.prototype,s=B["__core-js_shared__"],u=pe.toString,g=f.hasOwnProperty,A=function(){var _=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),L=f.toString,K=RegExp("^"+u.call(g).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),se=O?B.Buffer:void 0,ce=B.Symbol,ve=B.Uint8Array,Ie=f.propertyIsEnumerable,De=he.splice,vt=ce?ce.toStringTag:void 0,ir=Object.getOwnPropertySymbols,Cr=se?se.isBuffer:void 0,ri=ye(Object.keys,Object),je=mr(B,"DataView"),Ue=mr(B,"Map"),ze=mr(B,"Promise"),Ke=mr(B,"Set"),qe=mr(B,"WeakMap"),Le=mr(Object,"create"),Ge=sr(je),Ye=sr(Ue),Je=sr(ze),Xe=sr(Ke),Ze=sr(qe),ke=ce?ce.prototype:void 0,Ve=ke?ke.valueOf:void 0;function Re(_){var U=-1,Z=_==null?0:_.length;for(this.clear();++U<Z;){var oe=_[U];this.set(oe[0],oe[1])}}function Qe(){this.__data__=Le?Le(null):{},this.size=0}function et(_){var U=this.has(_)&&delete this.__data__[_];return this.size-=U?1:0,U}function lc(_){var U=this.__data__;if(Le){var Z=U[_];return Z===i?void 0:Z}return g.call(U,_)?U[_]:void 0}function hc(_){var U=this.__data__;return Le?U[_]!==void 0:g.call(U,_)}function fc(_,U){var Z=this.__data__;return this.size+=this.has(_)?0:1,Z[_]=Le&&U===void 0?i:U,this}Re.prototype.clear=Qe,Re.prototype.delete=et,Re.prototype.get=lc,Re.prototype.has=hc,Re.prototype.set=fc;function zt(_){var U=-1,Z=_==null?0:_.length;for(this.clear();++U<Z;){var oe=_[U];this.set(oe[0],oe[1])}}function dc(){this.__data__=[],this.size=0}function pc(_){var U=this.__data__,Z=ni(U,_);if(Z<0)return!1;var oe=U.length-1;return Z==oe?U.pop():De.call(U,Z,1),--this.size,!0}function gc(_){var U=this.__data__,Z=ni(U,_);return Z<0?void 0:U[Z][1]}function yc(_){return ni(this.__data__,_)>-1}function wc(_,U){var Z=this.__data__,oe=ni(Z,_);return oe<0?(++this.size,Z.push([_,U])):Z[oe][1]=U,this}zt.prototype.clear=dc,zt.prototype.delete=pc,zt.prototype.get=gc,zt.prototype.has=yc,zt.prototype.set=wc;function nr(_){var U=-1,Z=_==null?0:_.length;for(this.clear();++U<Z;){var oe=_[U];this.set(oe[0],oe[1])}}function bc(){this.size=0,this.__data__={hash:new Re,map:new(Ue||zt),string:new Re}}function mc(_){var U=si(this,_).delete(_);return this.size-=U?1:0,U}function _c(_){return si(this,_).get(_)}function Ec(_){return si(this,_).has(_)}function vc(_,U){var Z=si(this,_),oe=Z.size;return Z.set(_,U),this.size+=Z.size==oe?0:1,this}nr.prototype.clear=bc,nr.prototype.delete=mc,nr.prototype.get=_c,nr.prototype.has=Ec,nr.prototype.set=vc;function ii(_){var U=-1,Z=_==null?0:_.length;for(this.__data__=new nr;++U<Z;)this.add(_[U])}function Dc(_){return this.__data__.set(_,i),this}function Sc(_){return this.__data__.has(_)}ii.prototype.add=ii.prototype.push=Dc,ii.prototype.has=Sc;function Gt(_){var U=this.__data__=new zt(_);this.size=U.size}function xc(){this.__data__=new zt,this.size=0}function Ic(_){var U=this.__data__,Z=U.delete(_);return this.size=U.size,Z}function Oc(_){return this.__data__.get(_)}function Ac(_){return this.__data__.has(_)}function Cc(_,U){var Z=this.__data__;if(Z instanceof zt){var oe=Z.__data__;if(!Ue||oe.length<r-1)return oe.push([_,U]),this.size=++Z.size,this;Z=this.__data__=new nr(oe)}return Z.set(_,U),this.size=Z.size,this}Gt.prototype.clear=xc,Gt.prototype.delete=Ic,Gt.prototype.get=Oc,Gt.prototype.has=Ac,Gt.prototype.set=Cc;function Tc(_,U){var Z=oi(_),oe=!Z&&Hc(_),Te=!Z&&!oe&&Ui(_),we=!Z&&!oe&&!Te&&Jn(_),Me=Z||oe||Te||we,tt=Me?Pe(_.length,String):[],ot=tt.length;for(var Fe in _)(U||g.call(_,Fe))&&!(Me&&(Fe=="length"||Te&&(Fe=="offset"||Fe=="parent")||we&&(Fe=="buffer"||Fe=="byteLength"||Fe=="byteOffset")||jc(Fe,ot)))&&tt.push(Fe);return tt}function ni(_,U){for(var Z=_.length;Z--;)if(kn(_[Z][0],U))return Z;return-1}function Nc(_,U,Z){var oe=U(_);return oi(_)?oe:_e(oe,Z(_))}function Tr(_){return _==null?_===void 0?z:X:vt&&vt in Object(_)?Bc(_):Vc(_)}function Kn(_){return Nr(_)&&Tr(_)==a}function qn(_,U,Z,oe,Te){return _===U?!0:_==null||U==null||!Nr(_)&&!Nr(U)?_!==_&&U!==U:Rc(_,U,Z,oe,qn,Te)}function Rc(_,U,Z,oe,Te,we){var Me=oi(_),tt=oi(U),ot=Me?d:Yt(_),Fe=tt?d:Yt(U);ot=ot==a?C:ot,Fe=Fe==a?C:Fe;var Dt=ot==C,Rt=Fe==C,ft=ot==Fe;if(ft&&Ui(_)){if(!Ui(U))return!1;Me=!0,Dt=!1}if(ft&&!Dt)return we||(we=new Gt),Me||Jn(_)?Vn(_,U,Z,oe,Te,we):Lc(_,U,ot,Z,oe,Te,we);if(!(Z&n)){var xt=Dt&&g.call(_,"__wrapped__"),It=Rt&&g.call(U,"__wrapped__");if(xt||It){var Jt=xt?_.value():_,Kt=It?U.value():U;return we||(we=new Gt),Te(Jt,Kt,Z,oe,we)}}return ft?(we||(we=new Gt),Mc(_,U,Z,oe,Te,we)):!1}function Pc(_){if(!Yn(_)||Kc(_))return!1;var U=Wn(_)?K:Q;return U.test(sr(_))}function Fc(_){return Nr(_)&&Gn(_.length)&&!!ne[Tr(_)]}function Uc(_){if(!qc(_))return ri(_);var U=[];for(var Z in Object(_))g.call(_,Z)&&Z!="constructor"&&U.push(Z);return U}function Vn(_,U,Z,oe,Te,we){var Me=Z&n,tt=_.length,ot=U.length;if(tt!=ot&&!(Me&&ot>tt))return!1;var Fe=we.get(_);if(Fe&&we.get(U))return Fe==U;var Dt=-1,Rt=!0,ft=Z&c?new ii:void 0;for(we.set(_,U),we.set(U,_);++Dt<tt;){var xt=_[Dt],It=U[Dt];if(oe)var Jt=Me?oe(It,xt,Dt,U,_,we):oe(xt,It,Dt,_,U,we);if(Jt!==void 0){if(Jt)continue;Rt=!1;break}if(ft){if(!xe(U,function(Kt,or){if(!Ee(ft,or)&&(xt===Kt||Te(xt,Kt,Z,oe,we)))return ft.push(or)})){Rt=!1;break}}else if(!(xt===It||Te(xt,It,Z,oe,we))){Rt=!1;break}}return we.delete(_),we.delete(U),Rt}function Lc(_,U,Z,oe,Te,we,Me){switch(Z){case F:if(_.byteLength!=U.byteLength||_.byteOffset!=U.byteOffset)return!1;_=_.buffer,U=U.buffer;case S:return!(_.byteLength!=U.byteLength||!we(new ve(_),new ve(U)));case m:case I:case q:return kn(+_,+U);case M:return _.name==U.name&&_.message==U.message;case x:case o:return _==U+"";case j:var tt=fe;case w:var ot=oe&n;if(tt||(tt=me),_.size!=U.size&&!ot)return!1;var Fe=Me.get(_);if(Fe)return Fe==U;oe|=c,Me.set(_,U);var Dt=Vn(tt(_),tt(U),oe,Te,we,Me);return Me.delete(_),Dt;case p:if(Ve)return Ve.call(_)==Ve.call(U)}return!1}function Mc(_,U,Z,oe,Te,we){var Me=Z&n,tt=Hn(_),ot=tt.length,Fe=Hn(U),Dt=Fe.length;if(ot!=Dt&&!Me)return!1;for(var Rt=ot;Rt--;){var ft=tt[Rt];if(!(Me?ft in U:g.call(U,ft)))return!1}var xt=we.get(_);if(xt&&we.get(U))return xt==U;var It=!0;we.set(_,U),we.set(U,_);for(var Jt=Me;++Rt<ot;){ft=tt[Rt];var Kt=_[ft],or=U[ft];if(oe)var Xn=Me?oe(or,Kt,ft,U,_,we):oe(Kt,or,ft,_,U,we);if(!(Xn===void 0?Kt===or||Te(Kt,or,Z,oe,we):Xn)){It=!1;break}Jt||(Jt=ft=="constructor")}if(It&&!Jt){var ai=_.constructor,ci=U.constructor;ai!=ci&&"constructor"in _&&"constructor"in U&&!(typeof ai=="function"&&ai instanceof ai&&typeof ci=="function"&&ci instanceof ci)&&(It=!1)}return we.delete(_),we.delete(U),It}function Hn(_){return Nc(_,Gc,$c)}function si(_,U){var Z=_.__data__;return zc(U)?Z[typeof U=="string"?"string":"hash"]:Z.map}function mr(_,U){var Z=be(_,U);return Pc(Z)?Z:void 0}function Bc(_){var U=g.call(_,vt),Z=_[vt];try{_[vt]=void 0;var oe=!0}catch{}var Te=L.call(_);return oe&&(U?_[vt]=Z:delete _[vt]),Te}var $c=ir?function(_){return _==null?[]:(_=Object(_),Se(ir(_),function(U){return Ie.call(_,U)}))}:Yc,Yt=Tr;(je&&Yt(new je(new ArrayBuffer(1)))!=F||Ue&&Yt(new Ue)!=j||ze&&Yt(ze.resolve())!=R||Ke&&Yt(new Ke)!=w||qe&&Yt(new qe)!=b)&&(Yt=function(_){var U=Tr(_),Z=U==C?_.constructor:void 0,oe=Z?sr(Z):"";if(oe)switch(oe){case Ge:return F;case Ye:return j;case Je:return R;case Xe:return w;case Ze:return b}return U});function jc(_,U){return U=U??h,!!U&&(typeof _=="number"||ae.test(_))&&_>-1&&_%1==0&&_<U}function zc(_){var U=typeof _;return U=="string"||U=="number"||U=="symbol"||U=="boolean"?_!=="__proto__":_===null}function Kc(_){return!!A&&A in _}function qc(_){var U=_&&_.constructor,Z=typeof U=="function"&&U.prototype||f;return _===Z}function Vc(_){return L.call(_)}function sr(_){if(_!=null){try{return u.call(_)}catch{}try{return _+""}catch{}}return""}function kn(_,U){return _===U||_!==_&&U!==U}var Hc=Kn(function(){return arguments}())?Kn:function(_){return Nr(_)&&g.call(_,"callee")&&!Ie.call(_,"callee")},oi=Array.isArray;function kc(_){return _!=null&&Gn(_.length)&&!Wn(_)}var Ui=Cr||Jc;function Wc(_,U){return qn(_,U)}function Wn(_){if(!Yn(_))return!1;var U=Tr(_);return U==N||U==T||U==y||U==v}function Gn(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=h}function Yn(_){var U=typeof _;return _!=null&&(U=="object"||U=="function")}function Nr(_){return _!=null&&typeof _=="object"}var Jn=de?Ne(de):Fc;function Gc(_){return kc(_)?Tc(_):Uc(_)}function Yc(){return[]}function Jc(){return!1}t.exports=Wc})(Ei,Ei.exports);var ip=Ei.exports;const np=Po(ip);function sp(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var n=0;n<t.length;n++){var c=t.charAt(n),h=c.charCodeAt(0);if(r[h]!==255)throw new TypeError(c+" is ambiguous");r[h]=n}var a=t.length,d=t.charAt(0),y=Math.log(a)/Math.log(256),m=Math.log(256)/Math.log(a);function I(T){if(T instanceof Uint8Array||(ArrayBuffer.isView(T)?T=new Uint8Array(T.buffer,T.byteOffset,T.byteLength):Array.isArray(T)&&(T=Uint8Array.from(T))),!(T instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(T.length===0)return"";for(var j=0,q=0,X=0,C=T.length;X!==C&&T[X]===0;)X++,j++;for(var R=(C-X)*m+1>>>0,v=new Uint8Array(R);X!==C;){for(var x=T[X],w=0,o=R-1;(x!==0||w<q)&&o!==-1;o--,w++)x+=256*v[o]>>>0,v[o]=x%a>>>0,x=x/a>>>0;if(x!==0)throw new Error("Non-zero carry");q=w,X++}for(var p=R-q;p!==R&&v[p]===0;)p++;for(var z=d.repeat(j);p<R;++p)z+=t.charAt(v[p]);return z}function M(T){if(typeof T!="string")throw new TypeError("Expected String");if(T.length===0)return new Uint8Array;var j=0;if(T[j]!==" "){for(var q=0,X=0;T[j]===d;)q++,j++;for(var C=(T.length-j)*y+1>>>0,R=new Uint8Array(C);T[j];){var v=r[T.charCodeAt(j)];if(v===255)return;for(var x=0,w=C-1;(v!==0||x<X)&&w!==-1;w--,x++)v+=a*R[w]>>>0,R[w]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");X=x,j++}if(T[j]!==" "){for(var o=C-X;o!==C&&R[o]===0;)o++;for(var p=new Uint8Array(q+(C-o)),z=q;o!==C;)p[z++]=R[o++];return p}}}function N(T){var j=M(T);if(j)return j;throw new Error(`Non-${e} character`)}return{encode:I,decodeUnsafe:M,decode:N}}var op=sp,ap=op;const ja=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},cp=t=>new TextEncoder().encode(t),up=t=>new TextDecoder().decode(t);class lp{constructor(e,r,i){this.name=e,this.prefix=r,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class hp{constructor(e,r,i){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return za(this,e)}}class fp{constructor(e){this.decoders=e}or(e){return za(this,e)}decode(e){const r=e[0],i=this.decoders[r];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const za=(t,e)=>new fp({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class dp{constructor(e,r,i,n){this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=n,this.encoder=new lp(e,r,i),this.decoder=new hp(e,r,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Ri=({name:t,prefix:e,encode:r,decode:i})=>new dp(t,e,r,i),ti=({prefix:t,name:e,alphabet:r})=>{const{encode:i,decode:n}=ap(r,e);return Ri({prefix:t,name:e,encode:i,decode:c=>ja(n(c))})},pp=(t,e,r,i)=>{const n={};for(let m=0;m<e.length;++m)n[e[m]]=m;let c=t.length;for(;t[c-1]==="=";)--c;const h=new Uint8Array(c*r/8|0);let a=0,d=0,y=0;for(let m=0;m<c;++m){const I=n[t[m]];if(I===void 0)throw new SyntaxError(`Non-${i} character`);d=d<<r|I,a+=r,a>=8&&(a-=8,h[y++]=255&d>>a)}if(a>=r||255&d<<8-a)throw new SyntaxError("Unexpected end of data");return h},gp=(t,e,r)=>{const i=e[e.length-1]==="=",n=(1<<r)-1;let c="",h=0,a=0;for(let d=0;d<t.length;++d)for(a=a<<8|t[d],h+=8;h>r;)h-=r,c+=e[n&a>>h];if(h&&(c+=e[n&a<<r-h]),i)for(;c.length*r&7;)c+="=";return c},ht=({name:t,prefix:e,bitsPerChar:r,alphabet:i})=>Ri({prefix:e,name:t,encode(n){return gp(n,i,r)},decode(n){return pp(n,i,r,t)}}),yp=Ri({prefix:"\0",name:"identity",encode:t=>up(t),decode:t=>cp(t)});var wp=Object.freeze({__proto__:null,identity:yp});const bp=ht({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var mp=Object.freeze({__proto__:null,base2:bp});const _p=ht({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ep=Object.freeze({__proto__:null,base8:_p});const vp=ti({prefix:"9",name:"base10",alphabet:"0123456789"});var Dp=Object.freeze({__proto__:null,base10:vp});const Sp=ht({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),xp=ht({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ip=Object.freeze({__proto__:null,base16:Sp,base16upper:xp});const Op=ht({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Ap=ht({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Cp=ht({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Tp=ht({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Np=ht({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Rp=ht({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Pp=ht({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Fp=ht({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Up=ht({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Lp=Object.freeze({__proto__:null,base32:Op,base32upper:Ap,base32pad:Cp,base32padupper:Tp,base32hex:Np,base32hexupper:Rp,base32hexpad:Pp,base32hexpadupper:Fp,base32z:Up});const Mp=ti({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Bp=ti({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var $p=Object.freeze({__proto__:null,base36:Mp,base36upper:Bp});const jp=ti({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),zp=ti({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Kp=Object.freeze({__proto__:null,base58btc:jp,base58flickr:zp});const qp=ht({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Vp=ht({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Hp=ht({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),kp=ht({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Wp=Object.freeze({__proto__:null,base64:qp,base64pad:Vp,base64url:Hp,base64urlpad:kp});const Ka=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Gp=Ka.reduce((t,e,r)=>(t[r]=e,t),[]),Yp=Ka.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Jp(t){return t.reduce((e,r)=>(e+=Gp[r],e),"")}function Xp(t){const e=[];for(const r of t){const i=Yp[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(i)}return new Uint8Array(e)}const Zp=Ri({prefix:"🚀",name:"base256emoji",encode:Jp,decode:Xp});var Qp=Object.freeze({__proto__:null,base256emoji:Zp}),e0=qa,eo=128,t0=127,r0=~t0,i0=Math.pow(2,31);function qa(t,e,r){e=e||[],r=r||0;for(var i=r;t>=i0;)e[r++]=t&255|eo,t/=128;for(;t&r0;)e[r++]=t&255|eo,t>>>=7;return e[r]=t|0,qa.bytes=r-i+1,e}var n0=pn,s0=128,to=127;function pn(t,i){var r=0,i=i||0,n=0,c=i,h,a=t.length;do{if(c>=a)throw pn.bytes=0,new RangeError("Could not decode varint");h=t[c++],r+=n<28?(h&to)<<n:(h&to)*Math.pow(2,n),n+=7}while(h>=s0);return pn.bytes=c-i,r}var o0=Math.pow(2,7),a0=Math.pow(2,14),c0=Math.pow(2,21),u0=Math.pow(2,28),l0=Math.pow(2,35),h0=Math.pow(2,42),f0=Math.pow(2,49),d0=Math.pow(2,56),p0=Math.pow(2,63),g0=function(t){return t<o0?1:t<a0?2:t<c0?3:t<u0?4:t<l0?5:t<h0?6:t<f0?7:t<d0?8:t<p0?9:10},y0={encode:e0,decode:n0,encodingLength:g0},Va=y0;const ro=(t,e,r=0)=>(Va.encode(t,e,r),e),io=t=>Va.encodingLength(t),gn=(t,e)=>{const r=e.byteLength,i=io(t),n=i+io(r),c=new Uint8Array(n+r);return ro(t,c,0),ro(r,c,i),c.set(e,n),new w0(t,r,e,c)};class w0{constructor(e,r,i,n){this.code=e,this.size=r,this.digest=i,this.bytes=n}}const Ha=({name:t,code:e,encode:r})=>new b0(t,e,r);class b0{constructor(e,r,i){this.name=e,this.code=r,this.encode=i}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?gn(this.code,r):r.then(i=>gn(this.code,i))}else throw Error("Unknown type, must be binary type")}}const ka=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),m0=Ha({name:"sha2-256",code:18,encode:ka("SHA-256")}),_0=Ha({name:"sha2-512",code:19,encode:ka("SHA-512")});var E0=Object.freeze({__proto__:null,sha256:m0,sha512:_0});const Wa=0,v0="identity",Ga=ja,D0=t=>gn(Wa,Ga(t)),S0={code:Wa,name:v0,encode:Ga,digest:D0};var x0=Object.freeze({__proto__:null,identity:S0});new TextEncoder,new TextDecoder;const no={...wp,...mp,...Ep,...Dp,...Ip,...Lp,...$p,...Kp,...Wp,...Qp};({...E0,...x0});function Ya(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function I0(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ya(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function Ja(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}const so=Ja("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ki=Ja("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=I0(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),O0={utf8:so,"utf-8":so,hex:no.base16,latin1:ki,ascii:ki,binary:ki,...no};function A0(t,e="utf8"){const r=O0[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ya(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}const Xa="wc",C0=2,Bn="core",er=`${Xa}@2:${Bn}:`,T0={name:Bn,logger:"error"},N0={database:":memory:"},R0="crypto",oo="client_ed25519_seed",P0=ue.ONE_DAY,F0="keychain",U0="0.3",L0="messages",M0="0.3",B0=ue.SIX_HOURS,$0="publisher",Za="irn",j0="error",Qa="wss://relay.walletconnect.com",z0="relayer",nt={message:"relayer_message",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},K0="_subscription",$r={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},q0=ue.ONE_SECOND/2,V0="2.7.4",H0="0.3",Mt={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},k0="subscription",W0="0.3",G0=ue.FIVE_SECONDS*1e3,Y0="pairing",J0="0.3",jr={wc_pairingDelete:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ue.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ue.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:0},res:{ttl:ue.ONE_DAY,prompt:!1,tag:0}}},Lt={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},X0="history",Z0="0.3",Q0="expirer",Ct={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},eg="0.3",Wi="verify-api",ao="https://verify.walletconnect.com";class tg{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=F0,this.version=U0,this.initialized=!1,this.storagePrefix=er,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,n)=>{this.isInitialized(),this.keychain.set(i,n),await this.persist()},this.get=i=>{this.isInitialized();const n=this.keychain.get(i);if(typeof n>"u"){const{message:c}=ie("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(c)}return n},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=Oe.generateChildLogger(r,this.name)}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Ca(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Ta(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}class rg{constructor(e,r,i){this.core=e,this.logger=r,this.name=R0,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=n=>(this.isInitialized(),this.keychain.has(n)),this.getClientId=async()=>{this.isInitialized();const n=await this.getClientSeed(),c=As(n);return pa(c.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const n=Of();return this.setPrivateKey(n.publicKey,n.privateKey)},this.signJWT=async n=>{this.isInitialized();const c=await this.getClientSeed(),h=As(c),a=fn();return await Fh(a,n,P0,h)},this.generateSharedKey=(n,c,h)=>{this.isInitialized();const a=this.getPrivateKey(n),d=Af(a,c);return this.setSymKey(d,h)},this.setSymKey=async(n,c)=>{this.isInitialized();const h=c||Cf(n);return await this.keychain.set(h,n),h},this.deleteKeyPair=async n=>{this.isInitialized(),await this.keychain.del(n)},this.deleteSymKey=async n=>{this.isInitialized(),await this.keychain.del(n)},this.encode=async(n,c,h)=>{this.isInitialized();const a=Oa(h),d=mn(c);if($s(a)){const M=a.senderPublicKey,N=a.receiverPublicKey;n=await this.generateSharedKey(M,N)}const y=this.getSymKey(n),{type:m,senderPublicKey:I}=a;return Nf({type:m,symKey:y,message:d,senderPublicKey:I})},this.decode=async(n,c,h)=>{this.isInitialized();const a=Ff(c,h);if($s(a)){const m=a.receiverPublicKey,I=a.senderPublicKey;n=await this.generateSharedKey(m,I)}const d=this.getSymKey(n),y=Rf({symKey:d,encoded:c});return Qo(y)},this.getPayloadType=n=>{const c=mi(n);return Qr(c.type)},this.getPayloadSenderPublicKey=n=>{const c=mi(n);return c.senderPublicKey?mt(c.senderPublicKey,bt):void 0},this.core=e,this.logger=Oe.generateChildLogger(r,this.name),this.keychain=i||new tg(this.core,this.logger)}get context(){return Oe.getLoggerContext(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(oo)}catch{e=fn(),await this.keychain.set(oo,e)}return A0(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}class ig extends Mu{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=L0,this.version=M0,this.initialized=!1,this.storagePrefix=er,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,n)=>{this.isInitialized();const c=gr(n);let h=this.messages.get(i);return typeof h>"u"&&(h={}),typeof h[c]<"u"||(h[c]=n,this.messages.set(i,h),await this.persist()),c},this.get=i=>{this.isInitialized();let n=this.messages.get(i);return typeof n>"u"&&(n={}),n},this.has=(i,n)=>{this.isInitialized();const c=this.get(i),h=gr(n);return typeof c[h]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=Oe.generateChildLogger(e,this.name),this.core=r}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Ca(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Ta(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}class ng extends Bu{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new Ft.EventEmitter,this.name=$0,this.queue=new Map,this.publishTimeout=1e4,this.publish=async(i,n,c)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:n,opts:c}});try{const h=(c==null?void 0:c.ttl)||B0,a=dn(c),d=(c==null?void 0:c.prompt)||!1,y=(c==null?void 0:c.tag)||0,m={topic:i,message:n,opts:{ttl:h,relay:a,prompt:d,tag:y}},I=gr(n);this.queue.set(I,m);try{await await _i(this.rpcPublish(i,n,h,a,d,y),this.publishTimeout),this.relayer.events.emit(nt.publish,m)}catch{this.logger.debug("Publishing Payload stalled"),this.relayer.events.emit(nt.connection_stalled);return}this.onPublish(I,m),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:n,opts:c}})}catch(h){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(h),h}},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.relayer=e,this.logger=Oe.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Oe.getLoggerContext(this.logger)}rpcPublish(e,r,i,n,c,h){var a,d,y,m;const I={method:pi(n.protocol).publish,params:{topic:e,message:r,ttl:i,prompt:c,tag:h}};return wt((a=I.params)==null?void 0:a.prompt)&&((d=I.params)==null||delete d.prompt),wt((y=I.params)==null?void 0:y.tag)&&((m=I.params)==null||delete m.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:I}),this.relayer.request(I)}onPublish(e,r){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:i,opts:n}=e;await this.publish(r,i,n)})}registerEventListeners(){this.relayer.core.heartbeat.on(Jr.HEARTBEAT_EVENTS.pulse,()=>{this.checkQueue()})}}class sg{constructor(){this.map=new Map,this.set=(e,r)=>{const i=this.get(e);this.exists(e,r)||this.map.set(e,[...i,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,r))return;const n=i.filter(c=>c!==r);if(!n.length){this.map.delete(e);return}this.map.set(e,n)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var og=Object.defineProperty,ag=Object.defineProperties,cg=Object.getOwnPropertyDescriptors,co=Object.getOwnPropertySymbols,ug=Object.prototype.hasOwnProperty,lg=Object.prototype.propertyIsEnumerable,uo=(t,e,r)=>e in t?og(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zr=(t,e)=>{for(var r in e||(e={}))ug.call(e,r)&&uo(t,r,e[r]);if(co)for(var r of co(e))lg.call(e,r)&&uo(t,r,e[r]);return t},Gi=(t,e)=>ag(t,cg(e));class hg extends zu{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new sg,this.events=new Ft.EventEmitter,this.name=k0,this.version=W0,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=er,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(i,n)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}});try{const c=dn(n),h={topic:i,relay:c};this.pending.set(i,h);const a=await this.rpcSubscribe(i,c);return this.onSubscribe(a,h),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:n}}),a}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}},this.unsubscribe=async(i,n)=>{await this.restartToComplete(),this.isInitialized(),typeof(n==null?void 0:n.id)<"u"?await this.unsubscribeById(i,n.id,n):await this.unsubscribeByTopic(i,n)},this.isSubscribed=async i=>this.topics.includes(i)?!0:await new Promise((n,c)=>{const h=new ue.Watch;h.start(this.pendingSubscriptionWatchLabel);const a=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(a),h.stop(this.pendingSubscriptionWatchLabel),n(!0)),h.elapsed(this.pendingSubscriptionWatchLabel)>=G0&&(clearInterval(a),h.stop(this.pendingSubscriptionWatchLabel),c(!1))},this.pollingInterval)}),this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Oe.generateChildLogger(r,this.name),this.clientId=""}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let i=!1;try{i=this.getSubscription(e).topic===r}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const i=this.topicMap.get(e);await Promise.all(i.map(async n=>await this.unsubscribeById(e,n,r)))}async unsubscribeById(e,r,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:i}});try{const n=dn(i);await this.rpcUnsubscribe(e,r,n);const c=We("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:i}})}catch(n){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(n),n}}async rpcSubscribe(e,r){const i={method:pi(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await _i(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(nt.connection_stalled)}return gr(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,i={method:pi(r.protocol).batchSubscribe,params:{topics:e.map(n=>n.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await _i(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(nt.connection_stalled)}}rpcUnsubscribe(e,r,i){const n={method:pi(i.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(e,r){this.setSubscription(e,Gi(zr({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,zr({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,i){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,zr({},r)),this.topicMap.set(r.topic,e),this.events.emit(Mt.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:i}=ie("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(Mt.deleted,Gi(zr({},i),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Mt.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(Mt.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=ie("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);ei(r)&&this.onBatchSubscribe(r.map((i,n)=>Gi(zr({},e[n]),{id:i})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Jr.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(nt.connect,async()=>{await this.onConnect()}),this.relayer.on(nt.disconnect,()=>{this.onDisconnect()}),this.events.on(Mt.created,async e=>{const r=Mt.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(Mt.deleted,async e=>{const r=Mt.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ie("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var fg=Object.defineProperty,lo=Object.getOwnPropertySymbols,dg=Object.prototype.hasOwnProperty,pg=Object.prototype.propertyIsEnumerable,ho=(t,e,r)=>e in t?fg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gg=(t,e)=>{for(var r in e||(e={}))dg.call(e,r)&&ho(t,r,e[r]);if(lo)for(var r of lo(e))pg.call(e,r)&&ho(t,r,e[r]);return t};class yg extends $u{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Ft.EventEmitter,this.name=z0,this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(i){throw this.logger.debug("Failed to Publish Request"),this.logger.error(i),i}},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Oe.generateChildLogger(e.logger,this.name):Oe.pino(Oe.getDefaultLoggerOptions({level:e.logger||j0})),this.messages=new ig(this.logger,e.core),this.subscriber=new hg(this,this.logger),this.publisher=new ng(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Qa,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.transportOpen(),this.subscriber.init()]),this.registerEventListeners(),this.initialized=!0}get context(){return Oe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,i){this.isInitialized(),await this.publisher.publish(e,r,i),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){this.isInitialized();let i="";return await Promise.all([new Promise(n=>{this.subscriber.once(Mt.created,c=>{c.topic===e&&n()})}),new Promise(async n=>{i=await this.subscriber.subscribe(e,r),n()})]),i}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(nt.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(r=>{this.initialized||r(),this.subscriber.once(Mt.resubscribed,()=>{r()})}),await Promise.race([new Promise(async(r,i)=>{await _i(this.provider.connect(),5e3,"socket stalled").catch(n=>i(n)).then(()=>r()).finally(()=>this.removeListener(nt.transport_closed,this.rejectTransportOpen))}),new Promise(r=>this.once(nt.transport_closed,this.rejectTransportOpen))])])}catch(r){this.logger.error(r);const i=r;if(!this.isConnectionStalled(i.message))throw r;this.events.emit(nt.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(r=>{this.provider.once($r.disconnect,()=>{r()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}rejectTransportOpen(){throw new Error("closeTransport called before connection was established")}async createProvider(){const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Zd(new rp(kf({sdkVersion:V0,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:i}=e;await this.messages.set(r,i)}async shouldIgnoreMessageEvent(e){const{topic:r,message:i}=e;return await this.subscriber.isSubscribed(r)?this.messages.has(r,i):!0}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Ln(e)){if(!e.method.endsWith(K0))return;const r=e.params,{topic:i,message:n,publishedAt:c}=r.data,h={topic:i,message:n,publishedAt:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(gg({type:"event",event:r.id},h)),this.events.emit(r.id,h),await this.acknowledgePayload(e),await this.onMessageEvent(h)}}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(nt.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Fn(e.id,!0);await this.provider.connection.send(r)}registerProviderListeners(){this.provider.on($r.payload,e=>this.onProviderPayload(e)),this.provider.on($r.connect,()=>{this.events.emit(nt.connect)}),this.provider.on($r.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on($r.error,e=>{this.logger.error(e),this.events.emit(nt.error,e)})}registerEventListeners(){this.events.on(nt.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(nt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},ue.toMiliseconds(q0))}isInitialized(){if(!this.initialized){const{message:e}=ie("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var wg=Object.defineProperty,fo=Object.getOwnPropertySymbols,bg=Object.prototype.hasOwnProperty,mg=Object.prototype.propertyIsEnumerable,po=(t,e,r)=>e in t?wg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,go=(t,e)=>{for(var r in e||(e={}))bg.call(e,r)&&po(t,r,e[r]);if(fo)for(var r of fo(e))mg.call(e,r)&&po(t,r,e[r]);return t};class Pi extends ju{constructor(e,r,i,n=er,c=void 0){super(e,r,i,n),this.core=e,this.logger=r,this.name=i,this.map=new Map,this.version=H0,this.cached=[],this.initialized=!1,this.storagePrefix=er,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(h=>{this.getKey&&h!==null&&!wt(h)?this.map.set(this.getKey(h),h):dd(h)?this.map.set(h.id,h):pd(h)&&this.map.set(h.topic,h)}),this.cached=[],this.initialized=!0)},this.set=async(h,a)=>{this.isInitialized(),this.map.has(h)?await this.update(h,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:h,value:a}),this.map.set(h,a),await this.persist())},this.get=h=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:h}),this.getData(h)),this.getAll=h=>(this.isInitialized(),h?this.values.filter(a=>Object.keys(h).every(d=>np(a[d],h[d]))):this.values),this.update=async(h,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:h,update:a});const d=go(go({},this.getData(h)),a);this.map.set(h,d),await this.persist()},this.delete=async(h,a)=>{this.isInitialized(),this.map.has(h)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:h,reason:a}),this.map.delete(h),await this.persist())},this.logger=Oe.generateChildLogger(r,this.name),this.storagePrefix=n,this.getKey=c}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:i}=ie("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=ie("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}class _g{constructor(e,r){this.core=e,this.logger=r,this.name=Y0,this.version=J0,this.events=new ko,this.initialized=!1,this.storagePrefix=er,this.ignoredPayloadTypes=[br],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async()=>{this.isInitialized();const i=fn(),n=await this.core.crypto.setSymKey(i),c=Bt(ue.FIVE_MINUTES),h={protocol:Za},a={topic:n,expiry:c,relay:h,active:!1},d=id({protocol:this.core.protocol,version:this.core.version,topic:n,symKey:i,relay:h});return await this.pairings.set(n,a),await this.core.relayer.subscribe(n),this.core.expirer.set(n,c),{topic:n,uri:d}},this.pair=async i=>{this.isInitialized(),this.isValidPair(i);const{topic:n,symKey:c,relay:h}=td(i.uri);if(this.pairings.keys.includes(n))throw new Error(`Pairing already exists: ${n}`);if(this.core.crypto.hasKeys(n))throw new Error(`Keychain already exists: ${n}`);const a=Bt(ue.FIVE_MINUTES),d={topic:n,relay:h,expiry:a,active:!1};return await this.pairings.set(n,d),await this.core.crypto.setSymKey(c,n),await this.core.relayer.subscribe(n,{relay:h}),this.core.expirer.set(n,a),i.activatePairing&&await this.activate({topic:n}),d},this.activate=async({topic:i})=>{this.isInitialized();const n=Bt(ue.THIRTY_DAYS);await this.pairings.update(i,{active:!0,expiry:n}),this.core.expirer.set(i,n)},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:n}=i;if(this.pairings.keys.includes(n)){const c=await this.sendRequest(n,"wc_pairingPing",{}),{done:h,resolve:a,reject:d}=Sr();this.events.once(He("pairing_ping",c),({error:y})=>{y?d(y):a()}),await h()}},this.updateExpiry=async({topic:i,expiry:n})=>{this.isInitialized(),await this.pairings.update(i,{expiry:n})},this.updateMetadata=async({topic:i,metadata:n})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:n})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:n}=i;this.pairings.keys.includes(n)&&(await this.sendRequest(n,"wc_pairingDelete",We("USER_DISCONNECTED")),await this.deletePairing(n))},this.sendRequest=async(i,n,c)=>{const h=Ni(n,c),a=await this.core.crypto.encode(i,h),d=jr[n].req;return this.core.history.set(i,h),await this.core.relayer.publish(i,a,d),h.id},this.sendResult=async(i,n,c)=>{const h=Fn(i,c),a=await this.core.crypto.encode(n,h),d=await this.core.history.get(n,i),y=jr[d.request.method].res;await this.core.relayer.publish(n,a,y),await this.core.history.resolve(h)},this.sendError=async(i,n,c)=>{const h=Un(i,c),a=await this.core.crypto.encode(n,h),d=await this.core.history.get(n,i),y=jr[d.request.method]?jr[d.request.method].res:jr.unregistered_method.res;await this.core.relayer.publish(n,a,y),await this.core.history.resolve(h)},this.deletePairing=async(i,n)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,We("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),n?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(n=>Zt(n.expiry));await Promise.all(i.map(n=>this.deletePairing(n.topic)))},this.onRelayEventRequest=i=>{const{topic:n,payload:c}=i,h=c.method;if(this.pairings.keys.includes(n))switch(h){case"wc_pairingPing":return this.onPairingPingRequest(n,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(n,c);default:return this.onUnknownRpcMethodRequest(n,c)}},this.onRelayEventResponse=async i=>{const{topic:n,payload:c}=i,h=(await this.core.history.get(n,c.id)).request.method;if(this.pairings.keys.includes(n))switch(h){case"wc_pairingPing":return this.onPairingPingResponse(n,c);default:return this.onUnknownRpcMethodResponse(h)}},this.onPairingPingRequest=async(i,n)=>{const{id:c}=n;try{this.isValidPing({topic:i}),await this.sendResult(c,i,!0),this.events.emit("pairing_ping",{id:c,topic:i})}catch(h){await this.sendError(c,i,h),this.logger.error(h)}},this.onPairingPingResponse=(i,n)=>{const{id:c}=n;setTimeout(()=>{Ht(n)?this.events.emit(He("pairing_ping",c),{}):Pt(n)&&this.events.emit(He("pairing_ping",c),{error:n.error})},500)},this.onPairingDeleteRequest=async(i,n)=>{const{id:c}=n;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit("pairing_delete",{id:c,topic:i})}catch(h){await this.sendError(c,i,h),this.logger.error(h)}},this.onUnknownRpcMethodRequest=async(i,n)=>{const{id:c,method:h}=n;try{if(this.registeredMethods.includes(h))return;const a=We("WC_METHOD_UNSUPPORTED",h);await this.sendError(c,i,a),this.logger.error(a)}catch(a){await this.sendError(c,i,a),this.logger.error(a)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(We("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{if(!_t(i)){const{message:n}=ie("MISSING_OR_INVALID",`pair() params: ${i}`);throw new Error(n)}if(!fd(i.uri)){const{message:n}=ie("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw new Error(n)}},this.isValidPing=async i=>{if(!_t(i)){const{message:c}=ie("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(c)}const{topic:n}=i;await this.isValidPairingTopic(n)},this.isValidDisconnect=async i=>{if(!_t(i)){const{message:c}=ie("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(c)}const{topic:n}=i;await this.isValidPairingTopic(n)},this.isValidPairingTopic=async i=>{if(!st(i,!1)){const{message:n}=ie("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(n)}if(!this.pairings.keys.includes(i)){const{message:n}=ie("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(n)}if(Zt(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:n}=ie("EXPIRED",`pairing topic: ${i}`);throw new Error(n)}},this.core=e,this.logger=Oe.generateChildLogger(r,this.name),this.pairings=new Pi(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Oe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ie("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(nt.message,async e=>{const{topic:r,message:i}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const n=await this.core.crypto.decode(r,i);Ln(n)?(this.core.history.set(r,n),this.onRelayEventRequest({topic:r,payload:n})):Mn(n)&&(await this.core.history.resolve(n),this.onRelayEventResponse({topic:r,payload:n}))})}registerExpirerEvents(){this.core.expirer.on(Ct.expired,async e=>{const{topic:r}=Ra(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class Eg extends Lu{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new Ft.EventEmitter,this.name=X0,this.version=Z0,this.cached=[],this.initialized=!1,this.storagePrefix=er,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,n,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:n,chainId:c}),this.records.has(n.id))return;const h={id:n.id,topic:i,request:{method:n.method,params:n.params||null},chainId:c};this.records.set(h.id,h),this.events.emit(Lt.created,h)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const n=await this.getRecord(i.id);typeof n.response>"u"&&(n.response=Pt(i)?{error:i.error}:{result:i.result},this.records.set(n.id,n),this.events.emit(Lt.updated,n))},this.get=async(i,n)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:n}),await this.getRecord(n)),this.delete=(i,n)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:n}),this.values.forEach(c=>{if(c.topic===i){if(typeof n<"u"&&c.id!==n)return;this.records.delete(c.id),this.events.emit(Lt.deleted,c)}})},this.exists=async(i,n)=>(this.isInitialized(),this.records.has(n)?(await this.getRecord(n)).topic===i:!1),this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.logger=Oe.generateChildLogger(r,this.name)}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const i={topic:r.topic,request:Ni(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:i}=ie("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Lt.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=ie("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Lt.created,e=>{const r=Lt.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Lt.updated,e=>{const r=Lt.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Lt.deleted,e=>{const r=Lt.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}class vg extends Ku{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new Ft.EventEmitter,this.name=Q0,this.version=eg,this.cached=[],this.initialized=!1,this.storagePrefix=er,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const n=this.formatTarget(i);return typeof this.getExpiration(n)<"u"}catch{return!1}},this.set=(i,n)=>{this.isInitialized();const c=this.formatTarget(i),h={target:c,expiry:n};this.expirations.set(c,h),this.checkExpiry(c,h),this.events.emit(Ct.created,{target:c,expiration:h})},this.get=i=>{this.isInitialized();const n=this.formatTarget(i);return this.getExpiration(n)},this.del=i=>{if(this.isInitialized(),this.has(i)){const n=this.formatTarget(i),c=this.getExpiration(n);this.expirations.delete(n),this.events.emit(Ct.deleted,{target:n,expiration:c})}},this.on=(i,n)=>{this.events.on(i,n)},this.once=(i,n)=>{this.events.once(i,n)},this.off=(i,n)=>{this.events.off(i,n)},this.removeListener=(i,n)=>{this.events.removeListener(i,n)},this.logger=Oe.generateChildLogger(r,this.name)}get context(){return Oe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Wf(e);if(typeof e=="number")return Gf(e);const{message:r}=ie("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ct.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=ie("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:i}=ie("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return r}checkExpiry(e,r){const{expiry:i}=r;ue.toMiliseconds(i)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Ct.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Jr.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Ct.created,e=>{const r=Ct.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Ct.expired,e=>{const r=Ct.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Ct.deleted,e=>{const r=Ct.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ie("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Dg extends qu{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=Wi,this.initialized=!1,this.init=async i=>{Aa()||!Tn()||(this.verifyUrl=(i==null?void 0:i.verifyUrl)||ao,await this.createIframe())},this.register=async i=>{var n;this.initialized||await this.init(),this.iframe&&((n=this.iframe.contentWindow)==null||n.postMessage(i.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${i.attestationId} ${this.verifyUrl}`))},this.resolve=async i=>{var n;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${i.attestationId}`);const c=this.startAbortTimer(ue.FIVE_SECONDS),h=await fetch(`${this.verifyUrl}/attestation/${i.attestationId}`,{signal:this.abortController.signal});return clearTimeout(c),h.status===200?(n=await h.json())==null?void 0:n.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((i,n)=>{if(document.getElementById(Wi))return i();const c=document.createElement("iframe");c.setAttribute("id",Wi),c.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),c.style.display="none",c.addEventListener("load",()=>{this.initialized=!0,i()}),c.addEventListener("error",h=>{n(h)}),document.body.append(c),this.iframe=c}),new Promise(i=>{setTimeout(()=>i("iframe load timeout"),ue.toMiliseconds(ue.ONE_SECOND/2))})])}catch(i){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(i)}},this.logger=Oe.generateChildLogger(r,this.name),this.verifyUrl=ao,this.abortController=new AbortController,this.isDevEnv=Cn()&&{}.IS_VITEST}get context(){return Oe.getLoggerContext(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),ue.toMiliseconds(e))}}var Sg=Object.defineProperty,yo=Object.getOwnPropertySymbols,xg=Object.prototype.hasOwnProperty,Ig=Object.prototype.propertyIsEnumerable,wo=(t,e,r)=>e in t?Sg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bo=(t,e)=>{for(var r in e||(e={}))xg.call(e,r)&&wo(t,r,e[r]);if(yo)for(var r of yo(e))Ig.call(e,r)&&wo(t,r,e[r]);return t};let Og=class ec extends Uu{constructor(e){super(e),this.protocol=Xa,this.version=C0,this.name=Bn,this.events=new Ft.EventEmitter,this.initialized=!1,this.on=(i,n)=>this.events.on(i,n),this.once=(i,n)=>this.events.once(i,n),this.off=(i,n)=>this.events.off(i,n),this.removeListener=(i,n)=>this.events.removeListener(i,n),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Qa;const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Oe.pino(Oe.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||T0.logger}));this.logger=Oe.generateChildLogger(r,this.name),this.heartbeat=new Jr.HeartBeat,this.crypto=new rg(this,this.logger,e==null?void 0:e.keychain),this.history=new Eg(this,this.logger),this.expirer=new vg(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new bu(bo(bo({},N0),e==null?void 0:e.storageOptions)),this.relayer=new yg({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new _g(this,this.logger),this.verify=new Dg(this.projectId||"",this.logger)}static async init(e){const r=new ec(e);return await r.initialize(),r}get context(){return Oe.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const Ag=Og,tc="wc",rc=2,ic="client",$n=`${tc}@${rc}:${ic}:`,Yi={name:ic,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Cg="proposal",Tg="Proposal expired",Ng="session",ui=ue.SEVEN_DAYS,Rg="engine",Kr={wc_sessionPropose:{req:{ttl:ue.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ue.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ue.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ue.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ue.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ue.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ue.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:ue.THIRTY_SECONDS,prompt:!1,tag:1115}}},Ji={min:ue.FIVE_MINUTES,max:ue.SEVEN_DAYS},Pg="request",Fg=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var Ug=Object.defineProperty,Lg=Object.defineProperties,Mg=Object.getOwnPropertyDescriptors,mo=Object.getOwnPropertySymbols,Bg=Object.prototype.hasOwnProperty,$g=Object.prototype.propertyIsEnumerable,_o=(t,e,r)=>e in t?Ug(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ot=(t,e)=>{for(var r in e||(e={}))Bg.call(e,r)&&_o(t,r,e[r]);if(mo)for(var r of mo(e))$g.call(e,r)&&_o(t,r,e[r]);return t},Xi=(t,e)=>Lg(t,Mg(e));class jg extends Hu{constructor(e){super(e),this.name=Rg,this.events=new ko,this.initialized=!1,this.ignoredPayloadTypes=[br],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(Kr)}),this.initialized=!0)},this.connect=async r=>{this.isInitialized();const i=Xi(Ot({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:n,requiredNamespaces:c,optionalNamespaces:h,sessionProperties:a,relays:d}=i;let y=n,m,I=!1;if(y&&(I=this.client.core.pairing.pairings.get(y).active),!y||!I){const{topic:R,uri:v}=await this.client.core.pairing.create();y=R,m=v}const M=await this.client.core.crypto.generateKeyPair(),N=Ot({requiredNamespaces:c,optionalNamespaces:h,relays:d??[{protocol:Za}],proposer:{publicKey:M,metadata:this.client.metadata}},a&&{sessionProperties:a}),{reject:T,resolve:j,done:q}=Sr(ue.FIVE_MINUTES,Tg);if(this.events.once(He("session_connect"),async({error:R,session:v})=>{if(R)T(R);else if(v){v.self.publicKey=M;const x=Xi(Ot({},v),{requiredNamespaces:v.requiredNamespaces,optionalNamespaces:v.optionalNamespaces});await this.client.session.set(v.topic,x),await this.setExpiry(v.topic,v.expiry),y&&await this.client.core.pairing.updateMetadata({topic:y,metadata:v.peer.metadata}),j(x)}}),!y){const{message:R}=ie("NO_MATCHING_KEY",`connect() pairing topic: ${y}`);throw new Error(R)}const X=await this.sendRequest(y,"wc_sessionPropose",N),C=Bt(ue.FIVE_MINUTES);return await this.setProposal(X,Ot({id:X,expiry:C},N)),{uri:m,approval:q}},this.pair=async r=>(this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{this.isInitialized(),await this.isValidApprove(r);const{id:i,relayProtocol:n,namespaces:c,sessionProperties:h}=r,a=this.client.proposal.get(i);let{pairingTopic:d,proposer:y,requiredNamespaces:m,optionalNamespaces:I}=a;d=d||"",kr(m)||(m=ad(c,"approve()"));const M=await this.client.core.crypto.generateKeyPair(),N=y.publicKey,T=await this.client.core.crypto.generateSharedKey(M,N);d&&i&&(await this.client.core.pairing.updateMetadata({topic:d,metadata:y.metadata}),await this.sendResult(i,d,{relay:{protocol:n??"irn"},responderPublicKey:M}),await this.client.proposal.delete(i,We("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:d}));const j=Ot({relay:{protocol:n??"irn"},namespaces:c,requiredNamespaces:m,optionalNamespaces:I,pairingTopic:d,controller:{publicKey:M,metadata:this.client.metadata},expiry:Bt(ui)},h&&{sessionProperties:h});await this.client.core.relayer.subscribe(T),await this.sendRequest(T,"wc_sessionSettle",j);const q=Xi(Ot({},j),{topic:T,pairingTopic:d,acknowledged:!1,self:j.controller,peer:{publicKey:y.publicKey,metadata:y.metadata},controller:M});return await this.client.session.set(T,q),await this.setExpiry(T,Bt(ui)),{topic:T,acknowledged:()=>new Promise(X=>X(this.client.session.get(T)))}},this.reject=async r=>{this.isInitialized(),await this.isValidReject(r);const{id:i,reason:n}=r,{pairingTopic:c}=this.client.proposal.get(i);c&&(await this.sendError(i,c,n),await this.client.proposal.delete(i,We("USER_DISCONNECTED")))},this.update=async r=>{this.isInitialized(),await this.isValidUpdate(r);const{topic:i,namespaces:n}=r,c=await this.sendRequest(i,"wc_sessionUpdate",{namespaces:n}),{done:h,resolve:a,reject:d}=Sr();return this.events.once(He("session_update",c),({error:y})=>{y?d(y):a()}),await this.client.session.update(i,{namespaces:n}),{acknowledged:h}},this.extend=async r=>{this.isInitialized(),await this.isValidExtend(r);const{topic:i}=r,n=await this.sendRequest(i,"wc_sessionExtend",{}),{done:c,resolve:h,reject:a}=Sr();return this.events.once(He("session_extend",n),({error:d})=>{d?a(d):h()}),await this.setExpiry(i,Bt(ui)),{acknowledged:c}},this.request=async r=>{this.isInitialized(),await this.isValidRequest(r);const{chainId:i,request:n,topic:c,expiry:h}=r,a=await this.sendRequest(c,"wc_sessionRequest",{request:n,chainId:i},h),{done:d,resolve:y,reject:m}=Sr(h);return this.events.once(He("session_request",a),({error:I,result:M})=>{I?m(I):y(M)}),this.client.events.emit("session_request_sent",{topic:c,request:n,chainId:i,id:a}),await d()},this.respond=async r=>{this.isInitialized(),await this.isValidRespond(r);const{topic:i,response:n}=r,{id:c}=n;Ht(n)?await this.sendResult(c,i,n.result):Pt(n)&&await this.sendError(c,i,n.error),this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0})},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:i}=r;if(this.client.session.keys.includes(i)){const n=await this.sendRequest(i,"wc_sessionPing",{}),{done:c,resolve:h,reject:a}=Sr();this.events.once(He("session_ping",n),({error:d})=>{d?a(d):h()}),await c()}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async r=>{this.isInitialized(),await this.isValidEmit(r);const{topic:i,event:n,chainId:c}=r;await this.sendRequest(i,"wc_sessionEvent",{event:n,chainId:c})},this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:i}=r;this.client.session.keys.includes(i)?(await this.sendRequest(i,"wc_sessionDelete",We("USER_DISCONNECTED")),await this.deleteSession(i)):await this.client.core.pairing.disconnect({topic:i})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(i=>ld(i,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{try{const i=this.client.core.pairing.pairings.get(r.pairingTopic),n=this.client.core.pairing.pairings.getAll().filter(c=>{var h,a;return((h=c.peerMetadata)==null?void 0:h.url)&&((a=c.peerMetadata)==null?void 0:a.url)===r.self.metadata.url&&c.topic!==i.topic});if(n.length===0)return;this.client.logger.info(`Cleaning up ${n.length} duplicate pairing(s)`),await Promise.all(n.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async(r,i)=>{const{self:n}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await Promise.all([this.client.session.delete(r,We("USER_DISCONNECTED")),this.client.core.crypto.deleteKeyPair(n.publicKey),this.client.core.crypto.deleteSymKey(r),i?Promise.resolve():this.client.core.expirer.del(r)])},this.deleteProposal=async(r,i)=>{await Promise.all([this.client.proposal.delete(r,We("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,i,n=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,i),n?Promise.resolve():this.client.core.expirer.del(r)])},this.setExpiry=async(r,i)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:i}),this.client.core.expirer.set(r,i)},this.setProposal=async(r,i)=>{await this.client.proposal.set(r,i),this.client.core.expirer.set(r,i.expiry)},this.setPendingSessionRequest=async r=>{const i=Kr.wc_sessionRequest.req.ttl,{id:n,topic:c,params:h}=r;await this.client.pendingRequest.set(n,{id:n,topic:c,params:h}),i&&this.client.core.expirer.set(n,Bt(i))},this.sendRequest=async(r,i,n,c)=>{const h=Ni(i,n);if(Tn()&&Fg.includes(i)){const y=gr(JSON.stringify(h));await this.client.core.verify.register({attestationId:y})}const a=await this.client.core.crypto.encode(r,h),d=Kr[i].req;return c&&(d.ttl=c),this.client.core.history.set(r,h),this.client.core.relayer.publish(r,a,d),h.id},this.sendResult=async(r,i,n)=>{const c=Fn(r,n),h=await this.client.core.crypto.encode(i,c),a=await this.client.core.history.get(i,r),d=Kr[a.request.method].res;this.client.core.relayer.publish(i,h,d),await this.client.core.history.resolve(c)},this.sendError=async(r,i,n)=>{const c=Un(r,n),h=await this.client.core.crypto.encode(i,c),a=await this.client.core.history.get(i,r),d=Kr[a.request.method].res;this.client.core.relayer.publish(i,h,d),await this.client.core.history.resolve(c)},this.cleanup=async()=>{const r=[],i=[];this.client.session.getAll().forEach(n=>{Zt(n.expiry)&&r.push(n.topic)}),this.client.proposal.getAll().forEach(n=>{Zt(n.expiry)&&i.push(n.id)}),await Promise.all([...r.map(n=>this.deleteSession(n)),...i.map(n=>this.deleteProposal(n))])},this.onRelayEventRequest=r=>{const{topic:i,payload:n}=r,c=n.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(i,n);case"wc_sessionSettle":return this.onSessionSettleRequest(i,n);case"wc_sessionUpdate":return this.onSessionUpdateRequest(i,n);case"wc_sessionExtend":return this.onSessionExtendRequest(i,n);case"wc_sessionPing":return this.onSessionPingRequest(i,n);case"wc_sessionDelete":return this.onSessionDeleteRequest(i,n);case"wc_sessionRequest":return this.onSessionRequest(i,n);case"wc_sessionEvent":return this.onSessionEventRequest(i,n);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async r=>{const{topic:i,payload:n}=r,c=(await this.client.core.history.get(i,n.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(i,n);case"wc_sessionSettle":return this.onSessionSettleResponse(i,n);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,n);case"wc_sessionExtend":return this.onSessionExtendResponse(i,n);case"wc_sessionPing":return this.onSessionPingResponse(i,n);case"wc_sessionRequest":return this.onSessionRequestResponse(i,n);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onSessionProposeRequest=async(r,i)=>{const{params:n,id:c}=i;try{this.isValidConnect(Ot({},i.params));const h=Bt(ue.FIVE_MINUTES),a=Ot({id:c,pairingTopic:r,expiry:h},n);await this.setProposal(c,a);const d=gr(JSON.stringify(i)),y=await this.getVerifyContext(d,a.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:a,context:y})}catch(h){await this.sendError(c,r,h),this.client.logger.error(h)}},this.onSessionProposeResponse=async(r,i)=>{const{id:n}=i;if(Ht(i)){const{result:c}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const h=this.client.proposal.get(n);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:h});const a=h.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:a});const d=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:d});const y=await this.client.core.crypto.generateSharedKey(a,d);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:y});const m=await this.client.core.relayer.subscribe(y);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:m}),await this.client.core.pairing.activate({topic:r})}else Pt(i)&&(await this.client.proposal.delete(n,We("USER_DISCONNECTED")),this.events.emit(He("session_connect"),{error:i.error}))},this.onSessionSettleRequest=async(r,i)=>{const{id:n,params:c}=i;try{this.isValidSessionSettleRequest(c);const{relay:h,controller:a,expiry:d,namespaces:y,requiredNamespaces:m,optionalNamespaces:I,sessionProperties:M,pairingTopic:N}=i.params,T=Ot({topic:r,relay:h,expiry:d,namespaces:y,acknowledged:!0,pairingTopic:N,requiredNamespaces:m,optionalNamespaces:I,controller:a.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},M&&{sessionProperties:M});await this.sendResult(i.id,r,!0),this.events.emit(He("session_connect"),{session:T}),this.cleanupDuplicatePairings(T)}catch(h){await this.sendError(n,r,h),this.client.logger.error(h)}},this.onSessionSettleResponse=async(r,i)=>{const{id:n}=i;Ht(i)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(He("session_approve",n),{})):Pt(i)&&(await this.client.session.delete(r,We("USER_DISCONNECTED")),this.events.emit(He("session_approve",n),{error:i.error}))},this.onSessionUpdateRequest=async(r,i)=>{const{params:n,id:c}=i;try{this.isValidUpdate(Ot({topic:r},n)),await this.client.session.update(r,{namespaces:n.namespaces}),await this.sendResult(c,r,!0),this.client.events.emit("session_update",{id:c,topic:r,params:n})}catch(h){await this.sendError(c,r,h),this.client.logger.error(h)}},this.onSessionUpdateResponse=(r,i)=>{const{id:n}=i;Ht(i)?this.events.emit(He("session_update",n),{}):Pt(i)&&this.events.emit(He("session_update",n),{error:i.error})},this.onSessionExtendRequest=async(r,i)=>{const{id:n}=i;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Bt(ui)),await this.sendResult(n,r,!0),this.client.events.emit("session_extend",{id:n,topic:r})}catch(c){await this.sendError(n,r,c),this.client.logger.error(c)}},this.onSessionExtendResponse=(r,i)=>{const{id:n}=i;Ht(i)?this.events.emit(He("session_extend",n),{}):Pt(i)&&this.events.emit(He("session_extend",n),{error:i.error})},this.onSessionPingRequest=async(r,i)=>{const{id:n}=i;try{this.isValidPing({topic:r}),await this.sendResult(n,r,!0),this.client.events.emit("session_ping",{id:n,topic:r})}catch(c){await this.sendError(n,r,c),this.client.logger.error(c)}},this.onSessionPingResponse=(r,i)=>{const{id:n}=i;setTimeout(()=>{Ht(i)?this.events.emit(He("session_ping",n),{}):Pt(i)&&this.events.emit(He("session_ping",n),{error:i.error})},500)},this.onSessionDeleteRequest=async(r,i)=>{const{id:n}=i;try{this.isValidDisconnect({topic:r,reason:i.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(nt.publish,async()=>{c(await this.deleteSession(r))})}),this.sendResult(n,r,!0)]),this.client.events.emit("session_delete",{id:n,topic:r})}catch(c){await this.sendError(n,r,c),this.client.logger.error(c)}},this.onSessionRequest=async(r,i)=>{const{id:n,params:c}=i;try{this.isValidRequest(Ot({topic:r},c)),await this.setPendingSessionRequest({id:n,topic:r,params:c});const h=gr(JSON.stringify(i)),a=this.client.session.get(r),d=await this.getVerifyContext(h,a.peer.metadata);this.client.events.emit("session_request",{id:n,topic:r,params:c,context:d})}catch(h){await this.sendError(n,r,h),this.client.logger.error(h)}},this.onSessionRequestResponse=(r,i)=>{const{id:n}=i;Ht(i)?this.events.emit(He("session_request",n),{result:i.result}):Pt(i)&&this.events.emit(He("session_request",n),{error:i.error})},this.onSessionEventRequest=async(r,i)=>{const{id:n,params:c}=i;try{this.isValidEmit(Ot({topic:r},c)),this.client.events.emit("session_event",{id:n,topic:r,params:c})}catch(h){await this.sendError(n,r,h),this.client.logger.error(h)}},this.isValidConnect=async r=>{if(!_t(r)){const{message:d}=ie("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(d)}const{pairingTopic:i,requiredNamespaces:n,optionalNamespaces:c,sessionProperties:h,relays:a}=r;if(wt(i)||await this.isValidPairingTopic(i),!vd(a,!0)){const{message:d}=ie("MISSING_OR_INVALID",`connect() relays: ${a}`);throw new Error(d)}!wt(n)&&kr(n)!==0&&this.validateNamespaces(n,"requiredNamespaces"),!wt(c)&&kr(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),wt(h)||this.validateSessionProps(h,"sessionProperties")},this.validateNamespaces=(r,i)=>{const n=Ed(r,"connect()",i);if(n)throw new Error(n.message)},this.isValidApprove=async r=>{if(!_t(r))throw new Error(ie("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:i,namespaces:n,relayProtocol:c,sessionProperties:h}=r;await this.isValidProposalId(i);const a=this.client.proposal.get(i),d=gi(n,"approve()");if(d)throw new Error(d.message);const y=Ws(a.requiredNamespaces,n,"approve()");if(y)throw new Error(y.message);if(!st(c,!0)){const{message:m}=ie("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(m)}wt(h)||this.validateSessionProps(h,"sessionProperties")},this.isValidReject=async r=>{if(!_t(r)){const{message:c}=ie("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(c)}const{id:i,reason:n}=r;if(await this.isValidProposalId(i),!Sd(n)){const{message:c}=ie("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(n)}`);throw new Error(c)}},this.isValidSessionSettleRequest=r=>{if(!_t(r)){const{message:y}=ie("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(y)}const{relay:i,controller:n,namespaces:c,expiry:h}=r;if(!Fa(i)){const{message:y}=ie("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(y)}const a=gd(n,"onSessionSettleRequest()");if(a)throw new Error(a.message);const d=gi(c,"onSessionSettleRequest()");if(d)throw new Error(d.message);if(Zt(h)){const{message:y}=ie("EXPIRED","onSessionSettleRequest()");throw new Error(y)}},this.isValidUpdate=async r=>{if(!_t(r)){const{message:d}=ie("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(d)}const{topic:i,namespaces:n}=r;await this.isValidSessionTopic(i);const c=this.client.session.get(i),h=gi(n,"update()");if(h)throw new Error(h.message);const a=Ws(c.requiredNamespaces,n,"update()");if(a)throw new Error(a.message)},this.isValidExtend=async r=>{if(!_t(r)){const{message:n}=ie("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(n)}const{topic:i}=r;await this.isValidSessionTopic(i)},this.isValidRequest=async r=>{if(!_t(r)){const{message:d}=ie("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(d)}const{topic:i,request:n,chainId:c,expiry:h}=r;await this.isValidSessionTopic(i);const{namespaces:a}=this.client.session.get(i);if(!ks(a,c)){const{message:d}=ie("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(d)}if(!xd(n)){const{message:d}=ie("MISSING_OR_INVALID",`request() ${JSON.stringify(n)}`);throw new Error(d)}if(!Ad(a,c,n.method)){const{message:d}=ie("MISSING_OR_INVALID",`request() method: ${n.method}`);throw new Error(d)}if(h&&!Rd(h,Ji)){const{message:d}=ie("MISSING_OR_INVALID",`request() expiry: ${h}. Expiry must be a number (in seconds) between ${Ji.min} and ${Ji.max}`);throw new Error(d)}},this.isValidRespond=async r=>{if(!_t(r)){const{message:c}=ie("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(c)}const{topic:i,response:n}=r;if(await this.isValidSessionTopic(i),!Id(n)){const{message:c}=ie("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(n)}`);throw new Error(c)}},this.isValidPing=async r=>{if(!_t(r)){const{message:n}=ie("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(n)}const{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async r=>{if(!_t(r)){const{message:a}=ie("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:i,event:n,chainId:c}=r;await this.isValidSessionTopic(i);const{namespaces:h}=this.client.session.get(i);if(!ks(h,c)){const{message:a}=ie("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(a)}if(!Od(n)){const{message:a}=ie("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(a)}if(!Cd(h,c,n.name)){const{message:a}=ie("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw new Error(a)}},this.isValidDisconnect=async r=>{if(!_t(r)){const{message:n}=ie("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(n)}const{topic:i}=r;await this.isValidSessionOrPairingTopic(i)},this.getVerifyContext=async(r,i)=>{const n={verified:{verifyUrl:i.verifyUrl||"",validation:"UNKNOWN",origin:i.url||""}};try{const c=await this.client.core.verify.resolve({attestationId:r,verifyUrl:i.verifyUrl});c&&(n.verified.origin=c,n.verified.validation=c===i.url?"VALID":"INVALID")}catch(c){this.client.logger.error(c)}return this.client.logger.info(`Verify context: ${JSON.stringify(n)}`),n},this.validateSessionProps=(r,i)=>{Object.values(r).forEach(n=>{if(!st(n,!1)){const{message:c}=ie("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(n)}`);throw new Error(c)}})}}isInitialized(){if(!this.initialized){const{message:e}=ie("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(nt.message,async e=>{const{topic:r,message:i}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(i)))return;const n=await this.client.core.crypto.decode(r,i);Ln(n)?(this.client.core.history.set(r,n),this.onRelayEventRequest({topic:r,payload:n})):Mn(n)&&(await this.client.core.history.resolve(n),this.onRelayEventResponse({topic:r,payload:n}))})}registerExpirerEvents(){this.client.core.expirer.on(Ct.expired,async e=>{const{topic:r,id:i}=Ra(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,ie("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}isValidPairingTopic(e){if(!st(e,!1)){const{message:r}=ie("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=ie("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Zt(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=ie("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!st(e,!1)){const{message:r}=ie("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=ie("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Zt(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:r}=ie("EXPIRED",`session topic: ${e}`);throw new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(st(e,!1)){const{message:r}=ie("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=ie("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!Dd(e)){const{message:r}=ie("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=ie("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Zt(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:r}=ie("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class zg extends Pi{constructor(e,r){super(e,r,Cg,$n),this.core=e,this.logger=r}}class Kg extends Pi{constructor(e,r){super(e,r,Ng,$n),this.core=e,this.logger=r}}class qg extends Pi{constructor(e,r){super(e,r,Pg,$n,i=>i.id),this.core=e,this.logger=r}}class jn extends Vu{constructor(e){super(e),this.protocol=tc,this.version=rc,this.name=Yi.name,this.events=new Ft.EventEmitter,this.on=(i,n)=>this.events.on(i,n),this.once=(i,n)=>this.events.once(i,n),this.off=(i,n)=>this.events.off(i,n),this.removeListener=(i,n)=>this.events.removeListener(i,n),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(n){throw this.logger.error(n.message),n}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(n){throw this.logger.error(n.message),n}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(n){throw this.logger.error(n.message),n}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(n){throw this.logger.error(n.message),n}},this.update=async i=>{try{return await this.engine.update(i)}catch(n){throw this.logger.error(n.message),n}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(n){throw this.logger.error(n.message),n}},this.request=async i=>{try{return await this.engine.request(i)}catch(n){throw this.logger.error(n.message),n}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(n){throw this.logger.error(n.message),n}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(n){throw this.logger.error(n.message),n}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(n){throw this.logger.error(n.message),n}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(n){throw this.logger.error(n.message),n}},this.find=i=>{try{return this.engine.find(i)}catch(n){throw this.logger.error(n.message),n}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.name=(e==null?void 0:e.name)||Yi.name,this.metadata=(e==null?void 0:e.metadata)||Kf();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:Oe.pino(Oe.getDefaultLoggerOptions({level:(e==null?void 0:e.logger)||Yi.logger}));this.core=(e==null?void 0:e.core)||new Ag(e),this.logger=Oe.generateChildLogger(r,this.name),this.session=new Kg(this.core,this.logger),this.proposal=new zg(this.core,this.logger),this.pendingRequest=new qg(this.core,this.logger),this.engine=new jg(this)}static async init(e){const r=new jn(e);return await r.initialize(),r}get context(){return Oe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const Vg="modulepreload",Hg=function(t){return"/"+t},Eo={},kg=function(e,r,i){if(!r||r.length===0)return e();const n=document.getElementsByTagName("link");return Promise.all(r.map(c=>{if(c=Hg(c),c in Eo)return;Eo[c]=!0;const h=c.endsWith(".css"),a=h?'[rel="stylesheet"]':"";if(!!i)for(let m=n.length-1;m>=0;m--){const I=n[m];if(I.href===c&&(!h||I.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${a}`))return;const y=document.createElement("link");if(y.rel=h?"stylesheet":Vg,h||(y.as="script",y.crossOrigin=""),y.href=c,document.head.appendChild(y),h)return new Promise((m,I)=>{y.addEventListener("load",m),y.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${c}`)))})})).then(()=>e())},Wg=Symbol(),vo=Object.getPrototypeOf,yn=new WeakMap,Gg=t=>t&&(yn.has(t)?yn.get(t):vo(t)===Object.prototype||vo(t)===Array.prototype),Yg=t=>Gg(t)&&t[Wg]||null,Do=(t,e=!0)=>{yn.set(t,e)},Zi=t=>typeof t=="object"&&t!==null,Qt=new WeakMap,li=new WeakSet,Jg=(t=Object.is,e=(y,m)=>new Proxy(y,m),r=y=>Zi(y)&&!li.has(y)&&(Array.isArray(y)||!(Symbol.iterator in y))&&!(y instanceof WeakMap)&&!(y instanceof WeakSet)&&!(y instanceof Error)&&!(y instanceof Number)&&!(y instanceof Date)&&!(y instanceof String)&&!(y instanceof RegExp)&&!(y instanceof ArrayBuffer),i=y=>{switch(y.status){case"fulfilled":return y.value;case"rejected":throw y.reason;default:throw y}},n=new WeakMap,c=(y,m,I=i)=>{const M=n.get(y);if((M==null?void 0:M[0])===m)return M[1];const N=Array.isArray(y)?[]:Object.create(Object.getPrototypeOf(y));return Do(N,!0),n.set(y,[m,N]),Reflect.ownKeys(y).forEach(T=>{if(Object.getOwnPropertyDescriptor(N,T))return;const j=Reflect.get(y,T),q={value:j,enumerable:!0,configurable:!0};if(li.has(j))Do(j,!1);else if(j instanceof Promise)delete q.value,q.get=()=>I(j);else if(Qt.has(j)){const[X,C]=Qt.get(j);q.value=c(X,C(),I)}Object.defineProperty(N,T,q)}),N},h=new WeakMap,a=[1,1],d=y=>{if(!Zi(y))throw new Error("object required");const m=h.get(y);if(m)return m;let I=a[0];const M=new Set,N=(z,b=++a[0])=>{I!==b&&(I=b,M.forEach(S=>S(z,b)))};let T=a[1];const j=(z=++a[1])=>(T!==z&&!M.size&&(T=z,X.forEach(([b])=>{const S=b[1](z);S>I&&(I=S)})),I),q=z=>(b,S)=>{const F=[...b];F[1]=[z,...F[1]],N(F,S)},X=new Map,C=(z,b)=>{if(({VITE_PROJECT_ID:"f8ecda7a059571686392adfb46ff2b1b",VITE_RELAY_URL:"wss://relay.walletconnect.com",VITE_CHAIN_ID:"chia:testnet",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&X.has(z))throw new Error("prop listener already exists");if(M.size){const S=b[3](q(z));X.set(z,[b,S])}else X.set(z,[b])},R=z=>{var b;const S=X.get(z);S&&(X.delete(z),(b=S[1])==null||b.call(S))},v=z=>(M.add(z),M.size===1&&X.forEach(([S,F],H)=>{if(({VITE_PROJECT_ID:"f8ecda7a059571686392adfb46ff2b1b",VITE_RELAY_URL:"wss://relay.walletconnect.com",VITE_CHAIN_ID:"chia:testnet",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&F)throw new Error("remove already exists");const E=S[3](q(H));X.set(H,[S,E])}),()=>{M.delete(z),M.size===0&&X.forEach(([S,F],H)=>{F&&(F(),X.set(H,[S]))})}),x=Array.isArray(y)?[]:Object.create(Object.getPrototypeOf(y)),o=e(x,{deleteProperty(z,b){const S=Reflect.get(z,b);R(b);const F=Reflect.deleteProperty(z,b);return F&&N(["delete",[b],S]),F},set(z,b,S,F){const H=Reflect.has(z,b),E=Reflect.get(z,b,F);if(H&&(t(E,S)||h.has(S)&&t(E,h.get(S))))return!0;R(b),Zi(S)&&(S=Yg(S)||S);let D=S;if(S instanceof Promise)S.then(G=>{S.status="fulfilled",S.value=G,N(["resolve",[b],G])}).catch(G=>{S.status="rejected",S.reason=G,N(["reject",[b],G])});else{!Qt.has(S)&&r(S)&&(D=d(S));const G=!li.has(D)&&Qt.get(D);G&&C(b,G)}return Reflect.set(z,b,D,F),N(["set",[b],S,E]),!0}});h.set(y,o);const p=[x,j,c,v];return Qt.set(o,p),Reflect.ownKeys(y).forEach(z=>{const b=Object.getOwnPropertyDescriptor(y,z);"value"in b&&(o[z]=y[z],delete b.value,delete b.writable),Object.defineProperty(x,z,b)}),o})=>[d,Qt,li,t,e,r,i,n,c,h,a],[Xg]=Jg();function jt(t={}){return Xg(t)}function Wt(t,e,r){const i=Qt.get(t);({VITE_PROJECT_ID:"f8ecda7a059571686392adfb46ff2b1b",VITE_RELAY_URL:"wss://relay.walletconnect.com",VITE_CHAIN_ID:"chia:testnet",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&!i&&console.warn("Please use proxy object");let n;const c=[],h=i[3];let a=!1;const y=h(m=>{if(c.push(m),r){e(c.splice(0));return}n||(n=Promise.resolve().then(()=>{n=void 0,a&&e(c.splice(0))}))});return a=!0,()=>{a=!1,y()}}function Zg(t,e){const r=Qt.get(t);({VITE_PROJECT_ID:"f8ecda7a059571686392adfb46ff2b1b",VITE_RELAY_URL:"wss://relay.walletconnect.com",VITE_CHAIN_ID:"chia:testnet",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&!r&&console.warn("Please use proxy object");const[i,n,c]=r;return c(i,n(),e)}var nc={},Fi={};Fi.byteLength=t1;Fi.toByteArray=i1;Fi.fromByteArray=o1;var $t=[],Tt=[],Qg=typeof Uint8Array<"u"?Uint8Array:Array,Qi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Er=0,e1=Qi.length;Er<e1;++Er)$t[Er]=Qi[Er],Tt[Qi.charCodeAt(Er)]=Er;Tt["-".charCodeAt(0)]=62;Tt["_".charCodeAt(0)]=63;function sc(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var i=r===e?0:4-r%4;return[r,i]}function t1(t){var e=sc(t),r=e[0],i=e[1];return(r+i)*3/4-i}function r1(t,e,r){return(e+r)*3/4-r}function i1(t){var e,r=sc(t),i=r[0],n=r[1],c=new Qg(r1(t,i,n)),h=0,a=n>0?i-4:i,d;for(d=0;d<a;d+=4)e=Tt[t.charCodeAt(d)]<<18|Tt[t.charCodeAt(d+1)]<<12|Tt[t.charCodeAt(d+2)]<<6|Tt[t.charCodeAt(d+3)],c[h++]=e>>16&255,c[h++]=e>>8&255,c[h++]=e&255;return n===2&&(e=Tt[t.charCodeAt(d)]<<2|Tt[t.charCodeAt(d+1)]>>4,c[h++]=e&255),n===1&&(e=Tt[t.charCodeAt(d)]<<10|Tt[t.charCodeAt(d+1)]<<4|Tt[t.charCodeAt(d+2)]>>2,c[h++]=e>>8&255,c[h++]=e&255),c}function n1(t){return $t[t>>18&63]+$t[t>>12&63]+$t[t>>6&63]+$t[t&63]}function s1(t,e,r){for(var i,n=[],c=e;c<r;c+=3)i=(t[c]<<16&16711680)+(t[c+1]<<8&65280)+(t[c+2]&255),n.push(n1(i));return n.join("")}function o1(t){for(var e,r=t.length,i=r%3,n=[],c=16383,h=0,a=r-i;h<a;h+=c)n.push(s1(t,h,h+c>a?a:h+c));return i===1?(e=t[r-1],n.push($t[e>>2]+$t[e<<4&63]+"==")):i===2&&(e=(t[r-2]<<8)+t[r-1],n.push($t[e>>10]+$t[e>>4&63]+$t[e<<2&63]+"=")),n.join("")}var zn={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */zn.read=function(t,e,r,i,n){var c,h,a=n*8-i-1,d=(1<<a)-1,y=d>>1,m=-7,I=r?n-1:0,M=r?-1:1,N=t[e+I];for(I+=M,c=N&(1<<-m)-1,N>>=-m,m+=a;m>0;c=c*256+t[e+I],I+=M,m-=8);for(h=c&(1<<-m)-1,c>>=-m,m+=i;m>0;h=h*256+t[e+I],I+=M,m-=8);if(c===0)c=1-y;else{if(c===d)return h?NaN:(N?-1:1)*(1/0);h=h+Math.pow(2,i),c=c-y}return(N?-1:1)*h*Math.pow(2,c-i)};zn.write=function(t,e,r,i,n,c){var h,a,d,y=c*8-n-1,m=(1<<y)-1,I=m>>1,M=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,N=i?0:c-1,T=i?1:-1,j=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,h=m):(h=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-h))<1&&(h--,d*=2),h+I>=1?e+=M/d:e+=M*Math.pow(2,1-I),e*d>=2&&(h++,d/=2),h+I>=m?(a=0,h=m):h+I>=1?(a=(e*d-1)*Math.pow(2,n),h=h+I):(a=e*Math.pow(2,I-1)*Math.pow(2,n),h=0));n>=8;t[r+N]=a&255,N+=T,a/=256,n-=8);for(h=h<<n|a,y+=n;y>0;t[r+N]=h&255,N+=T,h/=256,y-=8);t[r+N-T]|=j*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=Fi,r=zn,i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=C,t.INSPECT_MAX_BYTES=50;const n=2147483647;t.kMaxLength=n,a.TYPED_ARRAY_SUPPORT=c(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const f=new Uint8Array(1),s={foo:function(){return 42}};return Object.setPrototypeOf(s,Uint8Array.prototype),Object.setPrototypeOf(f,s),f.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function h(f){if(f>n)throw new RangeError('The value "'+f+'" is invalid for option "size"');const s=new Uint8Array(f);return Object.setPrototypeOf(s,a.prototype),s}function a(f,s,u){if(typeof f=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return I(f)}return d(f,s,u)}a.poolSize=8192;function d(f,s,u){if(typeof f=="string")return M(f,s);if(ArrayBuffer.isView(f))return T(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(fe(f,ArrayBuffer)||f&&fe(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(fe(f,SharedArrayBuffer)||f&&fe(f.buffer,SharedArrayBuffer)))return j(f,s,u);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const g=f.valueOf&&f.valueOf();if(g!=null&&g!==f)return a.from(g,s,u);const A=q(f);if(A)return A;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return a.from(f[Symbol.toPrimitive]("string"),s,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}a.from=function(f,s,u){return d(f,s,u)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function y(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function m(f,s,u){return y(f),f<=0?h(f):s!==void 0?typeof u=="string"?h(f).fill(s,u):h(f).fill(s):h(f)}a.alloc=function(f,s,u){return m(f,s,u)};function I(f){return y(f),h(f<0?0:X(f)|0)}a.allocUnsafe=function(f){return I(f)},a.allocUnsafeSlow=function(f){return I(f)};function M(f,s){if((typeof s!="string"||s==="")&&(s="utf8"),!a.isEncoding(s))throw new TypeError("Unknown encoding: "+s);const u=R(f,s)|0;let g=h(u);const A=g.write(f,s);return A!==u&&(g=g.slice(0,A)),g}function N(f){const s=f.length<0?0:X(f.length)|0,u=h(s);for(let g=0;g<s;g+=1)u[g]=f[g]&255;return u}function T(f){if(fe(f,Uint8Array)){const s=new Uint8Array(f);return j(s.buffer,s.byteOffset,s.byteLength)}return N(f)}function j(f,s,u){if(s<0||f.byteLength<s)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<s+(u||0))throw new RangeError('"length" is outside of buffer bounds');let g;return s===void 0&&u===void 0?g=new Uint8Array(f):u===void 0?g=new Uint8Array(f,s):g=new Uint8Array(f,s,u),Object.setPrototypeOf(g,a.prototype),g}function q(f){if(a.isBuffer(f)){const s=X(f.length)|0,u=h(s);return u.length===0||f.copy(u,0,0,s),u}if(f.length!==void 0)return typeof f.length!="number"||ye(f.length)?h(0):N(f);if(f.type==="Buffer"&&Array.isArray(f.data))return N(f.data)}function X(f){if(f>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return f|0}function C(f){return+f!=f&&(f=0),a.alloc(+f)}a.isBuffer=function(s){return s!=null&&s._isBuffer===!0&&s!==a.prototype},a.compare=function(s,u){if(fe(s,Uint8Array)&&(s=a.from(s,s.offset,s.byteLength)),fe(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),!a.isBuffer(s)||!a.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(s===u)return 0;let g=s.length,A=u.length;for(let L=0,K=Math.min(g,A);L<K;++L)if(s[L]!==u[L]){g=s[L],A=u[L];break}return g<A?-1:A<g?1:0},a.isEncoding=function(s){switch(String(s).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(s,u){if(!Array.isArray(s))throw new TypeError('"list" argument must be an Array of Buffers');if(s.length===0)return a.alloc(0);let g;if(u===void 0)for(u=0,g=0;g<s.length;++g)u+=s[g].length;const A=a.allocUnsafe(u);let L=0;for(g=0;g<s.length;++g){let K=s[g];if(fe(K,Uint8Array))L+K.length>A.length?(a.isBuffer(K)||(K=a.from(K)),K.copy(A,L)):Uint8Array.prototype.set.call(A,K,L);else if(a.isBuffer(K))K.copy(A,L);else throw new TypeError('"list" argument must be an Array of Buffers');L+=K.length}return A};function R(f,s){if(a.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||fe(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);const u=f.length,g=arguments.length>2&&arguments[2]===!0;if(!g&&u===0)return 0;let A=!1;for(;;)switch(s){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return xe(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return Ee(f).length;default:if(A)return g?-1:xe(f).length;s=(""+s).toLowerCase(),A=!0}}a.byteLength=R;function v(f,s,u){let g=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,s>>>=0,u<=s))return"";for(f||(f="utf8");;)switch(f){case"hex":return V(this,s,u);case"utf8":case"utf-8":return E(this,s,u);case"ascii":return Y(this,s,u);case"latin1":case"binary":return W(this,s,u);case"base64":return H(this,s,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,s,u);default:if(g)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),g=!0}}a.prototype._isBuffer=!0;function x(f,s,u){const g=f[s];f[s]=f[u],f[u]=g}a.prototype.swap16=function(){const s=this.length;if(s%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<s;u+=2)x(this,u,u+1);return this},a.prototype.swap32=function(){const s=this.length;if(s%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<s;u+=4)x(this,u,u+3),x(this,u+1,u+2);return this},a.prototype.swap64=function(){const s=this.length;if(s%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<s;u+=8)x(this,u,u+7),x(this,u+1,u+6),x(this,u+2,u+5),x(this,u+3,u+4);return this},a.prototype.toString=function(){const s=this.length;return s===0?"":arguments.length===0?E(this,0,s):v.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(s){if(!a.isBuffer(s))throw new TypeError("Argument must be a Buffer");return this===s?!0:a.compare(this,s)===0},a.prototype.inspect=function(){let s="";const u=t.INSPECT_MAX_BYTES;return s=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(s+=" ... "),"<Buffer "+s+">"},i&&(a.prototype[i]=a.prototype.inspect),a.prototype.compare=function(s,u,g,A,L){if(fe(s,Uint8Array)&&(s=a.from(s,s.offset,s.byteLength)),!a.isBuffer(s))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof s);if(u===void 0&&(u=0),g===void 0&&(g=s?s.length:0),A===void 0&&(A=0),L===void 0&&(L=this.length),u<0||g>s.length||A<0||L>this.length)throw new RangeError("out of range index");if(A>=L&&u>=g)return 0;if(A>=L)return-1;if(u>=g)return 1;if(u>>>=0,g>>>=0,A>>>=0,L>>>=0,this===s)return 0;let K=L-A,se=g-u;const ce=Math.min(K,se),ve=this.slice(A,L),Ie=s.slice(u,g);for(let De=0;De<ce;++De)if(ve[De]!==Ie[De]){K=ve[De],se=Ie[De];break}return K<se?-1:se<K?1:0};function w(f,s,u,g,A){if(f.length===0)return-1;if(typeof u=="string"?(g=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,ye(u)&&(u=A?0:f.length-1),u<0&&(u=f.length+u),u>=f.length){if(A)return-1;u=f.length-1}else if(u<0)if(A)u=0;else return-1;if(typeof s=="string"&&(s=a.from(s,g)),a.isBuffer(s))return s.length===0?-1:o(f,s,u,g,A);if(typeof s=="number")return s=s&255,typeof Uint8Array.prototype.indexOf=="function"?A?Uint8Array.prototype.indexOf.call(f,s,u):Uint8Array.prototype.lastIndexOf.call(f,s,u):o(f,[s],u,g,A);throw new TypeError("val must be string, number or Buffer")}function o(f,s,u,g,A){let L=1,K=f.length,se=s.length;if(g!==void 0&&(g=String(g).toLowerCase(),g==="ucs2"||g==="ucs-2"||g==="utf16le"||g==="utf-16le")){if(f.length<2||s.length<2)return-1;L=2,K/=2,se/=2,u/=2}function ce(Ie,De){return L===1?Ie[De]:Ie.readUInt16BE(De*L)}let ve;if(A){let Ie=-1;for(ve=u;ve<K;ve++)if(ce(f,ve)===ce(s,Ie===-1?0:ve-Ie)){if(Ie===-1&&(Ie=ve),ve-Ie+1===se)return Ie*L}else Ie!==-1&&(ve-=ve-Ie),Ie=-1}else for(u+se>K&&(u=K-se),ve=u;ve>=0;ve--){let Ie=!0;for(let De=0;De<se;De++)if(ce(f,ve+De)!==ce(s,De)){Ie=!1;break}if(Ie)return ve}return-1}a.prototype.includes=function(s,u,g){return this.indexOf(s,u,g)!==-1},a.prototype.indexOf=function(s,u,g){return w(this,s,u,g,!0)},a.prototype.lastIndexOf=function(s,u,g){return w(this,s,u,g,!1)};function p(f,s,u,g){u=Number(u)||0;const A=f.length-u;g?(g=Number(g),g>A&&(g=A)):g=A;const L=s.length;g>L/2&&(g=L/2);let K;for(K=0;K<g;++K){const se=parseInt(s.substr(K*2,2),16);if(ye(se))return K;f[u+K]=se}return K}function z(f,s,u,g){return be(xe(s,f.length-u),f,u,g)}function b(f,s,u,g){return be(Pe(s),f,u,g)}function S(f,s,u,g){return be(Ee(s),f,u,g)}function F(f,s,u,g){return be(Ne(s,f.length-u),f,u,g)}a.prototype.write=function(s,u,g,A){if(u===void 0)A="utf8",g=this.length,u=0;else if(g===void 0&&typeof u=="string")A=u,g=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(g)?(g=g>>>0,A===void 0&&(A="utf8")):(A=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const L=this.length-u;if((g===void 0||g>L)&&(g=L),s.length>0&&(g<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");A||(A="utf8");let K=!1;for(;;)switch(A){case"hex":return p(this,s,u,g);case"utf8":case"utf-8":return z(this,s,u,g);case"ascii":case"latin1":case"binary":return b(this,s,u,g);case"base64":return S(this,s,u,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,s,u,g);default:if(K)throw new TypeError("Unknown encoding: "+A);A=(""+A).toLowerCase(),K=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function H(f,s,u){return s===0&&u===f.length?e.fromByteArray(f):e.fromByteArray(f.slice(s,u))}function E(f,s,u){u=Math.min(f.length,u);const g=[];let A=s;for(;A<u;){const L=f[A];let K=null,se=L>239?4:L>223?3:L>191?2:1;if(A+se<=u){let ce,ve,Ie,De;switch(se){case 1:L<128&&(K=L);break;case 2:ce=f[A+1],(ce&192)===128&&(De=(L&31)<<6|ce&63,De>127&&(K=De));break;case 3:ce=f[A+1],ve=f[A+2],(ce&192)===128&&(ve&192)===128&&(De=(L&15)<<12|(ce&63)<<6|ve&63,De>2047&&(De<55296||De>57343)&&(K=De));break;case 4:ce=f[A+1],ve=f[A+2],Ie=f[A+3],(ce&192)===128&&(ve&192)===128&&(Ie&192)===128&&(De=(L&15)<<18|(ce&63)<<12|(ve&63)<<6|Ie&63,De>65535&&De<1114112&&(K=De))}}K===null?(K=65533,se=1):K>65535&&(K-=65536,g.push(K>>>10&1023|55296),K=56320|K&1023),g.push(K),A+=se}return G(g)}const D=4096;function G(f){const s=f.length;if(s<=D)return String.fromCharCode.apply(String,f);let u="",g=0;for(;g<s;)u+=String.fromCharCode.apply(String,f.slice(g,g+=D));return u}function Y(f,s,u){let g="";u=Math.min(f.length,u);for(let A=s;A<u;++A)g+=String.fromCharCode(f[A]&127);return g}function W(f,s,u){let g="";u=Math.min(f.length,u);for(let A=s;A<u;++A)g+=String.fromCharCode(f[A]);return g}function V(f,s,u){const g=f.length;(!s||s<0)&&(s=0),(!u||u<0||u>g)&&(u=g);let A="";for(let L=s;L<u;++L)A+=me[f[L]];return A}function k(f,s,u){const g=f.slice(s,u);let A="";for(let L=0;L<g.length-1;L+=2)A+=String.fromCharCode(g[L]+g[L+1]*256);return A}a.prototype.slice=function(s,u){const g=this.length;s=~~s,u=u===void 0?g:~~u,s<0?(s+=g,s<0&&(s=0)):s>g&&(s=g),u<0?(u+=g,u<0&&(u=0)):u>g&&(u=g),u<s&&(u=s);const A=this.subarray(s,u);return Object.setPrototypeOf(A,a.prototype),A};function J(f,s,u){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+s>u)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(s,u,g){s=s>>>0,u=u>>>0,g||J(s,u,this.length);let A=this[s],L=1,K=0;for(;++K<u&&(L*=256);)A+=this[s+K]*L;return A},a.prototype.readUintBE=a.prototype.readUIntBE=function(s,u,g){s=s>>>0,u=u>>>0,g||J(s,u,this.length);let A=this[s+--u],L=1;for(;u>0&&(L*=256);)A+=this[s+--u]*L;return A},a.prototype.readUint8=a.prototype.readUInt8=function(s,u){return s=s>>>0,u||J(s,1,this.length),this[s]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(s,u){return s=s>>>0,u||J(s,2,this.length),this[s]|this[s+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(s,u){return s=s>>>0,u||J(s,2,this.length),this[s]<<8|this[s+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(s,u){return s=s>>>0,u||J(s,4,this.length),(this[s]|this[s+1]<<8|this[s+2]<<16)+this[s+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(s,u){return s=s>>>0,u||J(s,4,this.length),this[s]*16777216+(this[s+1]<<16|this[s+2]<<8|this[s+3])},a.prototype.readBigUInt64LE=he(function(s){s=s>>>0,re(s,"offset");const u=this[s],g=this[s+7];(u===void 0||g===void 0)&&de(s,this.length-8);const A=u+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24,L=this[++s]+this[++s]*2**8+this[++s]*2**16+g*2**24;return BigInt(A)+(BigInt(L)<<BigInt(32))}),a.prototype.readBigUInt64BE=he(function(s){s=s>>>0,re(s,"offset");const u=this[s],g=this[s+7];(u===void 0||g===void 0)&&de(s,this.length-8);const A=u*2**24+this[++s]*2**16+this[++s]*2**8+this[++s],L=this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+g;return(BigInt(A)<<BigInt(32))+BigInt(L)}),a.prototype.readIntLE=function(s,u,g){s=s>>>0,u=u>>>0,g||J(s,u,this.length);let A=this[s],L=1,K=0;for(;++K<u&&(L*=256);)A+=this[s+K]*L;return L*=128,A>=L&&(A-=Math.pow(2,8*u)),A},a.prototype.readIntBE=function(s,u,g){s=s>>>0,u=u>>>0,g||J(s,u,this.length);let A=u,L=1,K=this[s+--A];for(;A>0&&(L*=256);)K+=this[s+--A]*L;return L*=128,K>=L&&(K-=Math.pow(2,8*u)),K},a.prototype.readInt8=function(s,u){return s=s>>>0,u||J(s,1,this.length),this[s]&128?(255-this[s]+1)*-1:this[s]},a.prototype.readInt16LE=function(s,u){s=s>>>0,u||J(s,2,this.length);const g=this[s]|this[s+1]<<8;return g&32768?g|4294901760:g},a.prototype.readInt16BE=function(s,u){s=s>>>0,u||J(s,2,this.length);const g=this[s+1]|this[s]<<8;return g&32768?g|4294901760:g},a.prototype.readInt32LE=function(s,u){return s=s>>>0,u||J(s,4,this.length),this[s]|this[s+1]<<8|this[s+2]<<16|this[s+3]<<24},a.prototype.readInt32BE=function(s,u){return s=s>>>0,u||J(s,4,this.length),this[s]<<24|this[s+1]<<16|this[s+2]<<8|this[s+3]},a.prototype.readBigInt64LE=he(function(s){s=s>>>0,re(s,"offset");const u=this[s],g=this[s+7];(u===void 0||g===void 0)&&de(s,this.length-8);const A=this[s+4]+this[s+5]*2**8+this[s+6]*2**16+(g<<24);return(BigInt(A)<<BigInt(32))+BigInt(u+this[++s]*2**8+this[++s]*2**16+this[++s]*2**24)}),a.prototype.readBigInt64BE=he(function(s){s=s>>>0,re(s,"offset");const u=this[s],g=this[s+7];(u===void 0||g===void 0)&&de(s,this.length-8);const A=(u<<24)+this[++s]*2**16+this[++s]*2**8+this[++s];return(BigInt(A)<<BigInt(32))+BigInt(this[++s]*2**24+this[++s]*2**16+this[++s]*2**8+g)}),a.prototype.readFloatLE=function(s,u){return s=s>>>0,u||J(s,4,this.length),r.read(this,s,!0,23,4)},a.prototype.readFloatBE=function(s,u){return s=s>>>0,u||J(s,4,this.length),r.read(this,s,!1,23,4)},a.prototype.readDoubleLE=function(s,u){return s=s>>>0,u||J(s,8,this.length),r.read(this,s,!0,52,8)},a.prototype.readDoubleBE=function(s,u){return s=s>>>0,u||J(s,8,this.length),r.read(this,s,!1,52,8)};function te(f,s,u,g,A,L){if(!a.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>A||s<L)throw new RangeError('"value" argument is out of bounds');if(u+g>f.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(s,u,g,A){if(s=+s,u=u>>>0,g=g>>>0,!A){const se=Math.pow(2,8*g)-1;te(this,s,u,g,se,0)}let L=1,K=0;for(this[u]=s&255;++K<g&&(L*=256);)this[u+K]=s/L&255;return u+g},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(s,u,g,A){if(s=+s,u=u>>>0,g=g>>>0,!A){const se=Math.pow(2,8*g)-1;te(this,s,u,g,se,0)}let L=g-1,K=1;for(this[u+L]=s&255;--L>=0&&(K*=256);)this[u+L]=s/K&255;return u+g},a.prototype.writeUint8=a.prototype.writeUInt8=function(s,u,g){return s=+s,u=u>>>0,g||te(this,s,u,1,255,0),this[u]=s&255,u+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(s,u,g){return s=+s,u=u>>>0,g||te(this,s,u,2,65535,0),this[u]=s&255,this[u+1]=s>>>8,u+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(s,u,g){return s=+s,u=u>>>0,g||te(this,s,u,2,65535,0),this[u]=s>>>8,this[u+1]=s&255,u+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(s,u,g){return s=+s,u=u>>>0,g||te(this,s,u,4,4294967295,0),this[u+3]=s>>>24,this[u+2]=s>>>16,this[u+1]=s>>>8,this[u]=s&255,u+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(s,u,g){return s=+s,u=u>>>0,g||te(this,s,u,4,4294967295,0),this[u]=s>>>24,this[u+1]=s>>>16,this[u+2]=s>>>8,this[u+3]=s&255,u+4};function Q(f,s,u,g,A){ee(s,g,A,f,u,7);let L=Number(s&BigInt(4294967295));f[u++]=L,L=L>>8,f[u++]=L,L=L>>8,f[u++]=L,L=L>>8,f[u++]=L;let K=Number(s>>BigInt(32)&BigInt(4294967295));return f[u++]=K,K=K>>8,f[u++]=K,K=K>>8,f[u++]=K,K=K>>8,f[u++]=K,u}function ae(f,s,u,g,A){ee(s,g,A,f,u,7);let L=Number(s&BigInt(4294967295));f[u+7]=L,L=L>>8,f[u+6]=L,L=L>>8,f[u+5]=L,L=L>>8,f[u+4]=L;let K=Number(s>>BigInt(32)&BigInt(4294967295));return f[u+3]=K,K=K>>8,f[u+2]=K,K=K>>8,f[u+1]=K,K=K>>8,f[u]=K,u+8}a.prototype.writeBigUInt64LE=he(function(s,u=0){return Q(this,s,u,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=he(function(s,u=0){return ae(this,s,u,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(s,u,g,A){if(s=+s,u=u>>>0,!A){const ce=Math.pow(2,8*g-1);te(this,s,u,g,ce-1,-ce)}let L=0,K=1,se=0;for(this[u]=s&255;++L<g&&(K*=256);)s<0&&se===0&&this[u+L-1]!==0&&(se=1),this[u+L]=(s/K>>0)-se&255;return u+g},a.prototype.writeIntBE=function(s,u,g,A){if(s=+s,u=u>>>0,!A){const ce=Math.pow(2,8*g-1);te(this,s,u,g,ce-1,-ce)}let L=g-1,K=1,se=0;for(this[u+L]=s&255;--L>=0&&(K*=256);)s<0&&se===0&&this[u+L+1]!==0&&(se=1),this[u+L]=(s/K>>0)-se&255;return u+g},a.prototype.writeInt8=function(s,u,g){return s=+s,u=u>>>0,g||te(this,s,u,1,127,-128),s<0&&(s=255+s+1),this[u]=s&255,u+1},a.prototype.writeInt16LE=function(s,u,g){return s=+s,u=u>>>0,g||te(this,s,u,2,32767,-32768),this[u]=s&255,this[u+1]=s>>>8,u+2},a.prototype.writeInt16BE=function(s,u,g){return s=+s,u=u>>>0,g||te(this,s,u,2,32767,-32768),this[u]=s>>>8,this[u+1]=s&255,u+2},a.prototype.writeInt32LE=function(s,u,g){return s=+s,u=u>>>0,g||te(this,s,u,4,2147483647,-2147483648),this[u]=s&255,this[u+1]=s>>>8,this[u+2]=s>>>16,this[u+3]=s>>>24,u+4},a.prototype.writeInt32BE=function(s,u,g){return s=+s,u=u>>>0,g||te(this,s,u,4,2147483647,-2147483648),s<0&&(s=4294967295+s+1),this[u]=s>>>24,this[u+1]=s>>>16,this[u+2]=s>>>8,this[u+3]=s&255,u+4},a.prototype.writeBigInt64LE=he(function(s,u=0){return Q(this,s,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=he(function(s,u=0){return ae(this,s,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ne(f,s,u,g,A,L){if(u+g>f.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function le(f,s,u,g,A){return s=+s,u=u>>>0,A||ne(f,s,u,4),r.write(f,s,u,g,23,4),u+4}a.prototype.writeFloatLE=function(s,u,g){return le(this,s,u,!0,g)},a.prototype.writeFloatBE=function(s,u,g){return le(this,s,u,!1,g)};function $(f,s,u,g,A){return s=+s,u=u>>>0,A||ne(f,s,u,8),r.write(f,s,u,g,52,8),u+8}a.prototype.writeDoubleLE=function(s,u,g){return $(this,s,u,!0,g)},a.prototype.writeDoubleBE=function(s,u,g){return $(this,s,u,!1,g)},a.prototype.copy=function(s,u,g,A){if(!a.isBuffer(s))throw new TypeError("argument should be a Buffer");if(g||(g=0),!A&&A!==0&&(A=this.length),u>=s.length&&(u=s.length),u||(u=0),A>0&&A<g&&(A=g),A===g||s.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("sourceEnd out of bounds");A>this.length&&(A=this.length),s.length-u<A-g&&(A=s.length-u+g);const L=A-g;return this===s&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,g,A):Uint8Array.prototype.set.call(s,this.subarray(g,A),u),L},a.prototype.fill=function(s,u,g,A){if(typeof s=="string"){if(typeof u=="string"?(A=u,u=0,g=this.length):typeof g=="string"&&(A=g,g=this.length),A!==void 0&&typeof A!="string")throw new TypeError("encoding must be a string");if(typeof A=="string"&&!a.isEncoding(A))throw new TypeError("Unknown encoding: "+A);if(s.length===1){const K=s.charCodeAt(0);(A==="utf8"&&K<128||A==="latin1")&&(s=K)}}else typeof s=="number"?s=s&255:typeof s=="boolean"&&(s=Number(s));if(u<0||this.length<u||this.length<g)throw new RangeError("Out of range index");if(g<=u)return this;u=u>>>0,g=g===void 0?this.length:g>>>0,s||(s=0);let L;if(typeof s=="number")for(L=u;L<g;++L)this[L]=s;else{const K=a.isBuffer(s)?s:a.from(s,A),se=K.length;if(se===0)throw new TypeError('The value "'+s+'" is invalid for argument "value"');for(L=0;L<g-u;++L)this[L+u]=K[L%se]}return this};const B={};function P(f,s,u){B[f]=class extends u{constructor(){super(),Object.defineProperty(this,"message",{value:s.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(A){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:A,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}P("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),P("ERR_INVALID_ARG_TYPE",function(f,s){return`The "${f}" argument must be of type number. Received type ${typeof s}`},TypeError),P("ERR_OUT_OF_RANGE",function(f,s,u){let g=`The value of "${f}" is out of range.`,A=u;return Number.isInteger(u)&&Math.abs(u)>2**32?A=l(String(u)):typeof u=="bigint"&&(A=String(u),(u>BigInt(2)**BigInt(32)||u<-(BigInt(2)**BigInt(32)))&&(A=l(A)),A+="n"),g+=` It must be ${s}. Received ${A}`,g},RangeError);function l(f){let s="",u=f.length;const g=f[0]==="-"?1:0;for(;u>=g+4;u-=3)s=`_${f.slice(u-3,u)}${s}`;return`${f.slice(0,u)}${s}`}function O(f,s,u){re(s,"offset"),(f[s]===void 0||f[s+u]===void 0)&&de(s,f.length-(u+1))}function ee(f,s,u,g,A,L){if(f>u||f<s){const K=typeof s=="bigint"?"n":"";let se;throw L>3?s===0||s===BigInt(0)?se=`>= 0${K} and < 2${K} ** ${(L+1)*8}${K}`:se=`>= -(2${K} ** ${(L+1)*8-1}${K}) and < 2 ** ${(L+1)*8-1}${K}`:se=`>= ${s}${K} and <= ${u}${K}`,new B.ERR_OUT_OF_RANGE("value",se,f)}O(g,A,L)}function re(f,s){if(typeof f!="number")throw new B.ERR_INVALID_ARG_TYPE(s,"number",f)}function de(f,s,u){throw Math.floor(f)!==f?(re(f,u),new B.ERR_OUT_OF_RANGE(u||"offset","an integer",f)):s<0?new B.ERR_BUFFER_OUT_OF_BOUNDS:new B.ERR_OUT_OF_RANGE(u||"offset",`>= ${u?1:0} and <= ${s}`,f)}const Se=/[^+/0-9A-Za-z-_]/g;function _e(f){if(f=f.split("=")[0],f=f.trim().replace(Se,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function xe(f,s){s=s||1/0;let u;const g=f.length;let A=null;const L=[];for(let K=0;K<g;++K){if(u=f.charCodeAt(K),u>55295&&u<57344){if(!A){if(u>56319){(s-=3)>-1&&L.push(239,191,189);continue}else if(K+1===g){(s-=3)>-1&&L.push(239,191,189);continue}A=u;continue}if(u<56320){(s-=3)>-1&&L.push(239,191,189),A=u;continue}u=(A-55296<<10|u-56320)+65536}else A&&(s-=3)>-1&&L.push(239,191,189);if(A=null,u<128){if((s-=1)<0)break;L.push(u)}else if(u<2048){if((s-=2)<0)break;L.push(u>>6|192,u&63|128)}else if(u<65536){if((s-=3)<0)break;L.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((s-=4)<0)break;L.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return L}function Pe(f){const s=[];for(let u=0;u<f.length;++u)s.push(f.charCodeAt(u)&255);return s}function Ne(f,s){let u,g,A;const L=[];for(let K=0;K<f.length&&!((s-=2)<0);++K)u=f.charCodeAt(K),g=u>>8,A=u%256,L.push(A),L.push(g);return L}function Ee(f){return e.toByteArray(_e(f))}function be(f,s,u,g){let A;for(A=0;A<g&&!(A+u>=s.length||A>=f.length);++A)s[A+u]=f[A];return A}function fe(f,s){return f instanceof s||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===s.name}function ye(f){return f!==f}const me=function(){const f="0123456789abcdef",s=new Array(256);for(let u=0;u<16;++u){const g=u*16;for(let A=0;A<16;++A)s[g+A]=f[u]+f[A]}return s}();function he(f){return typeof BigInt>"u"?pe:f}function pe(){throw new Error("BigInt not supported")}})(nc);let en;const kt={ethereumClient:void 0,setEthereumClient(t){en=t},client(){if(en)return en;throw new Error("ClientCtrl has no client set")}},rt=jt({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),fr={state:rt,subscribe(t){return Wt(rt,()=>t(rt))},push(t,e){t!==rt.view&&(rt.view=t,e&&(rt.data=e),rt.history.push(t))},reset(t){rt.view=t,rt.history=[t]},replace(t){rt.history.length>1&&(rt.history[rt.history.length-1]=t,rt.view=t)},goBack(){if(rt.history.length>1){rt.history.pop();const[t]=rt.history.slice(-1);rt.view=t}},setData(t){rt.data=t}},ut={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",W3M_VERSION:"W3M_VERSION",W3M_PREFER_INJECTED_URL_FLAG:"w3mPreferInjected",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return ut.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const t=navigator.userAgent.toLowerCase();return ut.isMobile()&&(t.includes("iphone")||t.includes("ipad"))},isHttpUrl(t){return t.startsWith("http://")||t.startsWith("https://")},isArray(t){return Array.isArray(t)&&t.length>0},formatNativeUrl(t,e,r){if(ut.isHttpUrl(t))return this.formatUniversalUrl(t,e,r);let i=t;i.includes("://")||(i=t.replaceAll("/","").replaceAll(":",""),i=`${i}://`),this.setWalletConnectDeepLink(i,r);const n=encodeURIComponent(e);return`${i}wc?uri=${n}`},formatUniversalUrl(t,e,r){if(!ut.isHttpUrl(t))return this.formatNativeUrl(t,e,r);let i=t;t.endsWith("/")&&(i=t.slice(0,-1)),this.setWalletConnectDeepLink(i,r);const n=encodeURIComponent(e);return`${i}/wc?uri=${n}`},async wait(t){return new Promise(e=>{setTimeout(e,t)})},openHref(t,e){window.open(t,e,"noreferrer noopener")},setWalletConnectDeepLink(t,e){localStorage.setItem(ut.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))},setWalletConnectAndroidDeepLink(t){const[e]=t.split("?");localStorage.setItem(ut.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))},removeWalletConnectDeepLink(){localStorage.removeItem(ut.WALLETCONNECT_DEEPLINK_CHOICE)},setWeb3ModalVersionInStorage(){typeof localStorage<"u"&&localStorage.setItem(ut.W3M_VERSION,"2.4.1")},getWalletRouterData(){var t;const e=(t=fr.state.data)==null?void 0:t.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e},getSwitchNetworkRouterData(){var t;const e=(t=fr.state.data)==null?void 0:t.SwitchNetwork;if(!e)throw new Error('Missing "SwitchNetwork" view data');return e},isPreferInjectedFlag(){return typeof location<"u"?new URLSearchParams(location.search).has(ut.W3M_PREFER_INJECTED_URL_FLAG):!1}},a1=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),pt=jt({enabled:a1,userSessionId:"",events:[],connectedWalletId:void 0}),c1={state:pt,subscribe(t){return Wt(pt.events,()=>t(Zg(pt.events[pt.events.length-1])))},initialize(){pt.enabled&&typeof crypto<"u"&&(pt.userSessionId=crypto.randomUUID())},setConnectedWalletId(t){pt.connectedWalletId=t},click(t){if(pt.enabled){const e={type:"CLICK",name:t.name,userSessionId:pt.userSessionId,timestamp:Date.now(),data:t};pt.events.push(e)}},track(t){if(pt.enabled){const e={type:"TRACK",name:t.name,userSessionId:pt.userSessionId,timestamp:Date.now(),data:t};pt.events.push(e)}},view(t){if(pt.enabled){const e={type:"VIEW",name:t.name,userSessionId:pt.userSessionId,timestamp:Date.now(),data:t};pt.events.push(e)}}},at=jt({selectedChain:void 0,chains:void 0,standaloneChains:void 0,standaloneUri:void 0,isStandalone:!1,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1,isPreferInjected:!1,walletConnectVersion:1}),it={state:at,subscribe(t){return Wt(at,()=>t(at))},setChains(t){at.chains=t},setStandaloneChains(t){at.standaloneChains=t},setStandaloneUri(t){at.standaloneUri=t},getSelectedChain(){const t=kt.client().getNetwork().chain;return t&&(at.selectedChain=t),at.selectedChain},setSelectedChain(t){at.selectedChain=t},setIsStandalone(t){at.isStandalone=t},setIsCustomDesktop(t){at.isCustomDesktop=t},setIsCustomMobile(t){at.isCustomMobile=t},setIsDataLoaded(t){at.isDataLoaded=t},setIsUiLoaded(t){at.isUiLoaded=t},setWalletConnectVersion(t){at.walletConnectVersion=t},setIsPreferInjected(t){at.isPreferInjected=t},setIsAuth(t){at.isAuth=t}},hi=jt({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chainImages:void 0,tokenImages:void 0,tokenContracts:void 0,standaloneChains:void 0,enableStandaloneMode:!1,enableAuthMode:!1,enableNetworkView:!1,enableAccountView:!0,enableExplorer:!0,defaultChain:void 0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),tr={state:hi,subscribe(t){return Wt(hi,()=>t(hi))},setConfig(t){var e,r,i,n;c1.initialize(),it.setStandaloneChains(t.standaloneChains),it.setIsStandalone(!!((e=t.standaloneChains)!=null&&e.length)||!!t.enableStandaloneMode),it.setIsAuth(!!t.enableAuthMode),it.setIsCustomMobile(!!((r=t.mobileWallets)!=null&&r.length)),it.setIsCustomDesktop(!!((i=t.desktopWallets)!=null&&i.length)),it.setWalletConnectVersion((n=t.walletConnectVersion)!=null?n:1),it.state.isStandalone||(it.setChains(kt.client().chains),it.setIsPreferInjected(kt.client().isInjectedProviderInstalled()&&ut.isPreferInjectedFlag())),t.defaultChain&&it.setSelectedChain(t.defaultChain),ut.setWeb3ModalVersionInStorage(),Object.assign(hi,t)}},Be=jt({address:void 0,profileName:void 0,profileAvatar:void 0,profileLoading:!1,balanceLoading:!1,balance:void 0,isConnected:!1}),u1={state:Be,subscribe(t){return Wt(Be,()=>t(Be))},getAccount(){const t=kt.client().getAccount();Be.address=t.address,Be.isConnected=t.isConnected},async fetchProfile(t,e){var r;try{Be.profileLoading=!0;const i=e??Be.address,n=(r=it.state.chains)==null?void 0:r.find(c=>c.id===1);if(i&&n){const c=await kt.client().fetchEnsName({address:i,chainId:1});if(c){const h=await kt.client().fetchEnsAvatar({name:c,chainId:1});h&&await t(h),Be.profileAvatar=h}Be.profileName=c}}finally{Be.profileLoading=!1}},async fetchBalance(t){try{const{chain:e}=kt.client().getNetwork(),{tokenContracts:r}=tr.state;let i;e&&r&&(i=r[e.id]),Be.balanceLoading=!0;const n=t??Be.address;if(n){const c=await kt.client().fetchBalance({address:n,token:i});Be.balance={amount:c.formatted,symbol:c.symbol}}}finally{Be.balanceLoading=!1}},setAddress(t){Be.address=t},setIsConnected(t){Be.isConnected=t},resetBalance(){Be.balance=void 0},resetAccount(){Be.address=void 0,Be.isConnected=!1,Be.profileName=void 0,Be.profileAvatar=void 0,Be.balance=void 0}},wn="https://explorer-api.walletconnect.com";async function fi(t,e){const r=new URL(t,wn);return r.searchParams.append("projectId",tr.state.projectId),Object.entries(e).forEach(([i,n])=>{n&&r.searchParams.append(i,String(n))}),(await fetch(r)).json()}const Xt={async getDesktopListings(t){return fi("/w3m/v1/getDesktopListings",t)},async getMobileListings(t){return fi("/w3m/v1/getMobileListings",t)},async getInjectedListings(t){return fi("/w3m/v1/getInjectedListings",t)},async getAllListings(t){return fi("/w3m/v1/getAllListings",t)},getWalletImageUrl(t){return`${wn}/w3m/v1/getWalletImage/${t}?projectId=${tr.state.projectId}`},getAssetImageUrl(t){return`${wn}/w3m/v1/getAssetImage/${t}?projectId=${tr.state.projectId}`}};var l1=Object.defineProperty,So=Object.getOwnPropertySymbols,h1=Object.prototype.hasOwnProperty,f1=Object.prototype.propertyIsEnumerable,xo=(t,e,r)=>e in t?l1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,d1=(t,e)=>{for(var r in e||(e={}))h1.call(e,r)&&xo(t,r,e[r]);if(So)for(var r of So(e))f1.call(e,r)&&xo(t,r,e[r]);return t};const Io=ut.isMobile(),At=jt({wallets:{listings:[],total:0,page:1},injectedWallets:[],search:{listings:[],total:0,page:1},recomendedWallets:[]}),G1={state:At,async getRecomendedWallets(){const{explorerRecommendedWalletIds:t,explorerExcludedWalletIds:e}=tr.state;if(t==="NONE"||e==="ALL"&&!t)return At.recomendedWallets;if(ut.isArray(t)){const r={recommendedIds:t.join(",")},{listings:i}=await Xt.getAllListings(r),n=Object.values(i);n.sort((c,h)=>{const a=t.indexOf(c.id),d=t.indexOf(h.id);return a-d}),At.recomendedWallets=n}else{const{standaloneChains:r,walletConnectVersion:i,isAuth:n}=it.state,c=r==null?void 0:r.join(","),h=ut.isArray(e),a={page:1,sdks:n?"auth_v1":void 0,entries:ut.RECOMMENDED_WALLET_AMOUNT,chains:c,version:i,excludedIds:h?e.join(","):void 0},{listings:d}=Io?await Xt.getMobileListings(a):await Xt.getDesktopListings(a);At.recomendedWallets=Object.values(d)}return At.recomendedWallets},async getWallets(t){const e=d1({},t),{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:i}=tr.state,{recomendedWallets:n}=At;if(i==="ALL")return At.wallets;e.search||(n.length?e.excludedIds=n.map(I=>I.id).join(","):ut.isArray(r)&&(e.excludedIds=r.join(","))),ut.isArray(i)&&(e.excludedIds=[e.excludedIds,i].filter(Boolean).join(",")),it.state.isAuth&&(e.sdks="auth_v1");const{page:c,search:h}=t,{listings:a,total:d}=Io?await Xt.getMobileListings(e):await Xt.getDesktopListings(e),y=Object.values(a),m=h?"search":"wallets";return At[m]={listings:[...At[m].listings,...y],total:d,page:c??1},{listings:y,total:d}},async getInjectedWallets(){const{listings:t}=await Xt.getInjectedListings({}),e=Object.values(t);return At.injectedWallets=e,At.injectedWallets},getWalletImageUrl(t){return Xt.getWalletImageUrl(t)},getAssetImageUrl(t){return Xt.getAssetImageUrl(t)},resetSearch(){At.search={listings:[],total:0,page:1}}},qr=jt({pairingUri:"",pairingError:!1}),Oo={state:qr,subscribe(t){return Wt(qr,()=>t(qr))},setPairingUri(t){qr.pairingUri=t},setPairingError(t){qr.pairingError=t}},vr=jt({open:!1}),tn={state:vr,subscribe(t){return Wt(vr,()=>t(vr))},async open(t){return new Promise(e=>{const{isStandalone:r,isUiLoaded:i,isDataLoaded:n,isPreferInjected:c,selectedChain:h}=it.state,{pairingUri:a}=Oo.state,{isConnected:d}=u1.state,{enableNetworkView:y}=tr.state;if(r)it.setStandaloneUri(t==null?void 0:t.uri),it.setStandaloneChains(t==null?void 0:t.standaloneChains),fr.reset("ConnectWallet");else if(t!=null&&t.route)fr.reset(t.route);else if(d)fr.reset("Account");else if(y)fr.reset("SelectNetwork");else if(c){kt.client().connectConnector("injected",h==null?void 0:h.id).catch(m=>console.error(m)),e();return}else fr.reset("ConnectWallet");if(i&&n&&(r||a||d))vr.open=!0,e();else{const m=setInterval(()=>{const I=it.state,M=Oo.state;I.isUiLoaded&&I.isDataLoaded&&(I.isStandalone||M.pairingUri||d)&&(clearInterval(m),vr.open=!0,e())},200)}})},close(){vr.open=!1}};var p1=Object.defineProperty,Ao=Object.getOwnPropertySymbols,g1=Object.prototype.hasOwnProperty,y1=Object.prototype.propertyIsEnumerable,Co=(t,e,r)=>e in t?p1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,w1=(t,e)=>{for(var r in e||(e={}))g1.call(e,r)&&Co(t,r,e[r]);if(Ao)for(var r of Ao(e))y1.call(e,r)&&Co(t,r,e[r]);return t};function b1(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const Vr=jt({themeMode:b1()?"dark":"light"}),To={state:Vr,subscribe(t){return Wt(Vr,()=>t(Vr))},setThemeConfig(t){const{themeMode:e,themeVariables:r}=t;e&&(Vr.themeMode=e),r&&(Vr.themeVariables=w1({},r))}},hr=jt({open:!1,message:"",variant:"success"}),Y1={state:hr,subscribe(t){return Wt(hr,()=>t(hr))},openToast(t,e){hr.open=!0,hr.message=t,hr.variant=e},closeToast(){hr.open=!1}};typeof window<"u"&&(window.Buffer||(window.Buffer=nc.Buffer),window.global||(window.global=window),window.process||(window.process={env:{}}));var m1=Object.defineProperty,No=Object.getOwnPropertySymbols,_1=Object.prototype.hasOwnProperty,E1=Object.prototype.propertyIsEnumerable,Ro=(t,e,r)=>e in t?m1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,v1=(t,e)=>{for(var r in e||(e={}))_1.call(e,r)&&Ro(t,r,e[r]);if(No)for(var r of No(e))E1.call(e,r)&&Ro(t,r,e[r]);return t};class D1{constructor(e){this.openModal=tn.open,this.closeModal=tn.close,this.subscribeModal=tn.subscribe,this.setTheme=To.setThemeConfig,To.setThemeConfig(e),tr.setConfig(v1({enableStandaloneMode:!0},e)),this.initUi()}async initUi(){if(typeof window<"u"){await kg(()=>import("./index-db3ff912.js"),["assets/index-db3ff912.js","assets/vendor-818099cb.js"]);const e=document.createElement("w3m-modal");document.body.insertAdjacentElement("beforeend",e),it.setIsUiLoaded(!0)}}}const S1="f8ecda7a059571686392adfb46ff2b1b",x1="wss://relay.walletconnect.com",oc="chia:testnet";var ct=(t=>(t.ChainId="chip0002_chainId",t.Connect="chip0002_connect",t.GetPublicKeys="chip0002_getPublicKeys",t.FilterUnlockedCoins="chip0002_filterUnlockedCoins",t.GetAssetCoins="chip0002_getAssetCoins",t.GetAssetBalance="chip0002_getAssetBalance",t.SignCoinSpends="chip0002_signCoinSpends",t.SignMessage="chip0002_signMessage",t.SendTransaction="chip0002_sendTransaction",t.Transfer="chia_transfer",t.TakeOffer="chia_takeOffer",t.CreateOffer="chia_createOffer",t.CancelOffer="chia_cancelOffer",t.GetNfts="chia_getNfts",t.Send="chia_send",t.GetAddress="chia_getAddress",t))(ct||{});const I1={chia:{methods:Object.values(ct),chains:[oc],events:[]}},O1={name:"Test App",description:"A test application for WalletConnect.",url:"#",icons:["https://walletconnect.com/walletconnect-logo.png"]},ac=$e.createContext({});function A1({projectId:t,relayUrl:e,chainId:r,children:i}){const[n,c]=$e.useState(),[h,a]=$e.useState(),[d,y]=$e.useState([]),[m,I]=$e.useState(),[M,N]=$e.useState(),[T,j]=$e.useState(!1),[q,X]=$e.useState([]),C=()=>{I(void 0),X([])},R=$e.useCallback(b=>{const S=Object.values(b.namespaces).map(F=>F.accounts).flat();I(b),X(S),N(S[0].split(":")[2])},[]),v=$e.useCallback(async b=>{if(!h)throw new Error("WalletConnect is not initialized");if(!n)throw new Error("Web3Modal is not initialized");try{const{uri:S,approval:F}=await h.connect({pairingTopic:b==null?void 0:b.topic,requiredNamespaces:I1});if(S){n.openModal({uri:S});const H=await F();R(H),y(h.pairing.getAll({active:!0}))}}catch(S){S&&console.error(S)}finally{n.closeModal()}},[h,R,n]),x=$e.useCallback(async()=>{if(!h)throw new Error("WalletConnect is not initialized");if(!m)throw new Error("Session is not connected");await h.disconnect({topic:m.topic,reason:We("USER_DISCONNECTED")}),C()},[h,m]),w=$e.useCallback(async b=>{if(!b)throw new Error("WalletConnect is not initialized");b.on("session_update",({topic:S,params:F})=>{const{namespaces:H}=F,D={...b.session.get(S),namespaces:H};R(D)}),b.on("session_delete",()=>C()),b.on("session_event",(...S)=>console.log(S))},[R]),o=$e.useCallback(async b=>{if(!b)throw new Error("WalletConnect is not initialized.");if(y(b.pairing.getAll({active:!0})),!m&&b.session.length){const S=b.session.keys.length-1,F=b.session.get(b.session.keys[S]);return R(F),F}},[m,R]),p=$e.useCallback(async()=>{try{j(!0);const b=await jn.init({relayUrl:e,projectId:t,metadata:O1}),S=new D1({projectId:t,standaloneChains:[r],walletConnectVersion:2});a(b),c(S),await w(b),await o(b)}finally{j(!1)}},[o,w,r,t,e]);$e.useEffect(()=>{h||p()},[h,p]);const z=$e.useMemo(()=>({pairings:d,isInitializing:T,accounts:q,client:h,web3Modal:n,session:m,fingerprint:M,connect:v,disconnect:x}),[d,T,q,h,n,m,M,v,x]);return dr.jsx(ac.Provider,{value:{chainId:r,...z},children:i})}function cc(){const t=$e.useContext(ac);if(!t)throw new Error("Calls to `useWalletConnect` must be used within a `WalletConnectProvider`.");return t}const uc=$e.createContext({});function C1({children:t}){const{client:e,session:r,chainId:i,fingerprint:n}=cc();async function c(h,a){if(!e)throw new Error("WalletConnect is not initialized");if(!r)throw new Error("Session is not connected");if(!n)throw new Error("Fingerprint is not loaded.");return await(e==null?void 0:e.request({topic:r.topic,chainId:i,request:{method:h,params:a}}))}return dr.jsx(uc.Provider,{value:{chainId:h=>c(ct.ChainId,h),connect:h=>c(ct.Connect,h),getPublicKeys:h=>c(ct.GetPublicKeys,h),filterUnlockedCoins:h=>c(ct.FilterUnlockedCoins,h),getAssetCoins:h=>c(ct.GetAssetCoins,h),getAssetBalance:h=>c(ct.GetAssetBalance,h),signCoinSpends:h=>c(ct.SignCoinSpends,h),signMessage:h=>c(ct.SignMessage,h),sendTransaction:h=>c(ct.SendTransaction,h),createOffer:h=>c(ct.CreateOffer,h),takeOffer:h=>c(ct.TakeOffer,h),cancelOffer:h=>c(ct.CancelOffer,h),getNfts:h=>c(ct.GetNfts,h),send:h=>c(ct.Send,h),getAddress:h=>c(ct.GetAddress,h)},children:t})}function T1(){const t=$e.useContext(uc);if(!t)throw new Error("Calls to `useJsonRpc` must be used within a `JsonRpcProvider`.");return t}function N1(){const{client:t,session:e,pairings:r,connect:i,disconnect:n}=cc(),c=T1();return $e.useEffect(()=>{window.gd_useWalletConnect=h=>{const a=h.split(";"),d=a[0];h!="session;"&&console.log("Received a command: "+d);try{switch(d){case"client":return t;case"session":return e;case"pairings":return r;case"connect":if(!t)throw new Error("WalletConnect client is not initialized.");return r.length===1?i({topic:r[0].topic}):r.length>1?console.warn("Multiple pairings detected. Modal handling is not implemented.",r):i(),null;case"disconnect":return n(),localStorage.clear(),window.location.href="",null;case"send":if(!t||!e)throw new Error("WalletConnect session is not active.");if(a.length<3)throw new Error("Invalid inputs. Format: send;<recipient_address>;<amount>;<fee>");const y=a[1],m=parseInt(a[2]),I=parseInt(a[3]);if(!y||isNaN(m)||isNaN(I))throw new Error("Invalid recipient address, amount, or fee. Please check your input.");return c.send({address:y,amount:m,fee:I,assetId:void 0,memos:void 0}).then(T=>T).catch(T=>{throw console.error("Error sending XCH:",T),T});case"chainId":return c.chainId({}).then(T=>String(T)).catch(T=>{throw console.error("Error fetching Chain ID:",T),T});case"fetch_nfts":const M=0,N=10;return c.getNfts({collectionId:void 0,offset:M,limit:N}).then(T=>{const j=T.nfts,q=JSON.stringify(j,null,2);return console.log(q),q}).catch(T=>{throw console.error("Error fetching NFT:",T),T});default:return console.error(`Invalid term provided to gd_useWalletConnect: "${h}"`),null}}catch(y){return console.error("Error in gd_useWalletConnect:",y),null}}},[t,e,r,i,n]),null}function R1(){return dr.jsx(N1,{})}const P1=Mo(document.querySelector("#root"));P1.render(dr.jsx($e.StrictMode,{children:dr.jsx(A1,{projectId:S1,relayUrl:x1,chainId:oc,children:dr.jsx(C1,{children:dr.jsx(R1,{})})})}));export{kt as C,c1 as H,u1 as K,Oo as _,To as a,fr as b,ut as c,it as d,G1 as n,Y1 as o,tn as s,tr as y};
